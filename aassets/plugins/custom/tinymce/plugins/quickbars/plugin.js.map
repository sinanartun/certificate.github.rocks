{"version":3,"sources":["quickbars/plugin.js"],"names":["domGlobals","eq","call","id","me","global","tinymce","util","Tools","resolve","unique","Actions","editor","cols","rows","plugins","table","insertTable","undoManager","transact","tableElm","cellElm","insertContent","x","y","html","createTableHtml","dom","select","getInsertedElement","removeAttribute","selection","setCursorLocation","insertTableHtml","base64","blob","blobCache","blobInfo","prefix","time","editorUpload","create","Date","getTime","Math","floor","random","String","add","createHTML","src","blobUri","global$1","Conversions","reader","FileReader","onloadend","result","split","readAsDataURL","Picker","fileInput","document","createElement","type","style","position","left","top","opacity","body","appendChild","onchange","e","Array","prototype","slice","target","files","click","parentNode","removeChild","InsertButtons","setupButtons","ui","registry","addButton","icon","tooltip","onAction","then","noop","constant","value","never","always","none","NONE","o","isNone","fold","n","s","is","isSome","getOr","getOrThunk","thunk","getOrDie","msg","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","equals","equals_","toArray","toString","Object","freeze","some","a","constant_a","self","f","v","elementEq","b","Option","from","fromDom","node","Element","fromHtml","scope","div","innerHTML","hasChildNodes","childNodes","length","console","error","fromTag","tag","fromText","text","createTextNode","fromPoint","docElm","doc","elementFromPoint","ELEMENT","Node","ATTRIBUTE_NODE","CDATA_SECTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","ELEMENT_NODE","isType","TEXT_NODE","PROCESSING_INSTRUCTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","NOTATION_NODE","window","Function","t","isPrototypeOf","constructor","name","typeOf","isString","isObject","isArray","isBoolean","isUndefined","isFunction","nativeSlice","ClosestOrAncestor","ancestor","isRoot","predicate","compareDocumentPosition","match","DOCUMENT_POSITION_CONTAINED_BY","Cell","initial","get","set","clone","unknown","nu","major","minor","Version","detect","versionRegexes","agent","cleanedAgent","toLowerCase","regexes","r","i","test","firstMatch","group","Number","replace","find$1","isBrowser","current","nu$1","info","version","isEdge","isChrome","isIE","isOpera","isFirefox","isSafari","Browser","edge","chrome","ie","opera","firefox","safari","isOS","nu$2","isWindows","isiOS","isAndroid","isOSX","isLinux","isSolaris","isFreeBSD","OperatingSystem","windows","ios","android","linux","osx","solaris","freebsd","detect$1","candidates","userAgent","xs","pred","len","find","candidate","search","UaString","browsers","browser","oses","os","contains","str","substr","indexOf","normalVersionRegex","checkContains","uastring","PlatformInfo","PlatformDetection","mediaMatch","deviceType","isiPad","isiPhone","isMobile","isTouch","isTablet","isPhone","iOSwebview","isDesktop","isWebView","DeviceType","platform","navigator","query","matchMedia","matches","ELEMENT$1","element","selector","nodeType","elem","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","stop","el","ancestor$1","EditorSettings","getToolbarItemsOr","defaultValue","validDefaultOrDie","items","getParam","Settings","InsertToolbars","addToEditor","insertToolbarItems","trim","addContextToolbar","sugarNode","textBlockElementsMap","schema","getTextBlockElements","getBody","closest$1","closest","nodeName","isEmpty","SelectionToolbars","className","textToolbarItems","isCollapsed"],"mappings":"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","file":"plugin.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.0 (2019-10-17)\n */\n(function (domGlobals) {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var unique = 0;\n    var generate = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    var createTableHtml = function (cols, rows) {\n      var x, y, html;\n      html = '<table data-mce-id=\"mce\" style=\"width: 100%\">';\n      html += '<tbody>';\n      for (y = 0; y < rows; y++) {\n        html += '<tr>';\n        for (x = 0; x < cols; x++) {\n          html += '<td><br></td>';\n        }\n        html += '</tr>';\n      }\n      html += '</tbody>';\n      html += '</table>';\n      return html;\n    };\n    var getInsertedElement = function (editor) {\n      var elms = editor.dom.select('*[data-mce-id]');\n      return elms[0];\n    };\n    var insertTableHtml = function (editor, cols, rows) {\n      editor.undoManager.transact(function () {\n        var tableElm, cellElm;\n        editor.insertContent(createTableHtml(cols, rows));\n        tableElm = getInsertedElement(editor);\n        tableElm.removeAttribute('data-mce-id');\n        cellElm = editor.dom.select('td,th', tableElm);\n        editor.selection.setCursorLocation(cellElm[0], 0);\n      });\n    };\n    var insertTable = function (editor, cols, rows) {\n      editor.plugins.table ? editor.plugins.table.insertTable(cols, rows) : insertTableHtml(editor, cols, rows);\n    };\n    var insertBlob = function (editor, base64, blob) {\n      var blobCache, blobInfo;\n      blobCache = editor.editorUpload.blobCache;\n      blobInfo = blobCache.create(generate('mceu'), blob, base64);\n      blobCache.add(blobInfo);\n      editor.insertContent(editor.dom.createHTML('img', { src: blobInfo.blobUri() }));\n    };\n    var Actions = {\n      insertTable: insertTable,\n      insertBlob: insertBlob\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var blobToBase64 = function (blob) {\n      return new global$1(function (resolve) {\n        var reader = new domGlobals.FileReader();\n        reader.onloadend = function () {\n          resolve(reader.result.split(',')[1]);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n    var Conversions = { blobToBase64: blobToBase64 };\n\n    var pickFile = function () {\n      return new global$1(function (resolve) {\n        var fileInput;\n        fileInput = domGlobals.document.createElement('input');\n        fileInput.type = 'file';\n        fileInput.style.position = 'fixed';\n        fileInput.style.left = 0;\n        fileInput.style.top = 0;\n        fileInput.style.opacity = 0.001;\n        domGlobals.document.body.appendChild(fileInput);\n        fileInput.onchange = function (e) {\n          resolve(Array.prototype.slice.call(e.target.files));\n        };\n        fileInput.click();\n        fileInput.parentNode.removeChild(fileInput);\n      });\n    };\n    var Picker = { pickFile: pickFile };\n\n    var setupButtons = function (editor) {\n      editor.ui.registry.addButton('quickimage', {\n        icon: 'image',\n        tooltip: 'Insert image',\n        onAction: function () {\n          Picker.pickFile().then(function (files) {\n            var blob = files[0];\n            Conversions.blobToBase64(blob).then(function (base64) {\n              Actions.insertBlob(editor, base64, blob);\n            });\n          });\n        }\n      });\n      editor.ui.registry.addButton('quicktable', {\n        icon: 'table',\n        tooltip: 'Insert table',\n        onAction: function () {\n          Actions.insertTable(editor, 2, 2);\n        }\n      });\n    };\n    var InsertButtons = { setupButtons: setupButtons };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        domGlobals.console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: constant(node) };\n    };\n    var fromPoint = function (docElm, x, y) {\n      var doc = docElm.dom();\n      return Option.from(doc.elementFromPoint(x, y)).map(fromDom);\n    };\n    var Element = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var ATTRIBUTE = domGlobals.Node.ATTRIBUTE_NODE;\n    var CDATA_SECTION = domGlobals.Node.CDATA_SECTION_NODE;\n    var COMMENT = domGlobals.Node.COMMENT_NODE;\n    var DOCUMENT = domGlobals.Node.DOCUMENT_NODE;\n    var DOCUMENT_TYPE = domGlobals.Node.DOCUMENT_TYPE_NODE;\n    var DOCUMENT_FRAGMENT = domGlobals.Node.DOCUMENT_FRAGMENT_NODE;\n    var ELEMENT = domGlobals.Node.ELEMENT_NODE;\n    var TEXT = domGlobals.Node.TEXT_NODE;\n    var PROCESSING_INSTRUCTION = domGlobals.Node.PROCESSING_INSTRUCTION_NODE;\n    var ENTITY_REFERENCE = domGlobals.Node.ENTITY_REFERENCE_NODE;\n    var ENTITY = domGlobals.Node.ENTITY_NODE;\n    var NOTATION = domGlobals.Node.NOTATION_NODE;\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var name = function (element) {\n      var r = element.dom().nodeName;\n      return r.toLowerCase();\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isString = isType('string');\n    var isObject = isType('object');\n    var isArray = isType('array');\n    var isBoolean = isType('boolean');\n    var isUndefined = isType('undefined');\n    var isFunction = isType('function');\n\n    var nativeSlice = Array.prototype.slice;\n    var find = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      return is(scope, a) ? Option.some(scope) : isFunction(isRoot) && isRoot(scope) ? Option.none() : ancestor(scope, a, isRoot);\n    }\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionPreceding = function (a, b) {\n      return compareDocumentPosition(a, b, domGlobals.Node.DOCUMENT_POSITION_PRECEDING);\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, domGlobals.Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n    var Node = {\n      documentPositionPreceding: documentPositionPreceding,\n      documentPositionContainedBy: documentPositionContainedBy\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$1 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$1(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu(0, 0);\n    };\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var isBrowser = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge, current),\n        isChrome: isBrowser(chrome, current),\n        isIE: isBrowser(ie, current),\n        isOpera: isBrowser(opera, current),\n        isFirefox: isBrowser(firefox, current),\n        isSafari: isBrowser(safari, current)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var isOS = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows, current),\n        isiOS: isOS(ios, current),\n        isAndroid: isOS(android, current),\n        isOSX: isOS(osx, current),\n        isLinux: isOS(linux, current),\n        isSolaris: isOS(solaris, current),\n        isFreeBSD: isOS(freebsd, current)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd)\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var contains = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains(uastring, 'edge/') && contains(uastring, 'chrome') && contains(uastring, 'safari') && contains(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains(uastring, 'chrome') && !contains(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains(uastring, 'msie') || contains(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains(uastring, 'safari') || contains(uastring, 'mobile/')) && contains(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains(uastring, 'iphone') || contains(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('os x'),\n        versionRegexes: [/.*?os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var detect$2 = function (userAgent, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var mediaMatch = function (query) {\n      return domGlobals.window.matchMedia(query).matches;\n    };\n    var platform = Cell(PlatformDetection.detect(domGlobals.navigator.userAgent, mediaMatch));\n    var detect$3 = function () {\n      return platform.get();\n    };\n\n    var ELEMENT$1 = ELEMENT;\n    var is = function (element, selector) {\n      var dom = element.dom();\n      if (dom.nodeType !== ELEMENT$1) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom();\n      var d2 = e2.dom();\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return Node.documentPositionContainedBy(e1.dom(), e2.dom());\n    };\n    var browser = detect$3().browser;\n    var contains$1 = browser.isIE() ? ieContains : regularContains;\n\n    var ancestor = function (scope, predicate, isRoot) {\n      var element = scope.dom();\n      var stop = isFunction(isRoot) ? isRoot : constant(false);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = Element.fromDom(element);\n        if (predicate(el)) {\n          return Option.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Option.none();\n    };\n    var closest = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor, scope, predicate, isRoot);\n    };\n\n    var ancestor$1 = function (scope, selector, isRoot) {\n      return ancestor(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var closest$1 = function (scope, selector, isRoot) {\n      return ClosestOrAncestor(is, ancestor$1, scope, selector, isRoot);\n    };\n\n    var validDefaultOrDie = function (value, predicate) {\n      if (predicate(value)) {\n        return true;\n      }\n      throw new Error('Default value doesn\\'t match requested type.');\n    };\n    var items = function (value, defaultValue) {\n      if (isArray(value) || isObject(value)) {\n        throw new Error('expected a string but found: ' + value);\n      }\n      if (isUndefined(value)) {\n        return defaultValue;\n      }\n      if (isBoolean(value)) {\n        return value === false ? '' : defaultValue;\n      }\n      return value;\n    };\n    var getToolbarItemsOr = function (predicate) {\n      return function (editor, name, defaultValue) {\n        validDefaultOrDie(defaultValue, predicate);\n        var value = editor.getParam(name, defaultValue);\n        return items(value, defaultValue);\n      };\n    };\n    var EditorSettings = { getToolbarItemsOr: getToolbarItemsOr(isString) };\n\n    var getTextSelectionToolbarItems = function (editor) {\n      return EditorSettings.getToolbarItemsOr(editor, 'quickbars_selection_toolbar', 'bold italic | quicklink h2 h3 blockquote');\n    };\n    var getInsertToolbarItems = function (editor) {\n      return EditorSettings.getToolbarItemsOr(editor, 'quickbars_insert_toolbar', 'quickimage quicktable');\n    };\n    var Settings = {\n      getTextSelectionToolbarItems: getTextSelectionToolbarItems,\n      getInsertToolbarItems: getInsertToolbarItems\n    };\n\n    var addToEditor = function (editor) {\n      var insertToolbarItems = Settings.getInsertToolbarItems(editor);\n      if (insertToolbarItems.trim().length > 0) {\n        editor.ui.registry.addContextToolbar('quickblock', {\n          predicate: function (node) {\n            var sugarNode = Element.fromDom(node);\n            var textBlockElementsMap = editor.schema.getTextBlockElements();\n            var isRoot = function (elem) {\n              return elem.dom() === editor.getBody();\n            };\n            return closest$1(sugarNode, 'table', isRoot).fold(function () {\n              return closest(sugarNode, function (elem) {\n                return name(elem) in textBlockElementsMap && editor.dom.isEmpty(elem.dom());\n              }, isRoot).isSome();\n            }, function () {\n              return false;\n            });\n          },\n          items: insertToolbarItems,\n          position: 'line',\n          scope: 'editor'\n        });\n      }\n    };\n    var InsertToolbars = { addToEditor: addToEditor };\n\n    var addToEditor$1 = function (editor) {\n      editor.ui.registry.addContextToolbar('imageselection', {\n        predicate: function (node) {\n          return node.nodeName === 'IMG' || node.nodeName === 'FIGURE' && /image/i.test(node.className);\n        },\n        items: 'alignleft aligncenter alignright',\n        position: 'node'\n      });\n      var textToolbarItems = Settings.getTextSelectionToolbarItems(editor);\n      if (textToolbarItems.trim().length > 0) {\n        editor.ui.registry.addContextToolbar('textselection', {\n          predicate: function (node) {\n            return !editor.selection.isCollapsed();\n          },\n          items: textToolbarItems,\n          position: 'selection'\n        });\n      }\n    };\n    var SelectionToolbars = { addToEditor: addToEditor$1 };\n\n    function Plugin () {\n      global.add('quickbars', function (editor) {\n        InsertButtons.setupButtons(editor);\n        InsertToolbars.addToEditor(editor);\n        SelectionToolbars.addToEditor(editor);\n      });\n    }\n\n    Plugin();\n\n}(window));\n"]}