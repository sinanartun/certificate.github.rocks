{"version":3,"sources":["anchor/plugin.min.js"],"names":["e","o","t","length","n","attr","firstChild","tinymce","util","Tools","resolve","add","on","parser","addNodeFilter","serializer","c","addCommand","selection","getNode","tagName","dom","getAttrib","getAttribute","windowManager","open","title","size","body","type","items","name","label","placeholder","buttons","text","primary","initialData","id","onSubmit","test","removeAttribute","undoManager","focus","collapse","execCommand","createHTML","r","alert","getData","close","a","i","ui","registry","addToggleButton","icon","tooltip","onAction","onSetup","selectorChangedWithUnbind","setActive","unbind","addMenuItem"],"mappings":"CAQC,WAAW,aAAa,SAASA,EAAEC,GAAG,OAAO,SAASC,GAAG,IAAI,IAAIF,EAAE,EAAEA,EAAEE,EAAEC,OAAOH,KAAKI,EAAEF,EAAEF,IAAIK,KAAK,UAAUD,EAAEC,KAAK,QAAQD,EAAEC,KAAK,SAASD,EAAEE,YAAYJ,EAAEF,GAAGK,KAAK,kBAAkBJ,GAAG,IAAIG,GAAG,IAAIF,EAAEK,QAAQC,KAAKC,MAAMC,QAAQ,yBAAwhDR,EAAES,IAAI,SAAS,SAAST,GAAzZ,IAASF,GAAnI,SAASE,GAAGA,EAAEU,GAAG,UAAU,WAAWV,EAAEW,OAAOC,cAAc,IAAId,EAAE,UAAUE,EAAEa,WAAWD,cAAc,IAAId,EAAE,UAAwagB,CAAEd,GAAllB,SAASA,GAAGA,EAAEe,WAAW,YAAY,YAAtiB,SAASjB,GAAG,IAAIE,EAA5Z,SAASA,GAAG,IAAIF,EAAEE,EAAEgB,UAAUC,UAAU,MAAM,MAAMnB,EAAEoB,SAAS,KAAKlB,EAAEmB,IAAIC,UAAUtB,EAAE,QAAQA,EAAEuB,aAAa,OAAOvB,EAAEuB,aAAa,QAAQ,GAAmRtB,CAAED,GAAGA,EAAEwB,cAAcC,KAAK,CAACC,MAAM,SAASC,KAAK,SAASC,KAAK,CAACC,KAAK,QAAQC,MAAM,CAAC,CAACC,KAAK,KAAKF,KAAK,QAAQG,MAAM,KAAKC,YAAY,aAAaC,QAAQ,CAAC,CAACL,KAAK,SAASE,KAAK,SAASI,KAAK,UAAU,CAACN,KAAK,SAASE,KAAK,OAAOI,KAAK,OAAOC,SAAQ,IAAKC,YAAY,CAACC,GAAGpC,GAAGqC,SAAS,SAASrC,IAAI,SAASA,EAAEF,GAAG,OAAvwB,SAASE,GAAG,MAAM,8BAA8BsC,KAAKtC,GAAytBE,CAAEJ,IAApkB,SAASE,EAAEF,GAAG,IAAII,EAAEF,EAAEgB,UAAUC,UAAU,MAAMf,EAAEgB,SAAS,KAAKlB,EAAEmB,IAAIC,UAAUlB,EAAE,SAASA,EAAEqC,gBAAgB,QAAQrC,EAAEkC,GAAGtC,EAAEE,EAAEwC,YAAY/B,QAAQT,EAAEyC,QAAQzC,EAAEgB,UAAU0B,UAAS,GAAI1C,EAAE2C,YAAY,oBAAmB,EAAG3C,EAAEmB,IAAIyB,WAAW,IAAI,CAACR,GAAGtC,MAAsV+C,CAAE7C,EAAEF,IAAG,IAAKE,EAAEsB,cAAcwB,MAAM,2GAA0G,GAAvK,CAA4KhD,EAAEE,EAAE+C,UAAUX,KAAKpC,EAAEgD,WAA8DC,CAAEjD,KAAmiBkD,CAAElD,IAA1ZF,EAA+ZE,GAA1ZmD,GAAGC,SAASC,gBAAgB,SAAS,CAACC,KAAK,WAAWC,QAAQ,SAASC,SAAS,WAAW,OAAO1D,EAAE6C,YAAY,cAAcc,QAAQ,SAASzD,GAAG,OAAOF,EAAEkB,UAAU0C,0BAA0B,gBAAgB1D,EAAE2D,WAAWC,UAAU9D,EAAEqD,GAAGC,SAASS,YAAY,SAAS,CAACP,KAAK,WAAWrB,KAAK,YAAYuB,SAAS,WAAW,OAAO1D,EAAE6C,YAAY,kBAAztD","file":"plugin.min.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.0 (2019-10-17)\n */\n!function(){\"use strict\";function e(o){return function(t){for(var e=0;e<t.length;e++)(n=t[e]).attr(\"href\")||!n.attr(\"id\")&&!n.attr(\"name\")||n.firstChild||t[e].attr(\"contenteditable\",o);var n}}var t=tinymce.util.Tools.resolve(\"tinymce.PluginManager\"),n=function(t){return/^[A-Za-z][A-Za-z0-9\\-:._]*$/.test(t)},o=function(t){var e=t.selection.getNode();return\"A\"===e.tagName&&\"\"===t.dom.getAttrib(e,\"href\")?e.getAttribute(\"id\")||e.getAttribute(\"name\"):\"\"},r=function(t,e){var n=t.selection.getNode();\"A\"===n.tagName&&\"\"===t.dom.getAttrib(n,\"href\")?(n.removeAttribute(\"name\"),n.id=e,t.undoManager.add()):(t.focus(),t.selection.collapse(!0),t.execCommand(\"mceInsertContent\",!1,t.dom.createHTML(\"a\",{id:e})))},a=function(e){var t=o(e);e.windowManager.open({title:\"Anchor\",size:\"normal\",body:{type:\"panel\",items:[{name:\"id\",type:\"input\",label:\"ID\",placeholder:\"example\"}]},buttons:[{type:\"cancel\",name:\"cancel\",text:\"Cancel\"},{type:\"submit\",name:\"save\",text:\"Save\",primary:!0}],initialData:{id:t},onSubmit:function(t){!function(t,e){return n(e)?(r(t,e),!1):(t.windowManager.alert(\"Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores.\"),!0)}(e,t.getData().id)&&t.close()}})},i=function(t){t.addCommand(\"mceAnchor\",function(){a(t)})},c=function(t){t.on(\"PreInit\",function(){t.parser.addNodeFilter(\"a\",e(\"false\")),t.serializer.addNodeFilter(\"a\",e(null))})},d=function(e){e.ui.registry.addToggleButton(\"anchor\",{icon:\"bookmark\",tooltip:\"Anchor\",onAction:function(){return e.execCommand(\"mceAnchor\")},onSetup:function(t){return e.selection.selectorChangedWithUnbind(\"a:not([href])\",t.setActive).unbind}}),e.ui.registry.addMenuItem(\"anchor\",{icon:\"bookmark\",text:\"Anchor...\",onAction:function(){return e.execCommand(\"mceAnchor\")}})};!function u(){t.add(\"anchor\",function(t){c(t),i(t),d(t)})}()}();"]}