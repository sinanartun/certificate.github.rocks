{"version":3,"sources":["save/plugin.min.js"],"names":["t","n","e","notificationManager","open","text","type","setDisabled","a","isDirty","on","off","tinymce","util","Tools","resolve","o","i","getParam","s","addCommand","DOM","getParent","id","save","c","execCallback","nodeChanged","setDirty","onsubmit","submit","u","trim","startContent","r","resetContent","l","add","ui","registry","addButton","icon","tooltip","disabled","onAction","execCommand","onSetup","addShortcut","d"],"mappings":"CAQC,WAAW,aAAa,SAASA,EAAEC,EAAEC,GAAGD,EAAEE,oBAAoBC,KAAK,CAACC,KAAKH,EAAEI,KAAK,UAAU,SAASJ,EAAEF,GAAG,OAAO,SAASC,GAAG,SAASC,IAAID,EAAEM,YAAYC,EAAER,KAAKA,EAAES,WAAW,OAAOT,EAAEU,GAAG,mBAAmBR,GAAG,WAAW,OAAOF,EAAEW,IAAI,mBAAmBT,KAAK,IAAID,EAAEW,QAAQC,KAAKC,MAAMC,QAAQ,yBAAyBC,EAAEJ,QAAQC,KAAKC,MAAMC,QAAQ,wBAAwBE,EAAEL,QAAQC,KAAKC,MAAMC,QAAQ,sBAAsBP,EAAE,SAASP,GAAG,OAAOA,EAAEiB,SAAS,wBAAuB,IAA8jBC,EAAE,SAASlB,GAAGA,EAAEmB,WAAW,UAAU,YAAxe,SAASnB,GAAG,IAAIC,EAAE,GAAGA,EAAEc,EAAEK,IAAIC,UAAUrB,EAAEsB,GAAG,SAASf,EAAEP,IAAIA,EAAEQ,UAAU,CAAC,GAAGR,EAAEuB,OAAjM,SAASvB,GAAG,QAAQA,EAAEiB,SAAS,uBAAyKO,CAAExB,GAAG,OAAOA,EAAEyB,aAAa,sBAAsBzB,QAAQA,EAAE0B,cAAczB,GAAGD,EAAE2B,UAAS,GAAI1B,EAAE2B,WAAW3B,EAAE2B,aAAa,mBAAmB3B,EAAE4B,OAAO5B,EAAE4B,SAAS9B,EAAEC,EAAE,wCAAwCA,EAAE0B,eAAe3B,EAAEC,EAAE,kCAAgM8B,CAAE9B,KAAKA,EAAEmB,WAAW,YAAY,YAA3L,SAASnB,GAAG,IAAIC,EAAEe,EAAEe,KAAK/B,EAAEgC,eAA9a,SAAShC,GAAG,QAAQA,EAAEiB,SAAS,yBAA6ZgB,CAAEjC,GAA6CA,EAAEkC,aAAajC,GAAzDD,EAAEyB,aAAa,wBAAwBzB,GAAiHmC,CAAEnC,MAAsWA,EAAEoC,IAAI,OAAO,SAASpC,IAApX,SAASA,GAAGA,EAAEqC,GAAGC,SAASC,UAAU,OAAO,CAACC,KAAK,OAAOC,QAAQ,OAAOC,UAAS,EAAGC,SAAS,WAAW,OAAO3C,EAAE4C,YAAY,YAAYC,QAAQ5C,EAAED,KAAKA,EAAEqC,GAAGC,SAASC,UAAU,SAAS,CAACC,KAAK,SAASC,QAAQ,SAASC,UAAS,EAAGC,SAAS,WAAW,OAAO3C,EAAE4C,YAAY,cAAcC,QAAQ5C,EAAED,KAAKA,EAAE8C,YAAY,SAAS,GAAG,YAAmDC,CAAE/C,GAAGkB,EAAElB,KAAt/C","file":"plugin.min.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.0 (2019-10-17)\n */\n!function(){\"use strict\";function t(n,e){n.notificationManager.open({text:e,type:\"error\"})}function e(t){return function(n){function e(){n.setDisabled(a(t)&&!t.isDirty())}return t.on(\"NodeChange dirty\",e),function(){return t.off(\"NodeChange dirty\",e)}}}var n=tinymce.util.Tools.resolve(\"tinymce.PluginManager\"),o=tinymce.util.Tools.resolve(\"tinymce.dom.DOMUtils\"),i=tinymce.util.Tools.resolve(\"tinymce.util.Tools\"),a=function(n){return n.getParam(\"save_enablewhendirty\",!0)},c=function(n){return!!n.getParam(\"save_onsavecallback\")},r=function(n){return!!n.getParam(\"save_oncancelcallback\")},u=function(n){var e;if(e=o.DOM.getParent(n.id,\"form\"),!a(n)||n.isDirty()){if(n.save(),c(n))return n.execCallback(\"save_onsavecallback\",n),void n.nodeChanged();e?(n.setDirty(!1),e.onsubmit&&!e.onsubmit()||(\"function\"==typeof e.submit?e.submit():t(n,\"Error: Form submit field collision.\")),n.nodeChanged()):t(n,\"Error: No form element found.\")}},l=function(n){var e=i.trim(n.startContent);r(n)?n.execCallback(\"save_oncancelcallback\",n):n.resetContent(e)},s=function(n){n.addCommand(\"mceSave\",function(){u(n)}),n.addCommand(\"mceCancel\",function(){l(n)})},d=function(n){n.ui.registry.addButton(\"save\",{icon:\"save\",tooltip:\"Save\",disabled:!0,onAction:function(){return n.execCommand(\"mceSave\")},onSetup:e(n)}),n.ui.registry.addButton(\"cancel\",{icon:\"cancel\",tooltip:\"Cancel\",disabled:!0,onAction:function(){return n.execCommand(\"mceCancel\")},onSetup:e(n)}),n.addShortcut(\"Meta+S\",\"\",\"mceSave\")};!function m(){n.add(\"save\",function(n){d(n),s(n)})}()}();"]}