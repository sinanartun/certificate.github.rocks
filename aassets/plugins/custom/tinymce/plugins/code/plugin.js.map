{"version":3,"sources":["code/plugin.js"],"names":["global","tinymce","util","Tools","resolve","Content","editor","html","focus","undoManager","transact","setContent","selection","setCursorLocation","nodeChanged","getContent","source_view","Dialog","editorContent","windowManager","open","title","size","body","type","items","name","buttons","text","primary","initialData","code","onSubmit","api","getData","close","Commands","register","addCommand","Buttons","ui","registry","addButton","icon","tooltip","onAction","addMenuItem","add"],"mappings":"CAQC,WACG,aAEA,IAAIA,EAASC,QAAQC,KAAKC,MAAMC,QAAQ,yBAapCC,EAXa,SAAUC,EAAQC,GACjCD,EAAOE,QACPF,EAAOG,YAAYC,SAAS,WAC1BJ,EAAOK,WAAWJ,KAEpBD,EAAOM,UAAUC,oBACjBP,EAAOQ,eAKLT,EAHa,SAAUC,GACzB,OAAOA,EAAOS,WAAW,CAAEC,aAAa,KAuCtCC,EAhCO,SAAUX,GACnB,IAAIY,EAAgBb,EAAmBC,GACvCA,EAAOa,cAAcC,KAAK,CACxBC,MAAO,cACPC,KAAM,QACNC,KAAM,CACJC,KAAM,QACNC,MAAO,CAAC,CACJD,KAAM,WACNE,KAAM,UAGZC,QAAS,CACP,CACEH,KAAM,SACNE,KAAM,SACNE,KAAM,UAER,CACEJ,KAAM,SACNE,KAAM,OACNE,KAAM,OACNC,SAAS,IAGbC,YAAa,CAAEC,KAAMb,GACrBc,SAAU,SAAUC,GAClB5B,EAAmBC,EAAQ2B,EAAIC,UAAUH,MACzCE,EAAIE,YAWNC,EAAW,CAAEC,SALF,SAAU/B,GACvBA,EAAOgC,WAAW,gBAAiB,WACjCrB,EAAYX,OAqBZiC,EAAU,CAAEF,SAhBC,SAAU/B,GACzBA,EAAOkC,GAAGC,SAASC,UAAU,OAAQ,CACnCC,KAAM,aACNC,QAAS,cACTC,SAAU,WACR,OAAO5B,EAAYX,MAGvBA,EAAOkC,GAAGC,SAASK,YAAY,OAAQ,CACrCH,KAAM,aACNf,KAAM,cACNiB,SAAU,WACR,OAAO5B,EAAYX,QAOvBN,EAAO+C,IAAI,OAAQ,SAAUzC,GAG3B,OAFA8B,EAASC,SAAS/B,GAClBiC,EAAQF,SAAS/B,GACV,KApFf","file":"plugin.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.0 (2019-10-17)\n */\n(function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var setContent = function (editor, html) {\n      editor.focus();\n      editor.undoManager.transact(function () {\n        editor.setContent(html);\n      });\n      editor.selection.setCursorLocation();\n      editor.nodeChanged();\n    };\n    var getContent = function (editor) {\n      return editor.getContent({ source_view: true });\n    };\n    var Content = {\n      setContent: setContent,\n      getContent: getContent\n    };\n\n    var open = function (editor) {\n      var editorContent = Content.getContent(editor);\n      editor.windowManager.open({\n        title: 'Source Code',\n        size: 'large',\n        body: {\n          type: 'panel',\n          items: [{\n              type: 'textarea',\n              name: 'code'\n            }]\n        },\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: { code: editorContent },\n        onSubmit: function (api) {\n          Content.setContent(editor, api.getData().code);\n          api.close();\n        }\n      });\n    };\n    var Dialog = { open: open };\n\n    var register = function (editor) {\n      editor.addCommand('mceCodeEditor', function () {\n        Dialog.open(editor);\n      });\n    };\n    var Commands = { register: register };\n\n    var register$1 = function (editor) {\n      editor.ui.registry.addButton('code', {\n        icon: 'sourcecode',\n        tooltip: 'Source code',\n        onAction: function () {\n          return Dialog.open(editor);\n        }\n      });\n      editor.ui.registry.addMenuItem('code', {\n        icon: 'sourcecode',\n        text: 'Source code',\n        onAction: function () {\n          return Dialog.open(editor);\n        }\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    function Plugin () {\n      global.add('code', function (editor) {\n        Commands.register(editor);\n        Buttons.register(editor);\n        return {};\n      });\n    }\n\n    Plugin();\n\n}());\n"]}