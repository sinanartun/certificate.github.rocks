!function(){"use strict";function e(e,t){if(t<0&&(t=0),3===e.nodeType){var n=e.data.length;n<t&&(t=n)}return t}function t(t,n,o){1!==n.nodeType||n.hasChildNodes()?t.setStart(n,e(n,o)):t.setStartBefore(n)}function n(t,n,o){1!==n.nodeType||n.hasChildNodes()?t.setEnd(n,e(n,o)):t.setEndAfter(n)}var o=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=tinymce.util.Tools.resolve("tinymce.Env"),r=function(e,o,i){var r,a,f,s,d,l,c,u,g,h,C=function(e){return e.getParam("autolink_pattern",/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i)}(e),m=function(e){return e.getParam("default_link_target",!1)}(e);if("A"!==e.selection.getNode().tagName){if((r=e.selection.getRng(!0).cloneRange()).startOffset<5){if(!(u=r.endContainer.previousSibling)){if(!r.endContainer.firstChild||!r.endContainer.firstChild.nextSibling)return;u=r.endContainer.firstChild.nextSibling}if(t(r,u,g=u.length),n(r,u,g),r.endOffset<5)return;a=r.endOffset,s=u}else{if(3!==(s=r.endContainer).nodeType&&s.firstChild){for(;3!==s.nodeType&&s.firstChild;)s=s.firstChild;3===s.nodeType&&(t(r,s,0),n(r,s,s.nodeValue.length))}a=1===r.endOffset?2:r.endOffset-1-o}for(f=a;t(r,s,2<=a?a-2:0),n(r,s,1<=a?a-1:0),a-=1," "!==(h=r.toString())&&""!==h&&160!==h.charCodeAt(0)&&0<=a-2&&h!==i;);!function(e,t){return e===i||" "===e||160===e.charCodeAt(0)}(r.toString())?(0===r.startOffset?t(r,s,0):t(r,s,a),n(r,s,f)):(t(r,s,a),n(r,s,f),a+=1),"."===(l=r.toString()).charAt(l.length-1)&&n(r,s,f-1),(c=(l=r.toString().trim()).match(C))&&("www."===c[1]?c[1]="http://www.":/@$/.test(c[1])&&!/^mailto:/.test(c[1])&&(c[1]="mailto:"+c[1]),d=e.selection.getBookmark(),e.selection.setRng(r),e.execCommand("createlink",!1,c[1]+c[2]),!1!==m&&e.dom.setAttrib(e.selection.getNode(),"target",m),e.selection.moveToBookmark(d),e.nodeChanged())}};o.add("autolink",function(e){!function(e){var t;e.on("keydown",function(t){13!==t.keyCode||r(e,-1,"")}),i.browser.isIE()?e.on("focus",function(){if(!t){t=!0;try{e.execCommand("AutoUrlDetect",!1,!0)}catch(e){}}}):(e.on("keypress",function(t){41!==t.keyCode||r(e,-1,"(")}),e.on("keyup",function(t){32!==t.keyCode||r(e,0,"")}))}(e)})}();
//# sourceMappingURL=plugin.min.js.map
