!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=function(e){return e.getParam("autolink_pattern",/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i)},i=function(e){return e.getParam("default_link_target",!1)},o=function(e,t){if(t<0&&(t=0),3===e.nodeType){var n=e.data.length;t>n&&(t=n)}return t},r=function(e,t,n){1!==t.nodeType||t.hasChildNodes()?e.setStart(t,o(t,n)):e.setStartBefore(t)},f=function(e,t,n){1!==t.nodeType||t.hasChildNodes()?e.setEnd(t,o(t,n)):e.setEndAfter(t)},s=function(e,t,o){var s,a,d,l,c,u,g,h,C,m,y=n(e),p=i(e);if("A"!==e.selection.getNode().tagName){if((s=e.selection.getRng(!0).cloneRange()).startOffset<5){if(!(h=s.endContainer.previousSibling)){if(!s.endContainer.firstChild||!s.endContainer.firstChild.nextSibling)return;h=s.endContainer.firstChild.nextSibling}if(C=h.length,r(s,h,C),f(s,h,C),s.endOffset<5)return;a=s.endOffset,l=h}else{if(3!==(l=s.endContainer).nodeType&&l.firstChild){for(;3!==l.nodeType&&l.firstChild;)l=l.firstChild;3===l.nodeType&&(r(s,l,0),f(s,l,l.nodeValue.length))}a=1===s.endOffset?2:s.endOffset-1-t}d=a;do{r(s,l,a>=2?a-2:0),f(s,l,a>=1?a-1:0),a-=1,m=s.toString()}while(" "!==m&&""!==m&&160!==m.charCodeAt(0)&&a-2>=0&&m!==o);!function(e,t){return e===t||" "===e||160===e.charCodeAt(0)}(s.toString(),o)?0===s.startOffset?(r(s,l,0),f(s,l,d)):(r(s,l,a),f(s,l,d)):(r(s,l,a),f(s,l,d),a+=1),"."===(u=s.toString()).charAt(u.length-1)&&f(s,l,d-1),(g=(u=s.toString().trim()).match(y))&&("www."===g[1]?g[1]="http://www.":/@$/.test(g[1])&&!/^mailto:/.test(g[1])&&(g[1]="mailto:"+g[1]),c=e.selection.getBookmark(),e.selection.setRng(s),e.execCommand("createlink",!1,g[1]+g[2]),!1!==p&&e.dom.setAttrib(e.selection.getNode(),"target",p),e.selection.moveToBookmark(c),e.nodeChanged())}},a={setup:function(e){var n;e.on("keydown",function(t){if(13===t.keyCode)return function(e){s(e,-1,"")}(e)}),t.browser.isIE()?e.on("focus",function(){if(!n){n=!0;try{e.execCommand("AutoUrlDetect",!1,!0)}catch(e){}}}):(e.on("keypress",function(t){if(41===t.keyCode)return function(e){s(e,-1,"(")}(e)}),e.on("keyup",function(t){if(32===t.keyCode)return function(e){s(e,0,"")}(e)}))}};e.add("autolink",function(e){a.setup(e)})}();
//# sourceMappingURL=plugin.js.map
