{"version":3,"sources":["imagetools/plugin.min.js"],"names":["v","n","c","t","r","e","get","set","clone","o","tinymce","util","Tools","resolve","i","d","u","a","fold","is","isSome","isNone","getOr","l","getOrThunk","f","getOrDie","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","equals","s","equals_","toArray","toString","Object","freeze","m","p","some","none","from","h","y","document","createElement","g","width","height","w","drawImage","getContext","b","E","O","window","Promise","T","immediateFn","setImmediate","setTimeout","Array","isArray","prototype","call","this","then","N","R","all","arguments","length","slice","constructor","reject","race","TypeError","_state","_value","_deferreds","A","I","S","_","apply","onFulfilled","onRejected","push","x","D","URL","createObjectURL","Image","removeEventListener","type","addEventListener","src","complete","U","split","exec","atob","Math","ceil","min","charCodeAt","Uint8Array","Blob","L","HTMLCanvasElement","toBlob","toDataURL","j","getType","toBase64","toAdjustedBlob","toAdjustedDataURL","toAdjustedBase64","toCanvas","P","FileReader","onloadend","result","readAsDataURL","revokeObjectURL","naturalWidth","naturalHeight","k","M","z","H","q","$","X","W","Y","ue","code","message","G","J","re","ie","te","ae","V","Z","test","style","parseInt","removeAttribute","setAttribute","ee","isPrototypeOf","name","String","reduce","onload","target","readAsText","oe","XMLHttpRequest","onreadystatechange","readyState","status","blob","response","open","withCredentials","setRequestHeader","responseType","send","JSON","parse","ce","se","fe","Content-Type","tiny-api-key","indexOf","encodeURIComponent","K","me","he","ge","toLowerCase","search","ve","pe","ye","dom","childNodes","Je","fromDom","nodeType","Qe","matches","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","we","be","Ee","notificationManager","text","Oe","selection","getNode","Te","nn","inArray","getParam","host","en","onerror","C","Ne","editorUpload","blobCache","getByUri","Ie","Se","clearTimeout","_e","uri","match","encode","create","id","Ze","base64","add","undoManager","transact","on","off","nodeChanged","uploadImagesAuto","setEditorTimeout","attr","blobUri","removeAttr","xe","_scanForImages","Ae","Ce","major","minor","De","Number","replace","de","Ue","Le","current","version","isEdge","isChrome","isIE","isOpera","isFirefox","isSafari","ke","je","Pe","Me","Be","Fe","isWindows","isiOS","isAndroid","isOSX","isLinux","isSolaris","isFreeBSD","ze","$e","Xe","versionRegexes","We","Ge","browsers","oses","Ye","He","qe","browser","os","deviceType","isiPad","isiPhone","isTablet","isPhone","isTouch","isWebView","isDesktop","matchMedia","navigator","userAgent","Ve","fromHtml","innerHTML","hasChildNodes","console","error","fromTag","fromText","createTextNode","fromPoint","elementFromPoint","Ke","Node","ATTRIBUTE_NODE","CDATA_SECTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","ELEMENT_NODE","TEXT_NODE","PROCESSING_INSTRUCTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","NOTATION_NODE","Function","documentBaseURI","tn","translate","rotate","PI","B","rn","scale","F","settings","imagetools_proxy","un","an","cn","fn","ln","dn","mn","url","windowManager","title","size","body","items","label","currentState","buttons","primary","disabled","onSubmit","getData","imagetools","sn","close","onCancel","onAction","value","enable","disable","mceImageRotateLeft","mceImageRotateRight","mceImageFlipVertical","mceImageFlipHorizontal","mceEditImage","addCommand","hn","execCommand","ui","registry","addButton","tooltip","icon","onSetup","setDisabled","addContextMenu","update","vn","addContextToolbar","predicate","position","scope","pn","element","gn"],"mappings":"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","file":"plugin.min.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.0 (2019-10-17)\n */\n!function(v){\"use strict\";function e(){}function n(){return c}var t,r=function(e){function n(){return t}var t=e;return{get:n,set:function(e){t=e},clone:function(){return r(n())}}},o=tinymce.util.Tools.resolve(\"tinymce.PluginManager\"),i=tinymce.util.Tools.resolve(\"tinymce.util.Tools\"),d=function(e){return function(){return e}},u=d(!1),a=d(!0),c=(t={fold:function(e,n){return e()},is:u,isSome:u,isNone:a,getOr:l,getOrThunk:f,getOrDie:function(e){throw new Error(e||\"error: getOrDie called on none.\")},getOrNull:d(null),getOrUndefined:d(undefined),or:l,orThunk:f,map:n,each:e,bind:n,exists:u,forall:a,filter:n,equals:s,equals_:s,toArray:function(){return[]},toString:d(\"none()\")},Object.freeze&&Object.freeze(t),t);function s(e){return e.isNone()}function f(e){return e()}function l(e){return e}var m=function(t){function e(){return o}function n(e){return e(t)}var r=d(t),o={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:a,isNone:u,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return m(e(t))},each:function(e){e(t)},bind:n,exists:n,forall:n,filter:function(e){return e(t)?o:c},toArray:function(){return[t]},toString:function(){return\"some(\"+t+\")\"},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(u,function(e){return n(t,e)})}};return o},p={some:m,none:n,from:function(e){return null===e||e===undefined?c:m(e)}};function h(e,n){return y(v.document.createElement(\"canvas\"),e,n)}function g(e){var n=h(e.width,e.height);return w(n).drawImage(e,0,0),n}function w(e){return e.getContext(\"2d\")}function y(e,n,t){return e.width=n,e.height=t,e}var b,E,O=window.Promise?window.Promise:(b=T.immediateFn||\"function\"==typeof window.setImmediate&&window.setImmediate||function(e){v.setTimeout(e,1)},E=Array.isArray||function(e){return\"[object Array]\"===Object.prototype.toString.call(e)},T.prototype[\"catch\"]=function(e){return this.then(null,e)},T.prototype.then=function(t,r){var o=this;return new T(function(e,n){N.call(o,new R(t,r,e,n))})},T.all=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var c=Array.prototype.slice.call(1===e.length&&E(e[0])?e[0]:e);return new T(function(o,i){if(0===c.length)return o([]);var u=c.length;function a(n,e){try{if(e&&(\"object\"==typeof e||\"function\"==typeof e)){var t=e.then;if(\"function\"==typeof t)return void t.call(e,function(e){a(n,e)},i)}c[n]=e,0==--u&&o(c)}catch(r){i(r)}}for(var e=0;e<c.length;e++)a(e,c[e])})},T.resolve=function(n){return n&&\"object\"==typeof n&&n.constructor===T?n:new T(function(e){e(n)})},T.reject=function(t){return new T(function(e,n){n(t)})},T.race=function(o){return new T(function(e,n){for(var t=0,r=o;t<r.length;t++)r[t].then(e,n)})},T);function T(e){if(\"object\"!=typeof this)throw new TypeError(\"Promises must be constructed via new\");if(\"function\"!=typeof e)throw new TypeError(\"not a function\");this._state=null,this._value=null,this._deferreds=[],A(e,I(S,this),I(_,this))}function I(e,n){return function(){return e.apply(n,arguments)}}function N(r){var o=this;null!==this._state?b(function(){var e=o._state?r.onFulfilled:r.onRejected;if(null!==e){var n;try{n=e(o._value)}catch(t){return void r.reject(t)}r.resolve(n)}else(o._state?r.resolve:r.reject)(o._value)}):this._deferreds.push(r)}function S(e){try{if(e===this)throw new TypeError(\"A promise cannot be resolved with itself.\");if(e&&(\"object\"==typeof e||\"function\"==typeof e)){var n=e.then;if(\"function\"==typeof n)return void A(I(n,e),I(S,this),I(_,this))}this._state=!0,this._value=e,x.call(this)}catch(t){_.call(this,t)}}function _(e){this._state=!1,this._value=e,x.call(this)}function x(){for(var e=0,n=this._deferreds;e<n.length;e++){var t=n[e];N.call(this,t)}this._deferreds=[]}function R(e,n,t,r){this.onFulfilled=\"function\"==typeof e?e:null,this.onRejected=\"function\"==typeof n?n:null,this.resolve=t,this.reject=r}function A(e,n,t){var r=!1;try{e(function(e){r||(r=!0,n(e))},function(e){r||(r=!0,t(e))})}catch(o){if(r)return;r=!0,t(o)}}function C(e){var n=e.src;return 0===n.indexOf(\"data:\")?U(n):function t(r){return new O(function(e,t){var n=new v.XMLHttpRequest;n.open(\"GET\",r,!0),n.responseType=\"blob\",n.onload=function(){200===this.status&&e(this.response)},n.onerror=function(){var e,n=this;t(0===this.status?((e=new Error(\"No access to download image\")).code=18,e.name=\"SecurityError\",e):new Error(\"Error \"+n.status+\" downloading image\"))},n.send()})}(n)}function D(a){return new O(function(e,n){var t=v.URL.createObjectURL(a),r=new v.Image,o=function(){r.removeEventListener(\"load\",i),r.removeEventListener(\"error\",u)};function i(){o(),e(r)}function u(){o(),n(\"Unable to load data of type \"+a.type+\": \"+t)}r.addEventListener(\"load\",i),r.addEventListener(\"error\",u),r.src=t,r.complete&&i()})}function U(t){return new O(function(e,n){(function g(e){var n=e.split(\",\"),t=/data:([^;]+)/.exec(n[0]);if(!t)return p.none();for(var r=t[1],o=n[1],i=v.atob(o),u=i.length,a=Math.ceil(u/1024),c=new Array(a),s=0;s<a;++s){for(var f=1024*s,l=Math.min(1024+f,u),d=new Array(l-f),m=f,h=0;m<l;++h,++m)d[h]=i[m].charCodeAt(0);c[s]=new Uint8Array(d)}return p.some(new v.Blob(c,{type:r}))})(t).fold(function(){n(\"uri is not base64: \"+t)},e)})}function L(e,r,o){return r=r||\"image/png\",v.HTMLCanvasElement.prototype.toBlob?new O(function(n,t){e.toBlob(function(e){e?n(e):t()},r,o)}):U(e.toDataURL(r,o))}function k(e){return D(e).then(function(e){!function t(e){v.URL.revokeObjectURL(e.src)}(e);var n=h(function r(e){return e.naturalWidth||e.width}(e),function o(e){return e.naturalHeight||e.height}(e));return w(n).drawImage(e,0,0),n})}function j(e,n,t){var r=n.type;function o(n,t){return e.then(function(e){return function r(e,n,t){return n=n||\"image/png\",e.toDataURL(n,t)}(e,n,t)})}return{getType:d(r),toBlob:function i(){return O.resolve(n)},toDataURL:function u(){return t},toBase64:function a(){return t.split(\",\")[1]},toAdjustedBlob:function c(n,t){return e.then(function(e){return L(e,n,t)})},toAdjustedDataURL:o,toAdjustedBase64:function s(e,n){return o(e,n).then(function(e){return e.split(\",\")[1]})},toCanvas:function f(){return e.then(g)}}}function P(n){return function e(t){return new O(function(e){var n=new v.FileReader;n.onloadend=function(){e(n.result)},n.readAsDataURL(t)})}(n).then(function(e){return j(k(n),n,e)})}function M(n,e){return L(n,e).then(function(e){return j(O.resolve(n),e,n.toDataURL())})}function B(n,t){return n.toCanvas().then(function(e){return function a(e,n,t){var r=h(e.width,e.height),o=w(r),i=0,u=0;90!==(t=t<0?360+t:t)&&270!==t||y(r,r.height,r.width);90!==t&&180!==t||(i=r.width);270!==t&&180!==t||(u=r.height);return o.translate(i,u),o.rotate(t*Math.PI/180),o.drawImage(e,0,0),M(r,n)}(e,n.getType(),t)})}function F(n,t){return n.toCanvas().then(function(e){return function i(e,n,t){var r=h(e.width,e.height),o=w(r);\"v\"===t?(o.scale(1,-1),o.drawImage(e,0,-r.height)):(o.scale(-1,1),o.drawImage(e,-r.width,0));return M(r,n)}(e,n.getType(),t)})}function z(e){return P(e)}var H=tinymce.util.Tools.resolve(\"tinymce.util.Delay\"),q=tinymce.util.Tools.resolve(\"tinymce.util.Promise\"),$=tinymce.util.Tools.resolve(\"tinymce.util.URI\");function X(e,n){for(var t=0,r=e.length;t<r;t++){var o=e[t];if(n(o,t))return p.some(o)}return p.none()}function W(e){return null!==e&&e!==undefined}function G(n){return\"ImageProxy HTTP error: \"+X(ue,function(e){return n===e.code}).fold(d(\"Unknown ImageProxy error\"),function(e){return e.message})}function Y(e){var n=G(e);return q.reject(n)}function V(n){return X(ae,function(e){return e.type===n}).fold(d(\"Unknown service error\"),function(e){return e.message})}function J(e,n){return re(n).then(function(e){var n=function(e){var n=ie(e),t=te(n,[\"error\",\"type\"]);return\"ImageProxy Service error: \"+(t?V(t):\"Invalid JSON in service error message\")}(e);return q.reject(n)})}function K(e,n){var t={\"Content-Type\":\"application/json;charset=UTF-8\",\"tiny-api-key\":n};return oe(function(e,n){var t=-1===e.indexOf(\"?\")?\"?\":\"&\";return/[?&]apiKey=/.test(e)||!n?e:e+t+\"apiKey=\"+encodeURIComponent(n)}(e,n),t,!1).then(function(e){return e.status<200||300<=e.status?ce(e.status,e.blob):q.resolve(e.blob)})}var Q,Z={getImageSize:function wn(e){var n,t;function r(e){return/^[0-9\\.]+px$/.test(e)}return n=e.style.width,t=e.style.height,n||t?r(n)&&r(t)?{w:parseInt(n,10),h:parseInt(t,10)}:null:(n=e.width,t=e.height,n&&t?{w:parseInt(n,10),h:parseInt(t,10)}:null)},setImageSize:function yn(e,n){var t,r;n&&(t=e.style.width,r=e.style.height,(t||r)&&(e.style.width=n.w+\"px\",e.style.height=n.h+\"px\",e.removeAttribute(\"data-mce-style\")),t=e.width,r=e.height,(t||r)&&(e.setAttribute(\"width\",n.w),e.setAttribute(\"height\",n.h)))},getNaturalImageSize:function bn(e){return{w:e.naturalWidth,h:e.naturalHeight}}},ee=(Q=\"function\",function(e){return function(e){if(null===e)return\"null\";var n=typeof e;return\"object\"==n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&\"Array\"===e.constructor.name)?\"array\":\"object\"==n&&(String.prototype.isPrototypeOf(e)||e.constructor&&\"String\"===e.constructor.name)?\"string\":n}(e)===Q}),ne=Array.prototype.slice,te=(ee(Array.from)&&Array.from,function(e,n){var t;return t=n.reduce(function(e,n){return W(e)?e[n]:undefined},e),W(t)?t:null}),re=function(n){return new q(function(t){var e=new v.FileReader;e.onload=function(e){var n=e.target;t(n.result)},e.readAsText(n)})},oe=function(n,r,o){return new q(function(e){var t;(t=new v.XMLHttpRequest).onreadystatechange=function(){4===t.readyState&&e({status:t.status,blob:this.response})},t.open(\"GET\",n,!0),t.withCredentials=o,i.each(r,function(e,n){t.setRequestHeader(n,e)}),t.responseType=\"blob\",t.send()})},ie=function(e){var n;try{n=JSON.parse(e)}catch(t){}return n},ue=[{code:404,message:\"Could not find Image Proxy\"},{code:403,message:\"Rejected request\"},{code:0,message:\"Incorrect Image Proxy URL\"}],ae=[{type:\"key_missing\",message:\"The request did not include an api key.\"},{type:\"key_not_found\",message:\"The provided api key could not be found.\"},{type:\"domain_not_trusted\",message:\"The api key is not valid for the request origins.\"}],ce=function(e,n){return function(e){return 400===e||403===e||500===e}(e)?J(0,n):Y(e)},se=Y;function fe(e,n,t){return n?K(e,n):function r(e,n){return oe(e,{},n).then(function(e){return e.status<200||300<=e.status?se(e.status):q.resolve(e.blob)})}(e,t)}function le(e,n,t){return 0!=(e.compareDocumentPosition(n)&t)}function de(e,n){var t=function(e,n){for(var t=0;t<e.length;t++){var r=e[t];if(r.test(n))return r}return undefined}(e,n);if(!t)return{major:0,minor:0};function r(e){return Number(n.replace(t,\"$\"+e))}return Ce(r(1),r(2))}function me(e,n){return function(){return n===e}}function he(e,n){return function(){return n===e}}function ge(e,n){var t=String(n).toLowerCase();return X(e,function(e){return e.search(t)})}function ve(e,n){return-1!==e.indexOf(n)}function pe(n){return function(e){return ve(e,n)}}function we(e,n){return function(e,n){return X(e.dom().childNodes,function(e){return n(Je.fromDom(e))}).map(Je.fromDom)}(e,function(e){return function(e,n){var t=e.dom();if(t.nodeType!==Qe)return!1;var r=t;if(r.matches!==undefined)return r.matches(n);if(r.msMatchesSelector!==undefined)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==undefined)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==undefined)return r.mozMatchesSelector(n);throw new Error(\"Browser lacks native selectors\")}(e,n)})}function ye(e){return we(Je.fromDom(e),\"img\")}function be(e,n){return e.dom.is(n,\"figure\")}function Ee(e,n){e.notificationManager.open({text:n,type:\"error\"})}function Oe(e){var n=e.selection.getNode();return be(e,n)?ye(n):p.some(Je.fromDom(n))}function Te(e,n){var t,r=n.src;return nn(e,n)?fe(n.src,null,function(e,n){return-1!==i.inArray(function(e){return e.getParam(\"imagetools_credentials_hosts\",[],\"string[]\")}(e),new $(n.src).host)}(e,n)):en(e,n)?function(e){return C(e)}(n):(r=function(e){return e.getParam(\"imagetools_proxy\")}(e),r+=(-1===r.indexOf(\"?\")?\"?\":\"&\")+\"url=\"+encodeURIComponent(n.src),t=function(e){return e.getParam(\"api_key\",e.getParam(\"imagetools_api_key\",\"\",\"string\"),\"string\")}(e),fe(r,t,!1))}function Ie(e,n){return function(e){return p.from(e.getParam(\"imagetools_fetch_image\",null,\"function\"))}(e).fold(function(){return Te(e,n)},function(e){return e(n)})}function Ne(e,n){var t;return(t=e.editorUpload.blobCache.getByUri(n.src))?q.resolve(t.blob()):Ie(e,n)}function Se(e){H.clearTimeout(e.get())}function _e(i,u,a,c,s,f){return u.toBlob().then(function(e){var n,t,r,o;return r=i.editorUpload.blobCache,n=s.src,function(e){return e.getParam(\"images_reuse_filename\",!1,\"boolean\")}(i)&&(t=(o=r.getByUri(n))?(n=o.uri(),o.name()):function(e,n){var t=n.match(/\\/([^\\/\\?]+)?\\.(?:jpeg|jpg|png|gif)(?:\\?|$)/i);return t?e.dom.encode(t[1]):null}(i,n)),o=r.create({id:\"imagetools\"+Ze++,blob:e,base64:u.toBase64(),uri:n,name:t}),r.add(o),i.undoManager.transact(function(){i.$(s).on(\"load\",function e(){i.$(s).off(\"load\",e),i.nodeChanged(),a?i.editorUpload.uploadImagesAuto():(Se(c),function(e,n){var t=H.setEditorTimeout(e,function(){e.editorUpload.uploadImagesAuto()},function(e){return e.getParam(\"images_upload_timeout\",3e4,\"number\")}(e));n.set(t)}(i,c))}),f&&i.$(s).attr({width:f.w,height:f.h}),i.$(s).attr({src:o.blobUri()}).removeAttr(\"data-mce-src\")}),o})}function xe(t,r,e,o){return function(){return Oe(t).fold(function(){Ee(t,\"Could not find selected image\")},function(n){return t._scanForImages().then(function(){return Ne(t,n.dom())}).then(z).then(e).then(function(e){return _e(t,e,!1,r,n.dom(),o)},function(e){Ee(t,e)})})}}var Re=function(e,n){return le(e,n,v.Node.DOCUMENT_POSITION_CONTAINED_BY)},Ae=function(){return Ce(0,0)},Ce=function(e,n){return{major:e,minor:n}},De={nu:Ce,detect:function(e,n){var t=String(n).toLowerCase();return 0===e.length?Ae():de(e,t)},unknown:Ae},Ue=\"Firefox\",Le=function(e){var n=e.current;return{current:n,version:e.version,isEdge:me(\"Edge\",n),isChrome:me(\"Chrome\",n),isIE:me(\"IE\",n),isOpera:me(\"Opera\",n),isFirefox:me(Ue,n),isSafari:me(\"Safari\",n)}},ke={unknown:function(){return Le({current:undefined,version:De.unknown()})},nu:Le,edge:d(\"Edge\"),chrome:d(\"Chrome\"),ie:d(\"IE\"),opera:d(\"Opera\"),firefox:d(Ue),safari:d(\"Safari\")},je=\"Windows\",Pe=\"Android\",Me=\"Solaris\",Be=\"FreeBSD\",Fe=function(e){var n=e.current;return{current:n,version:e.version,isWindows:he(je,n),isiOS:he(\"iOS\",n),isAndroid:he(Pe,n),isOSX:he(\"OSX\",n),isLinux:he(\"Linux\",n),isSolaris:he(Me,n),isFreeBSD:he(Be,n)}},ze={unknown:function(){return Fe({current:undefined,version:De.unknown()})},nu:Fe,windows:d(je),ios:d(\"iOS\"),android:d(Pe),linux:d(\"Linux\"),osx:d(\"OSX\"),solaris:d(Me),freebsd:d(Be)},He=function(e,t){return ge(e,t).map(function(e){var n=De.detect(e.versionRegexes,t);return{current:e.name,version:n}})},qe=function(e,t){return ge(e,t).map(function(e){var n=De.detect(e.versionRegexes,t);return{current:e.name,version:n}})},$e=/.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,Xe=[{name:\"Edge\",versionRegexes:[/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],search:function(e){return ve(e,\"edge/\")&&ve(e,\"chrome\")&&ve(e,\"safari\")&&ve(e,\"applewebkit\")}},{name:\"Chrome\",versionRegexes:[/.*?chrome\\/([0-9]+)\\.([0-9]+).*/,$e],search:function(e){return ve(e,\"chrome\")&&!ve(e,\"chromeframe\")}},{name:\"IE\",versionRegexes:[/.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,/.*?rv:([0-9]+)\\.([0-9]+).*/],search:function(e){return ve(e,\"msie\")||ve(e,\"trident\")}},{name:\"Opera\",versionRegexes:[$e,/.*?opera\\/([0-9]+)\\.([0-9]+).*/],search:pe(\"opera\")},{name:\"Firefox\",versionRegexes:[/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],search:pe(\"firefox\")},{name:\"Safari\",versionRegexes:[$e,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(ve(e,\"safari\")||ve(e,\"mobile/\"))&&ve(e,\"applewebkit\")}}],We=[{name:\"Windows\",search:pe(\"win\"),versionRegexes:[/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]},{name:\"iOS\",search:function(e){return ve(e,\"iphone\")||ve(e,\"ipad\")},versionRegexes:[/.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:\"Android\",search:pe(\"android\"),versionRegexes:[/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]},{name:\"OSX\",search:pe(\"os x\"),versionRegexes:[/.*?os\\ x\\ ?([0-9]+)_([0-9]+).*/]},{name:\"Linux\",search:pe(\"linux\"),versionRegexes:[]},{name:\"Solaris\",search:pe(\"sunos\"),versionRegexes:[]},{name:\"FreeBSD\",search:pe(\"freebsd\"),versionRegexes:[]}],Ge={browsers:d(Xe),oses:d(We)},Ye=r(function(e,n){var t=Ge.browsers(),r=Ge.oses(),o=He(t,e).fold(ke.unknown,ke.nu),i=qe(r,e).fold(ze.unknown,ze.nu);return{browser:o,os:i,deviceType:function(e,n,t,r){var o=e.isiOS()&&!0===/ipad/i.test(t),i=e.isiOS()&&!o,u=e.isiOS()||e.isAndroid(),a=u||r(\"(pointer:coarse)\"),c=o||!i&&u&&r(\"(min-device-width:768px)\"),s=i||u&&!c,f=n.isSafari()&&e.isiOS()&&!1===/safari/i.test(t),l=!s&&!c&&!f;return{isiPad:d(o),isiPhone:d(i),isTablet:d(c),isPhone:d(s),isTouch:d(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:d(f),isDesktop:d(l)}}(i,o,e,n)}}(v.navigator.userAgent,function(e){return v.window.matchMedia(e).matches})),Ve=function(e){if(null===e||e===undefined)throw new Error(\"Node cannot be null or undefined\");return{dom:d(e)}},Je={fromHtml:function(e,n){var t=(n||v.document).createElement(\"div\");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw v.console.error(\"HTML does not have a single root node\",e),new Error(\"HTML must have a single root node\");return Ve(t.childNodes[0])},fromTag:function(e,n){var t=(n||v.document).createElement(e);return Ve(t)},fromText:function(e,n){var t=(n||v.document).createTextNode(e);return Ve(t)},fromDom:Ve,fromPoint:function(e,n,t){var r=e.dom();return p.from(r.elementFromPoint(n,t)).map(Ve)}},Ke=(v.Node.ATTRIBUTE_NODE,v.Node.CDATA_SECTION_NODE,v.Node.COMMENT_NODE,v.Node.DOCUMENT_NODE,v.Node.DOCUMENT_TYPE_NODE,v.Node.DOCUMENT_FRAGMENT_NODE,v.Node.ELEMENT_NODE),Qe=(v.Node.TEXT_NODE,v.Node.PROCESSING_INSTRUCTION_NODE,v.Node.ENTITY_REFERENCE_NODE,v.Node.ENTITY_NODE,v.Node.NOTATION_NODE,Ke),Ze=(Ye.get().browser.isIE(),\"undefined\"!=typeof v.window?v.window:Function(\"return this;\")(),0),en=function(e,n){var t=n.src;return 0===t.indexOf(\"data:\")||0===t.indexOf(\"blob:\")||new $(t).host===e.documentBaseURI.host},nn=function(e,n){return-1!==i.inArray(function(e){return e.getParam(\"imagetools_cors_hosts\",[],\"string[]\")}(e),new $(n.src).host)},tn=function(n,t,r){return function(){var e=Oe(n).fold(function(){return null},function(e){var n=Z.getImageSize(e.dom());return n?{w:n.h,h:n.w}:null});return xe(n,t,function(e){return function(e,n){return B(e,n)}(e,r)},e)()}},rn=function(e,n,t){return function(){return xe(e,n,function(e){return function(e,n){return F(e,n)}(e,t)})()}},on=function(n,e){function t(e){return function(e){return n.dom.is(e,\"img:not([data-mce-object],[data-mce-placeholder])\")}(e)&&(en(n,e)||nn(n,e)||n.settings.imagetools_proxy)}return be(n,e)?ye(e).map(function(e){return t(e.dom())?p.some(e.dom()):p.none()}):t(e)?p.some(e):p.none()},un=Se,an=Ne,cn=Oe,sn=function(n,t,r,o,i){return new q(function(e){(function(e){return D(e)})(i).then(function(e){var n=Z.getNaturalImageSize(e);return o.w===n.w&&o.h===n.h||Z.getImageSize(r)&&Z.setImageSize(r,n),v.URL.revokeObjectURL(e.src),i}).then(z).then(function(e){return _e(n,e,!0,t,r)},function(){})})},fn=d(\"save-state\"),ln=d(\"disable\"),dn=d(\"enable\"),mn=function(i,u){return function(){var r=cn(i),o=r.map(function(e){return Z.getNaturalImageSize(e.dom())});cn(i).each(function(n){on(i,n.dom()).each(function(e){an(i,n.dom()).then(function(e){var n=function(e){return{blob:e,url:v.URL.createObjectURL(e)}}(e);i.windowManager.open(function(e){return{title:\"Edit Image\",size:\"large\",body:{type:\"panel\",items:[{type:\"imagetools\",name:\"imagetools\",label:\"Edit Image\",currentState:e}]},buttons:[{type:\"cancel\",name:\"cancel\",text:\"Cancel\"},{type:\"submit\",name:\"save\",text:\"Save\",primary:!0,disabled:!0}],onSubmit:function(e){var t=e.getData().imagetools.blob;r.each(function(n){o.each(function(e){sn(i,u,n.dom(),e,t)})}),e.close()},onCancel:function(){},onAction:function(e,n){switch(n.name){case fn():n.value?e.enable(\"save\"):e.disable(\"save\");break;case ln():e.disable(\"save\"),e.disable(\"cancel\");break;case dn():e.enable(\"cancel\")}}}}(n))})})})}},hn=function(t,e){i.each({mceImageRotateLeft:tn(t,e,-90),mceImageRotateRight:tn(t,e,90),mceImageFlipVertical:rn(t,e,\"v\"),mceImageFlipHorizontal:rn(t,e,\"h\"),mceEditImage:mn(t,e)},function(e,n){t.addCommand(n,e)})},gn=function(t,r,o){t.on(\"NodeChange\",function(e){var n=o.get();n&&n.src!==e.element.src&&(un(r),t.editorUpload.uploadImagesAuto(),o.set(null)),on(t,e.element).each(o.set)})},vn=function(r){function n(e){return function(){return r.execCommand(e)}}r.ui.registry.addButton(\"rotateleft\",{tooltip:\"Rotate counterclockwise\",icon:\"rotate-left\",onAction:n(\"mceImageRotateLeft\")}),r.ui.registry.addButton(\"rotateright\",{tooltip:\"Rotate clockwise\",icon:\"rotate-right\",onAction:n(\"mceImageRotateRight\")}),r.ui.registry.addButton(\"flipv\",{tooltip:\"Flip vertically\",icon:\"flip-vertically\",onAction:n(\"mceImageFlipVertical\")}),r.ui.registry.addButton(\"fliph\",{tooltip:\"Flip horizontally\",icon:\"flip-horizontally\",onAction:n(\"mceImageFlipHorizontal\")}),r.ui.registry.addButton(\"editimage\",{tooltip:\"Edit image\",icon:\"edit-image\",onAction:n(\"mceEditImage\"),onSetup:function(t){function e(){cn(r).each(function(e){var n=on(r,e.dom()).isNone();t.setDisabled(n)})}return r.on(\"NodeChange\",e),function(){r.off(\"NodeChange\",e)}}}),r.ui.registry.addButton(\"imageoptions\",{tooltip:\"Image options\",icon:\"image-options\",onAction:n(\"mceImage\")}),r.ui.registry.addContextMenu(\"imagetools\",{update:function(e){return on(r,e).fold(function(){return[]},function(e){return[{text:\"Edit image\",icon:\"edit-image\",onAction:n(\"mceEditImage\")}]})}})},pn=function(n){n.ui.registry.addContextToolbar(\"imagetools\",{items:function(e){return e.getParam(\"imagetools_toolbar\",\"rotateleft rotateright flipv fliph editimage imageoptions\")}(n),predicate:function(e){return on(n,e).isSome()},position:\"node\",scope:\"node\"})};!function En(){o.add(\"imagetools\",function(e){var n=r(0),t=r(null);hn(e,n),vn(e),pn(e),gn(e,n,t)})}()}(window);"]}