!function(e){"use strict";function t(e){return function(){return e}}function n(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,t)}}function r(){return a}var o,i=tinymce.util.Tools.resolve("tinymce.PluginManager"),u=t(!1),s=t(!0),a=(o={fold:function(e,t){return e()},is:u,isSome:u,isNone:s,getOr:l,getOrThunk:f,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:t(null),getOrUndefined:t(void 0),or:l,orThunk:f,map:r,each:function(){},bind:r,exists:u,forall:s,filter:r,equals:c,equals_:c,toArray:function(){return[]},toString:t("none()")},Object.freeze&&Object.freeze(o),o);function c(e){return e.isNone()}function f(e){return e()}function l(e){return e}function d(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(t)===e}}function m(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r}function g(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function p(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n}function v(e,t,n){return g(e,function(e){n=t(n,e)}),n}function h(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o,n))return De.some(o)}return De.none()}function N(e,t){return function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Ae(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);_e.apply(t,e[n])}return t}(m(e,t))}function y(e){return 0===e.length?De.none():De.some(e[0])}function S(e){return 0===e.length?De.none():De.some(e[e.length-1])}function O(e,t){return function(){return t===e}}function C(e,t){return function(){return t===e}}function b(e,t){var n=String(t).toLowerCase();return h(e,function(e){return e.search(n)})}function L(e,t){return-1!==e.indexOf(t)}function T(e){return function(t){return L(t,e)}}function E(e,t){return e.dom()===t.dom()}function D(e,t,n){return e.isSome()&&t.isSome()?De.some(n(e.getOrDie(),t.getOrDie())):De.none()}function w(e){return De.from(e.dom().parentNode).map(ot.fromDom)}function A(e){return m(e.dom().childNodes,ot.fromDom)}function k(e,t){var n=e.dom().childNodes;return De.from(n[t]).map(ot.fromDom)}function x(e){return k(e,0)}function R(e){return k(e,e.dom().childNodes.length-1)}function I(e,t){w(e).each(function(n){n.dom().insertBefore(t.dom(),e.dom())})}function _(e,t){e.dom().appendChild(t.dom())}function B(e,t){g(t,function(t){_(e,t)})}function P(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)}function M(e,t,n){return e.fire("ListMutation",{action:t,element:n})}function U(e,t){return function(e,t){for(var n=null!=t?t:mt,r=0;r<e.length&&null!=n;++r)n=n[e[r]];return n}(e.split("."),t)}function F(e){return e&&"BR"===e.nodeName}function j(e){var t=e.selection.getStart(!0);return e.dom.getParent(t,"OL,UL,DL",kt(e,t))}function H(e){var t=e.selection.getSelectedBlocks();return vt.grep(function(e,t){var n=vt.map(t,function(t){return e.dom.getParent(t,"li,dd,dt",kt(e,t))||t});return pt.unique(n)}(e,t),function(e){return Ot(e)})}function $(e,t){return S(e.dom.getParents(t,"ol,ul",kt(e,t)))}function q(e,t){var n,r,o,i,u=e.dom,s=e.schema.getBlockElements(),a=u.createFragment();if(e.settings.forced_root_block&&(o=e.settings.forced_root_block),o&&((r=u.create(o)).tagName===e.settings.forced_root_block&&u.setAttribs(r,e.settings.forced_root_block_attrs),Et(t.firstChild,s)||a.appendChild(r)),t)for(;n=t.firstChild;){var c=n.nodeName;i||"SPAN"===c&&"bookmark"===n.getAttribute("data-mce-type")||(i=!0),Et(n,s)?(a.appendChild(n),r=null):o?(r||(r=u.create(o),a.appendChild(r)),r.appendChild(n)):a.appendChild(n)}return e.settings.forced_root_block?i||r.appendChild(u.create("br",{"data-mce-bogus":"1"})):a.appendChild(u.create("br")),a}function W(e){return e.dom().nodeName.toLowerCase()}function V(t,n){var r=t.dom();!function(e,t){for(var n=dt(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}}(n,function(t,n){!function(t,n,r){if(!(we(r)||ke(r)||Re(r)))throw e.console.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(n,r+"")}(r,n,t)})}function z(e){return v(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})}function K(t,n,r){if(!we(r))throw e.console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",t),new Error("CSS value must be a string: "+r);!function(e){return void 0!==e.style&&xe(e.style.getPropertyValue)}(t)||t.style.setProperty(n,r)}function X(e){return function(e,t){return ot.fromDom(e.dom().cloneNode(!0))}(e)}function Q(e,t){var n=function(e,t){var n=ot.fromTag(t);return V(n,z(e)),n}(e,t);return I(e,n),B(n,A(e)),P(e),n}function Y(e,t){_(e.item,t.list)}function G(e){return at(e,"OL,UL")}function J(e){return x(e).map(G).getOr(!1)}function Z(e){return 0<e.depth}function ee(e){return e.isSelected}function te(e){var t=A(e);return m(function(e){return R(e).map(G).getOr(!1)}(e)?t.slice(0,-1):t,X)}function ne(t,n){return m(n,function(n){var r=function(t,n){var r=e.document.createDocumentFragment();return g(t,function(e){r.appendChild(e.dom())}),ot.fromDom(r)}(n.content);return ot.fromDom(q(t,r.dom()))})}function re(e,t){return g(n=t,function(e,t){(function(e,t){for(var n=e[t].depth,r=t-1;0<=r;r--){if(e[r].depth===n)return De.some(e[r]);if(e[r].depth<n)break}return De.none()})(n,t).each(function(t){!function(e,t){e.listType=t.listType,e.listAttributes=_t({},t.listAttributes)}(e,t)})}),function(e,t){var n=v(t,function(t,n){return n.depth>t.length?function(e,t,n){var r=function(e,t,n){for(var r,o,i,u=[],s=0;s<n;s++)u.push((r=e,o=t.listType,_((i={list:ot.fromTag(o,r),item:ot.fromTag("li",r)}).list,i.item),i));return u}(e,n,n.depth-t.length);return function(e){for(var t=1;t<e.length;t++)Y(e[t-1],e[t])}(r),function(e,t){for(var n=0;n<e.length-1;n++)K(e[n].item.dom(),"list-style-type","none");S(e).each(function(e){V(e.list,t.listAttributes),V(e.item,t.itemAttributes),B(e.item,t.content)})}(r,n),function(e,t){D(S(e),y(t),Y)}(t,r),t.concat(r)}(e,t,n):function(e,t,n){var r=t.slice(0,n.depth);return S(r).each(function(t){!function(e,t){_(e.list,t),e.item=t}(t,function(e,t,n){var r=ot.fromTag("li",e);return V(r,t),B(r,n),r}(e,n.itemAttributes,n.content)),function(e,t){W(e.list)!==t.listType&&(e.list=Q(e.list,t.listType)),V(e.list,t.listAttributes)}(t,n)}),r}(e,t,n)},[]);return y(n).map(function(e){return e.list})}(e.contentDocument,t).toArray();var n}function oe(e){var t=m(xt.getSelectedListItems(e),ot.fromDom);return D(h(t,n(J)),h(function(e){var t=Ie.call(e,0);return t.reverse(),t}(t),n(J)),function(e,t){return{start:e,end:t}})}function ie(e){at(e,"dt")&&Q(e,"dd")}function ue(e,t){if(ht(e))return{container:e,offset:t};var n=ct.getNode(e,t);return ht(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&ht(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&ht(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}}function se(e,t){var n=m(xt.getSelectedListRoots(e),ot.fromDom),r=m(xt.getSelectedDlItems(e),ot.fromDom),o=!1;if(n.length||r.length){var i=e.selection.getBookmark();(function(e,t,n){g(function(e,t){var n=Pe(!1);return m(e,function(e){return{sourceList:e,entries:Bt(0,t,n,e)}})}(t,oe(e)),function(t){!function(e,t){g(p(e,ee),function(e){return function(e,t){switch(e){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}}(t,e)})}(t.entries,n);var r=function(e,t){return N(function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,u=e.length;i<u;i++){var s=e[i],a=t(s);a!==n&&(r.push(o),o=[]),n=a,o.push(s)}return 0!==o.length&&r.push(o),r}(t,Z),function(t){return y(t).map(Z).getOr(!1)?re(e,t):ne(e,t)})}(e,t.entries);g(r,function(t){M(e,"Indent"===n?"IndentList":"OutdentList",t.dom())}),function(e,t){g(t,function(t){I(e,t)})}(t.sourceList,r),P(t.sourceList)})})(e,n,t),function(e,t,n){g(n,"Indent"===t?ie:function(t){return function(e,t){at(t,"dd")?Q(t,"dt"):at(t,"dt")&&w(t).each(function(n){return Ut(e,n.dom(),t.dom())})}(e,t)})}(e,t,r),e.selection.moveToBookmark(i),e.selection.setRng(Ft(e.selection.getRng())),e.nodeChanged(),o=!0}return o}function ae(e){return se(e,"Indent")}function ce(e){return se(e,"Outdent")}function fe(e){return se(e,"Flatten")}function le(e){return/\btox\-/.test(e.className)}function de(e){switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}}function me(e,t){vt.each(t,function(t,n){e.setAttribute(n,t)})}function ge(e,t,n){!function(e,t,n){var r=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",r)}(e,t,n),function(e,t,n){me(t,n["list-attributes"]),vt.each(e.select("li",t),function(e){me(e,n["list-item-attributes"])})}(e,t,n)}function pe(e,t,n,r){var o,i;for(o=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],1===o.nodeType&&(o=o.childNodes[Math.min(i,o.childNodes.length-1)]||o),!n&&bt(o.nextSibling)&&(o=o.nextSibling);o.parentNode!==r;){if(Tt(e,o))return o;if(/^(TD|TH)$/.test(o.parentNode.nodeName))return o;o=o.parentNode}return o}function ve(e,t,n){return function(e,t){return e&&t&&Nt(e)&&e.nodeName===t.nodeName}(t,n)&&function(e,t,n){return e.getStyle(t,"list-style-type",!0)===e.getStyle(n,"list-style-type",!0)}(e,t,n)&&function(e,t){return e.className===t.className}(t,n)}function he(e,t,n,r){var o=t.startContainer,i=t.startOffset;if(ht(o)&&(n?i<o.data.length:0<i))return o;var u=e.schema.getNonEmptyElements();1===o.nodeType&&(o=ct.getNode(o,i));var s=new ft(o,r);for(n&&Dt(e.dom,o)&&s.next();o=s[n?"next":"prev2"]();){if("LI"===o.nodeName&&!o.hasChildNodes())return o;if(u[o.nodeName])return o;if(ht(o)&&0<o.data.length)return o}}function Ne(e,t){var n=t.childNodes;return 1===n.length&&!Nt(n[0])&&e.isBlock(n[0])}function ye(e,t,n){var r,o,i=t.parentNode;if(At(e,t)&&At(e,n)){Nt(n.lastChild)&&(o=n.lastChild),i===n.lastChild&&bt(i.previousSibling)&&e.remove(i.previousSibling),(r=n.lastChild)&&bt(r)&&t.hasChildNodes()&&e.remove(r),wt(e,n,!0)&&e.$(n).empty(),function(e,t,n){var r,o;if(o=Ne(e,n)?n.firstChild:n,function(e,t){Ne(e,t)&&e.remove(t.firstChild,!0)}(e,t),!wt(e,t,!0))for(;r=t.firstChild;)o.appendChild(r)}(e,t,n),o&&n.appendChild(o);var u=st(ot.fromDom(n),ot.fromDom(t))?e.getParents(t,Nt,n):[];e.remove(t),g(u,function(t){wt(e,t)&&t!==e.getRoot()&&e.remove(t)})}}function Se(e,t){var n=e.dom,r=e.selection,o=r.getStart(),i=xt.getClosestListRootElm(e,o),u=n.getParent(r.getStart(),"LI",i);if(u){var s=u.parentNode;if(s===e.getBody()&&wt(n,s))return!0;var a=Ft(r.getRng()),c=n.getParent(he(e,a,t,i),"LI",i);if(c&&c!==u)return e.undoManager.transact(function(){t?function(e,t,n,r){var o=e.dom;if(o.isEmpty(r))!function(e,t,n){e.dom.$(n).empty(),ye(e.dom,t,n),e.selection.setCursorLocation(n)}(e,n,r);else{var i=$t(t);ye(o,n,r),e.selection.setRng(qt(i))}}(e,a,c,u):Lt(u)?ce(e):function(e,t,n,r){var o=$t(a);ye(e.dom,n,r);var i=qt(o);e.selection.setRng(i)}(e,0,u,c)}),!0;if(!c&&!t&&0===a.startOffset&&0===a.endOffset)return e.undoManager.transact(function(){fe(e)}),!0}return!1}function Oe(e,t){return e.selection.isCollapsed()?function(e,t){return Se(e,t)||function(e,t){var n=e.dom,r=e.selection.getStart(),o=xt.getClosestListRootElm(e,r),i=n.getParent(r,n.isBlock,o);if(i&&n.isEmpty(i)){var u=Ft(e.selection.getRng()),s=n.getParent(he(e,u,t,o),"LI",o);if(s)return e.undoManager.transact(function(){!function(e,t,n){var r=e.getParent(t.parentNode,e.isBlock,n);e.remove(t),r&&e.isEmpty(r)&&e.remove(r)}(n,i,o),zt.mergeWithAdjacentLists(n,s.parentNode),e.selection.select(s,!0),e.selection.collapse(t)}),!0}return!1}(e,t)}(e,t):function(e){var t=e.selection.getStart(),n=xt.getClosestListRootElm(e,t);return!!(e.dom.getParent(t,"LI,DT,DD",n)||0<xt.getSelectedListItems(e).length)&&(e.undoManager.transact(function(){e.execCommand("Delete"),Xt(e.dom,e.getBody())}),!0)}(e)}function Ce(e,t){return function(){var n=e.dom.getParent(e.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===t}}function be(e,t){return function(n){function r(e){var r=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}(e.parents,Ct),o=-1!==r?e.parents.slice(0,r):e.parents,i=vt.grep(o,Nt);n.setActive(0<i.length&&i[0].nodeName===t&&!le(i[0]))}return e.on("NodeChange",r),function(){return e.off("NodeChange",r)}}}var Le,Te,Ee=function(e){function n(){return i}function r(t){return t(e)}var o=t(e),i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:s,isNone:u,getOr:o,getOrThunk:o,getOrDie:o,getOrNull:o,getOrUndefined:o,or:n,orThunk:n,map:function(t){return Ee(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?i:a},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(u,function(t){return n(e,t)})}};return i},De={some:Ee,none:r,from:function(e){return null==e?a:Ee(e)}},we=d("string"),Ae=d("array"),ke=d("boolean"),xe=d("function"),Re=d("number"),Ie=Array.prototype.slice,_e=Array.prototype.push,Be=(xe(Array.from)&&Array.from,function(t,n){return function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)}(t,n,e.Node.DOCUMENT_POSITION_CONTAINED_BY)}),Pe=function(e){function t(){return n}var n=e;return{get:t,set:function(e){n=e},clone:function(){return Pe(t())}}},Me=function(){return Ue(0,0)},Ue=function(e,t){return{major:e,minor:t}},Fe=function(e,t){var n=String(t).toLowerCase();return 0===e.length?Me():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,t);if(!n)return{major:0,minor:0};function r(e){return Number(t.replace(n,"$"+e))}return Ue(r(1),r(2))}(e,n)},je=Me,He="Firefox",$e=function(e){var t=e.current;return{current:t,version:e.version,isEdge:O("Edge",t),isChrome:O("Chrome",t),isIE:O("IE",t),isOpera:O("Opera",t),isFirefox:O(He,t),isSafari:O("Safari",t)}},qe=function(){return $e({current:void 0,version:je()})},We=$e,Ve=(t("Edge"),t("Chrome"),t("IE"),t("Opera"),t(He),t("Safari"),"Windows"),ze="Android",Ke="Solaris",Xe="FreeBSD",Qe=function(e){var t=e.current;return{current:t,version:e.version,isWindows:C(Ve,t),isiOS:C("iOS",t),isAndroid:C(ze,t),isOSX:C("OSX",t),isLinux:C("Linux",t),isSolaris:C(Ke,t),isFreeBSD:C(Xe,t)}},Ye=function(){return Qe({current:void 0,version:je()})},Ge=Qe,Je=(t(Ve),t("iOS"),t(ze),t("Linux"),t("OSX"),t(Ke),t(Xe),/.*?version\/\ ?([0-9]+)\.([0-9]+).*/),Ze=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return L(e,"edge/")&&L(e,"chrome")&&L(e,"safari")&&L(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Je],search:function(e){return L(e,"chrome")&&!L(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return L(e,"msie")||L(e,"trident")}},{name:"Opera",versionRegexes:[Je,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:T("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:T("firefox")},{name:"Safari",versionRegexes:[Je,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(L(e,"safari")||L(e,"mobile/"))&&L(e,"applewebkit")}}],et=[{name:"Windows",search:T("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return L(e,"iphone")||L(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:T("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:T("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:T("linux"),versionRegexes:[]},{name:"Solaris",search:T("sunos"),versionRegexes:[]},{name:"FreeBSD",search:T("freebsd"),versionRegexes:[]}],tt={browsers:t(Ze),oses:t(et)},nt=Pe(function(e,n){var r=tt.browsers(),o=tt.oses(),i=function(e,t){return b(e,t).map(function(e){var n=Fe(e.versionRegexes,t);return{current:e.name,version:n}})}(r,e).fold(qe,We),u=function(e,t){return b(e,t).map(function(e){var n=Fe(e.versionRegexes,t);return{current:e.name,version:n}})}(o,e).fold(Ye,Ge);return{browser:i,os:u,deviceType:function(e,n,r,o){var i=e.isiOS()&&!0===/ipad/i.test(r),u=e.isiOS()&&!i,s=e.isiOS()||e.isAndroid(),a=s||o("(pointer:coarse)"),c=i||!u&&s&&o("(min-device-width:768px)"),f=u||s&&!c,l=n.isSafari()&&e.isiOS()&&!1===/safari/i.test(r),d=!f&&!c&&!l;return{isiPad:t(i),isiPhone:t(u),isTablet:t(c),isPhone:t(f),isTouch:t(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:t(l),isDesktop:t(d)}}(u,i,e,n)}}(e.navigator.userAgent,function(t){return e.window.matchMedia(t).matches})),rt=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:t(e)}},ot={fromHtml:function(t,n){var r=(n||e.document).createElement("div");if(r.innerHTML=t,!r.hasChildNodes()||1<r.childNodes.length)throw e.console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return rt(r.childNodes[0])},fromTag:function(t,n){var r=(n||e.document).createElement(t);return rt(r)},fromText:function(t,n){var r=(n||e.document).createTextNode(t);return rt(r)},fromDom:rt,fromPoint:function(e,t,n){var r=e.dom();return De.from(r.elementFromPoint(t,n)).map(rt)}},it=(e.Node.ATTRIBUTE_NODE,e.Node.CDATA_SECTION_NODE,e.Node.COMMENT_NODE,e.Node.DOCUMENT_NODE,e.Node.DOCUMENT_TYPE_NODE,e.Node.DOCUMENT_FRAGMENT_NODE,e.Node.ELEMENT_NODE),ut=(e.Node.TEXT_NODE,e.Node.PROCESSING_INSTRUCTION_NODE,e.Node.ENTITY_REFERENCE_NODE,e.Node.ENTITY_NODE,e.Node.NOTATION_NODE,it),st=nt.get().browser.isIE()?function(e,t){return Be(e.dom(),t.dom())}:function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},at=function(e,t){var n=e.dom();if(n.nodeType!==ut)return!1;var r=n;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},ct=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),ft=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),lt=tinymce.util.Tools.resolve("tinymce.util.VK"),dt=Object.keys,mt=(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}("element","offset"),void 0!==e.window?e.window:Function("return this;")()),gt=function(e){return function(e){return function(e,t){var n=function(e,t){return U(e,t)}(e,t);if(null==n)throw new Error(e+" not available on this browser");return n}("HTMLElement",e)}(U("ownerDocument.defaultView",e)).prototype.isPrototypeOf(e)},pt=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),vt=tinymce.util.Tools.resolve("tinymce.util.Tools"),ht=function(e){return e&&3===e.nodeType},Nt=function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)},yt=function(e){return e&&/^(OL|UL)$/.test(e.nodeName)},St=function(e){return e&&/^(DT|DD)$/.test(e.nodeName)},Ot=function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)},Ct=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},bt=F,Lt=function(e){return e.parentNode.firstChild===e},Tt=function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},Et=function(e,t){return e&&e.nodeName in t},Dt=function(e,t){return!!F(t)&&!(!e.isBlock(t.nextSibling)||F(t.previousSibling))},wt=function(e,t,n){var r=e.isEmpty(t);return!(n&&0<e.select("span[data-mce-type=bookmark]",t).length)&&r},At=function(e,t){return e.isChildOf(t,e.getRoot())},kt=function(e,t){var n=e.dom.getParents(t,"TD,TH");return 0<n.length?n[0]:e.getBody()},xt={isList:function(e){var t=j(e);return gt(t)},getParentList:j,getSelectedSubLists:function(e){var t=j(e),n=e.selection.getSelectedBlocks();return function(e,t){return e&&1===t.length&&t[0]===e}(t,n)?function(e){return vt.grep(e.querySelectorAll("ol,ul,dl"),function(e){return Nt(e)})}(t):vt.grep(n,function(e){return Nt(e)&&t!==e})},getSelectedListItems:H,getClosestListRootElm:kt,getSelectedDlItems:function(e){return p(H(e),St)},getSelectedListRoots:function(e){var t=function(e){var t=$(e,e.selection.getStart()),n=p(e.selection.getSelectedBlocks(),yt);return t.toArray().concat(n)}(e);return function(e,t){var n=m(t,function(t){return $(e,t).getOr(t)});return pt.unique(n)}(e,t)}},Rt=(Le=it,function(e){return function(e){return e.dom().nodeType}(e)===Le}),It=Object.prototype.hasOwnProperty,_t=(Te=function(e,t){return t},function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<e.length;r++){var o=e[r];for(var i in o)It.call(o,i)&&(n[i]=Te(n[i],o[i]))}return n}),Bt=function(e,t,n,r){return N(A(r),function(r){return(G(r)?Bt:function(e,t,n,r){return x(r).filter(G).fold(function(){t.each(function(e){E(e.start,r)&&n.set(!0)});var o=function(e,t,n){return w(e).filter(Rt).map(function(r){return{depth:t,isSelected:n,content:te(e),itemAttributes:z(e),listAttributes:z(r),listType:W(r)}})}(r,e,n.get());t.each(function(e){E(e.end,r)&&n.set(!1)});var i=R(r).filter(G).map(function(r){return Bt(e,t,n,r)}).getOr([]);return o.toArray().concat(i)},function(r){return Bt(e,t,n,r)})})(e+1,t,n,r)})},Pt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Mt=Pt.DOM,Ut=function(e,t,n){var r,o,i,u,s,a;for(i=Mt.select('span[data-mce-type="bookmark"]',t),s=q(e,n),(r=Mt.createRng()).setStartAfter(n),r.setEndAfter(t),u=(o=r.extractContents()).firstChild;u;u=u.firstChild)if("LI"===u.nodeName&&e.dom.isEmpty(u)){Mt.remove(u);break}e.dom.isEmpty(o)||Mt.insertAfter(o,t),Mt.insertAfter(s,t),wt(e.dom,n.parentNode)&&(a=n.parentNode,vt.each(i,function(e){a.parentNode.insertBefore(e,n.parentNode)}),Mt.remove(a)),Mt.remove(n),wt(e.dom,t)&&Mt.remove(t)},Ft=function(e){var t=e.cloneRange(),n=ue(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);var r=ue(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t},jt=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),Ht=Pt.DOM,$t=function(e){function t(t){var r,o,i;o=e[t?"startContainer":"endContainer"],i=e[t?"startOffset":"endOffset"],1===o.nodeType&&(r=Ht.create("span",{"data-mce-type":"bookmark"}),o.hasChildNodes()?(i=Math.min(i,o.childNodes.length-1),t?o.insertBefore(r,o.childNodes[i]):Ht.insertAfter(r,o.childNodes[i])):o.appendChild(r),o=r,i=0),n[t?"startContainer":"endContainer"]=o,n[t?"startOffset":"endOffset"]=i}var n={};return t(!0),e.collapsed||t(),n},qt=function(e){function t(t){var n,r,o;n=o=e[t?"startContainer":"endContainer"],r=e[t?"startOffset":"endOffset"],n&&(1===n.nodeType&&(r=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1}(n),n=n.parentNode,Ht.remove(o),!n.hasChildNodes()&&Ht.isBlock(n)&&n.appendChild(Ht.create("br"))),e[t?"startContainer":"endContainer"]=n,e[t?"startOffset":"endOffset"]=r)}t(!0),t();var n=Ht.createRng();return n.setStart(e.startContainer,e.startOffset),e.endContainer&&n.setEnd(e.endContainer,e.endOffset),Ft(n)},Wt=function(e,t){var n,r;if(ve(e,t,n=t.nextSibling)){for(;r=n.firstChild;)t.appendChild(r);e.remove(n)}if(ve(e,t,n=t.previousSibling)){for(;r=n.lastChild;)t.insertBefore(r,t.firstChild);e.remove(n)}},Vt=function(e){return"list-style-type"in e},zt={toggleList:function(e,t,n){var r=xt.getParentList(e),o=xt.getSelectedSubLists(e);n=n||{},r&&0<o.length?function(e,t,n,r,o){if(t.nodeName!==r||Vt(o)){var i=$t(e.selection.getRng(!0));vt.each([t].concat(n),function(t){!function(e,t,n,r){if(t.nodeName!==n){var o=e.dom.rename(t,n);ge(e.dom,o,r),M(e,de(n),o)}else ge(e.dom,t,r),M(e,de(n),t)}(e,t,r,o)}),e.selection.setRng(qt(i))}else fe(e)}(e,r,o,t,n):function(e,t,n,r){if(t!==e.getBody())if(t)if(t.nodeName!==n||Vt(r)||le(t)){var o=$t(e.selection.getRng(!0));ge(e.dom,t,r);var i=e.dom.rename(t,n);Wt(e.dom,i),e.selection.setRng(qt(o)),M(e,de(n),i)}else fe(e);else(function(e,t,n){void 0===n&&(n={});var r,o=e.selection.getRng(!0),i="LI",u=xt.getClosestListRootElm(e,e.selection.getStart(!0)),s=e.dom;"false"!==s.getContentEditable(e.selection.getNode())&&("DL"===(t=t.toUpperCase())&&(i="DT"),r=$t(o),vt.each(function(e,t,n){for(var r,o=[],i=e.dom,u=pe(e,t,!0,n),s=pe(e,t,!1,n),a=[],c=u;c&&(a.push(c),c!==s);c=c.nextSibling);return vt.each(a,function(t){if(Tt(e,t))return o.push(t),void(r=null);if(i.isBlock(t)||bt(t))return bt(t)&&i.remove(t),void(r=null);var u=t.nextSibling;jt.isBookmarkNode(t)&&(Tt(e,u)||!u&&t.parentNode===n)?r=null:(r||(r=i.create("p"),t.parentNode.insertBefore(r,t),o.push(r)),r.appendChild(t))}),o}(e,o,u),function(r){var o,u;(u=r.previousSibling)&&Nt(u)&&u.nodeName===t&&function(e,t,n){var r=s.getStyle(t,"list-style-type"),o=n?n["list-style-type"]:"";return r===(null===o?"":o)}(0,u,n)?(o=u,r=s.rename(r,i),u.appendChild(r)):(o=s.create(t),r.parentNode.insertBefore(o,r),o.appendChild(r),r=s.rename(r,i)),function(e,t,n){vt.each(["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"],function(n){var r;return e.setStyle(t,((r={})[n]="",r))})}(s,r),ge(s,o,n),Wt(e.dom,o)}),e.selection.setRng(qt(r)))})(e,n,r),M(e,de(n),t)}(e,r,t,n)},mergeWithAdjacentLists:Wt},Kt=Pt.DOM,Xt=function(e,t){vt.each(vt.grep(e.select("ol,ul",t)),function(t){!function(e,t){var n,r=t.parentNode;"LI"===r.nodeName&&r.firstChild===t&&((n=r.previousSibling)&&"LI"===n.nodeName?(n.appendChild(t),wt(e,r)&&Kt.remove(r)):Kt.setStyle(r,"listStyleType","none")),Nt(r)&&(n=r.previousSibling)&&"LI"===n.nodeName&&n.appendChild(t)}(e,t)})},Qt=Oe,Yt=function(e){var t;(function(e){return e.getParam("lists_indent_on_tab",!0)})(e)&&(t=e).on("keydown",function(e){e.keyCode!==lt.TAB||lt.metaKeyPressed(e)||t.undoManager.transact(function(){(e.shiftKey?ce(t):ae(t))&&e.preventDefault()})}),function(e){e.on("keydown",function(t){t.keyCode===lt.BACKSPACE?Oe(e,!1)&&t.preventDefault():t.keyCode===lt.DELETE&&Oe(e,!0)&&t.preventDefault()})}(e)};i.add("lists",function(e){return Yt(e),function(e){function t(t){return function(){return e.execCommand(t)}}var n,r;r=(n=e).settings.plugins?n.settings.plugins:"",-1===vt.inArray(r.split(/[ ,]/),"advlist")&&(e.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:t("InsertOrderedList"),onSetup:be(e,"OL")}),e.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:t("InsertUnorderedList"),onSetup:be(e,"UL")}))}(e),(n=e).on("BeforeExecCommand",function(e){var t=e.command.toLowerCase();"indent"===t?ae(n):"outdent"===t&&ce(n)}),n.addCommand("InsertUnorderedList",function(e,t){zt.toggleList(n,"UL",t)}),n.addCommand("InsertOrderedList",function(e,t){zt.toggleList(n,"OL",t)}),n.addCommand("InsertDefinitionList",function(e,t){zt.toggleList(n,"DL",t)}),n.addCommand("RemoveList",function(){fe(n)}),n.addQueryStateHandler("InsertUnorderedList",Ce(n,"UL")),n.addQueryStateHandler("InsertOrderedList",Ce(n,"OL")),n.addQueryStateHandler("InsertDefinitionList",Ce(n,"DL")),t=e,{backspaceDelete:function(e){Qt(t,e)}};var t,n})}(window);
//# sourceMappingURL=plugin.min.js.map
