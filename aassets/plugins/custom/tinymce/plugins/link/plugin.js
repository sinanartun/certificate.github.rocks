!function(t){"use strict";var n,e,r,o,i=tinymce.util.Tools.resolve("tinymce.PluginManager"),u=tinymce.util.Tools.resolve("tinymce.util.VK"),c=function(t){return function(n){return function(t){if(null===t)return"null";var n=typeof t;return"object"===n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n}(n)===t}},a=c("string"),l=c("array"),f=c("boolean"),s=c("function"),d=function(t){var n=t.getParam("link_assume_external_targets",!1);return f(n)&&n?1:!a(n)||"http"!==n&&"https"!==n?0:n},m=function(t){return t.getParam("link_context_toolbar",!1,"boolean")},p=function(t){return t.getParam("link_list")},h=function(t){return t.getParam("default_link_target")},g=function(t){return t.getParam("target_list",!0)},v=function(t){return t.getParam("rel_list",[],"array")},y=function(t){return t.getParam("link_class_list",[],"array")},k=function(t){return t.getParam("link_title",!0,"boolean")},b=function(t){return t.getParam("allow_unsafe_link_target",!1,"boolean")},w=function(t){return t.getParam("link_quicklink",!1,"boolean")},x=function(n){var e=t.document.createElement("a");e.target="_blank",e.href=n,e.rel="noreferrer noopener";var r=t.document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,t.window,0,0,0,0,0,!1,!1,!1,!1,0,null),function(n,e){t.document.body.appendChild(n),n.dispatchEvent(e),t.document.body.removeChild(n)}(e,r)},_=function(){},T=function(t){return function(){return t}},O=T(!1),A=T(!0),C=function(){return S},S=(n=function(t){return t.isNone()},o={fold:function(t,n){return t()},is:O,isSome:O,isNone:A,getOr:r=function(t){return t},getOrThunk:e=function(t){return t()},getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:T(null),getOrUndefined:T(void 0),or:r,orThunk:e,map:C,each:_,bind:C,exists:O,forall:A,filter:C,equals:n,equals_:n,toArray:function(){return[]},toString:T("none()")},Object.freeze&&Object.freeze(o),o),P=function(t){var n=T(t),e=function(){return o},r=function(n){return n(t)},o={fold:function(n,e){return e(t)},is:function(n){return t===n},isSome:A,isNone:O,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:e,orThunk:e,map:function(n){return P(n(t))},each:function(n){n(t)},bind:r,exists:r,forall:r,filter:function(n){return n(t)?o:S},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(n){return n.is(t)},equals_:function(n,e){return n.fold(O,function(n){return e(t,n)})}};return o},E={some:P,none:C,from:function(t){return null==t?S:P(t)}},L=Array.prototype.slice,N=Array.prototype.indexOf,I=Array.prototype.push,j=function(t,n){return e=t,r=n,N.call(e,r)>-1;var e,r},D=function(t,n){for(var e=0,r=t.length;e<r;e++){n(t[e],e)}},F=function(t){for(var n=[],e=0,r=t.length;e<r;++e){if(!l(t[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+t);I.apply(n,t[e])}return n},R=function(t,n){var e=function(t,n){for(var e=t.length,r=new Array(e),o=0;o<e;o++){var i=t[o];r[o]=n(i,o)}return r}(t,n);return F(e)},M=(s(Array.from)&&Array.from,tinymce.util.Tools.resolve("tinymce.util.Tools")),U=function(t){return/^\w+:/i.test(t)},z=function(t,n){var e=["noopener"],r=t?t.split(/\s+/):[],o=function(t){return t.filter(function(t){return-1===M.inArray(e,t)})},i=n?function(t){return(t=o(t)).length>0?t.concat(e):e}(r):o(r);return i.length>0?function(t){return M.trim(t.sort().join(" "))}(i):""},q=function(t,n){return n=n||t.selection.getNode(),K(n)?t.dom.select("a[href]",n)[0]:t.dom.getParent(n,"a[href]")},B=function(t){return t&&"A"===t.nodeName&&!!t.href},K=function(t){return t&&"FIGURE"===t.nodeName&&/\bimage\b/i.test(t.className)},V=function(t){return n=["title","rel","class","target"],e=function(n,e){return t[e].each(function(t){n[e]=t.length>0?t:null}),n},r={href:t.href},D(n,function(t){r=e(r,t)}),r;var n,e,r},W=function(t,n){var e=t.dom.select("img",n)[0];if(e){var r=t.dom.getParents(e,"a[href]",n)[0];r&&(r.parentNode.insertBefore(e,r),t.dom.remove(r))}},G=function(t,n,e){var r=t.dom.select("img",n)[0];if(r){var o=t.dom.create("a",e);r.parentNode.insertBefore(o,r),o.appendChild(r)}},H=function(t,n,e){t.undoManager.transact(function(){var r,o,i=t.selection.getNode(),u=q(t,i),c=V(e);if(!(v(t).length>0)&&!1===b(t)){var a=z(c.rel,"_blank"===c.target);c.rel=a||null}E.from(c.target).isNone()&&(c.target=h(t)),c.href=(r=c.href,"http"!==(o=d(t))&&"https"!==o||U(r)?r:o+"://"+r),e.href===n.href&&n.attach(),u?(t.focus(),function(t,n,e,r){e.each(function(t){n.hasOwnProperty("innerText")?n.innerText=t:n.textContent=t}),t.dom.setAttribs(n,r),t.selection.select(n)}(t,u,e.text,c)):function(t,n,e,r){K(n)?G(t,n,r):e.fold(function(){t.execCommand("mceInsertLink",!1,r)},function(n){t.insertContent(t.dom.createHTML("a",r,t.dom.encode(n)))})}(t,i,e.text,c)})},$=function(t){t.undoManager.transact(function(){var n=t.selection.getNode();if(K(n))W(t,n);else{var e=t.dom.getParent(n,"a[href]",t.getBody());e&&t.dom.remove(e,!0)}t.focus()})},J=B,X=function(t){return M.grep(t,B).length>0},Q=function(t){var n=t.getAttribute("data-mce-href");return n||t.getAttribute("href")},Y=function(t){return!(/</.test(t)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(t)||-1===t.indexOf("href=")))},Z=q,tt=function(t,n){return function(t){return t.replace(/\uFEFF/g,"")}(n?n.innerText||n.textContent:t.getContent({format:"text"}))},nt=z,et=U,rt=function(t){for(var n=[],e=function(t){n.push(t)},r=0;r<t.length;r++)t[r].each(e);return n},ot=function(t,n){for(var e=0;e<t.length;e++){var r=n(t[e],e);if(r.isSome())return r}return E.none()},it=function(t){return a(t.value)?t.value:""},ut=function(t){return void 0===t&&(t=it),function(n){return E.from(n).map(function(n){return function(t,n){var e=[];return M.each(t,function(t){var r=a(t.text)?t.text:a(t.title)?t.title:"";if(void 0!==t.menu);else{var o=n(t);e.push({text:r,value:o})}}),e}(n,t)})}},ct={sanitize:function(t){return ut(it)(t)},sanitizeWith:ut,createUi:function(t,n){return function(e){return{name:t,type:"selectbox",label:n,items:e}}},getValue:it},at=function(t){var n=t,e=function(){return n};return{get:e,set:function(t){n=t},clone:function(){return at(e())}}},lt=function(t,n,e,r){var o=r[n],i=t.length>0;return void 0!==o?function(t,n){return ot(n,function(n){return E.some(n).filter(function(n){return n.value===t})})}(o,e).map(function(n){return{url:{value:n.value,meta:{text:i?t:n.text,attach:_}},text:i?t:n.text}}):E.none()},ft=function(t,n){var e=at(t.text),r=function(t,r){var o,i,u=(o=n,i=r.name,"link"===i?o.catalogs.link:"anchor"===i?o.catalogs.anchor:E.none()).getOr([]);return lt(e.get(),r.name,u,t)};return{onChange:function(t,n){return"url"===n.name?function(t){if(e.get().length<=0){var n=void 0!==t.url.meta.text?t.url.meta.text:t.url.value;return E.some({text:n})}return E.none()}(t()):j(["anchor","link"],n.name)?r(t(),n):"text"===n.name?(e.set(t().text),E.none()):E.none()}}},st=function(){return(st=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},dt={},mt={exports:dt};!function(t,n,e,r){!function(r){if("object"==typeof n&&void 0!==e)e.exports=r();else if("function"==typeof t&&t.amd)t([],r);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EphoxContactWrapper=r()}}(function(){return function(){return function t(n,e,o){function i(c,a){if(!e[c]){if(!n[c]){var l="function"==typeof r&&r;if(!a&&l)return l(c,!0);if(u)return u(c,!0);var f=new Error("Cannot find module '"+c+"'");throw f.code="MODULE_NOT_FOUND",f}var s=e[c]={exports:{}};n[c][0].call(s.exports,function(t){return i(n[c][1][t]||t)},s,s.exports,t,n,e,o)}return e[c].exports}for(var u="function"==typeof r&&r,c=0;c<o.length;c++)i(o[c]);return i}}()({1:[function(t,n,e){var r,o,i=n.exports={};function u(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===u||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(n){try{return r.call(null,t,0)}catch(n){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:u}catch(t){r=u}try{o="function"==typeof clearTimeout?clearTimeout:c}catch(t){o=c}}();var l,f=[],s=!1,d=-1;function m(){s&&l&&(s=!1,l.length?f=l.concat(f):d=-1,f.length&&p())}function p(){if(!s){var t=a(m);s=!0;for(var n=f.length;n;){for(l=f,f=[];++d<n;)l&&l[d].run();d=-1,n=f.length}l=null,s=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===c||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(n){try{return o.call(null,t)}catch(n){return o.call(this,t)}}}(t)}}function h(t,n){this.fun=t,this.array=n}function g(){}i.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];f.push(new h(t,n)),1!==f.length||s||a(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],2:[function(t,n,e){(function(t){!function(e){var r=setTimeout;function o(){}function i(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(t,this)}function u(t,n){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,i._immediateFn(function(){var e=1===t._state?n.onFulfilled:n.onRejected;if(null!==e){var r;try{r=e(t._value)}catch(t){return void a(n.promise,t)}c(n.promise,r)}else(1===t._state?c:a)(n.promise,t._value)})):t._deferreds.push(n)}function c(t,n){try{if(n===t)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var e=n.then;if(n instanceof i)return t._state=3,t._value=n,void l(t);if("function"==typeof e)return void s((r=e,o=n,function(){r.apply(o,arguments)}),t)}t._state=1,t._value=n,l(t)}catch(n){a(t,n)}var r,o}function a(t,n){t._state=2,t._value=n,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&i._immediateFn(function(){t._handled||i._unhandledRejectionFn(t._value)});for(var n=0,e=t._deferreds.length;n<e;n++)u(t,t._deferreds[n]);t._deferreds=null}function f(t,n,e){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof n?n:null,this.promise=e}function s(t,n){var e=!1;try{t(function(t){e||(e=!0,c(n,t))},function(t){e||(e=!0,a(n,t))})}catch(t){if(e)return;e=!0,a(n,t)}}i.prototype.catch=function(t){return this.then(null,t)},i.prototype.then=function(t,n){var e=new this.constructor(o);return u(this,new f(t,n,e)),e},i.all=function(t){var n=Array.prototype.slice.call(t);return new i(function(t,e){if(0===n.length)return t([]);var r=n.length;function o(i,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var c=u.then;if("function"==typeof c)return void c.call(u,function(t){o(i,t)},e)}n[i]=u,0==--r&&t(n)}catch(t){e(t)}}for(var i=0;i<n.length;i++)o(i,n[i])})},i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i(function(n){n(t)})},i.reject=function(t){return new i(function(n,e){e(t)})},i.race=function(t){return new i(function(n,e){for(var r=0,o=t.length;r<o;r++)t[r].then(n,e)})},i._immediateFn="function"==typeof t?function(n){t(n)}:function(t){r(t,0)},i._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},i._setImmediateFn=function(t){i._immediateFn=t},i._setUnhandledRejectionFn=function(t){i._unhandledRejectionFn=t},void 0!==n&&n.exports?n.exports=i:e.Promise||(e.Promise=i)}(this)}).call(this,t("timers").setImmediate)},{timers:3}],3:[function(t,n,e){(function(n,r){var o=t("process/browser.js").nextTick,i=Function.prototype.apply,u=Array.prototype.slice,c={},a=0;function l(t,n){this._id=t,this._clearFn=n}e.setTimeout=function(){return new l(i.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new l(i.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,n){clearTimeout(t._idleTimeoutId),t._idleTimeout=n},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var n=t._idleTimeout;n>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},n))},e.setImmediate="function"==typeof n?n:function(t){var n=a++,r=!(arguments.length<2)&&u.call(arguments,1);return c[n]=!0,o(function(){c[n]&&(r?t.apply(null,r):t.call(null),e.clearImmediate(n))}),n},e.clearImmediate="function"==typeof r?r:function(t){delete c[t]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(t,n,e){var r=t("promise-polyfill"),o="undefined"!=typeof window?window:Function("return this;")();n.exports={boltExport:o.Promise||r}},{"promise-polyfill":2}]},{},[4])(4)})}(void 0,dt,mt,void 0);var pt=mt.exports.boltExport,ht=function(n){var e=E.none(),r=[],o=function(t){i()?c(t):r.push(t)},i=function(){return e.isSome()},u=function(t){D(t,c)},c=function(n){e.each(function(e){t.setTimeout(function(){n(e)},0)})};return n(function(t){e=E.some(t),u(r),r=[]}),{get:o,map:function(t){return ht(function(n){o(function(e){n(t(e))})})},isReady:i}},gt={nu:ht,pure:function(t){return ht(function(n){n(t)})}},vt=function(n){t.setTimeout(function(){throw n},0)},yt=function(t){var n=function(n){t().then(n,vt)};return{map:function(n){return yt(function(){return t().then(n)})},bind:function(n){return yt(function(){return t().then(function(t){return n(t).toPromise()})})},anonBind:function(n){return yt(function(){return t().then(function(){return n.toPromise()})})},toLazy:function(){return gt.nu(n)},toCached:function(){var n=null;return yt(function(){return null===n&&(n=t()),n})},toPromise:t,get:n}},kt=function(t){return yt(function(){return new pt(t)})},bt=function(t){return yt(function(){return pt.resolve(t)})},wt=tinymce.util.Tools.resolve("tinymce.util.Delay"),xt=function(t){var n=t.href;return n.indexOf("@")>0&&-1===n.indexOf("//")&&-1===n.indexOf("mailto:")?E.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:function(t){return st(st({},t),{href:"mailto:"+n})}}):E.none()},_t=function(t){return function(n){var e=n.href;return 1===t&&!et(e)||0===t&&/^\s*www[\.|\d\.]/i.test(e)?E.some({message:"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",preprocess:function(t){return st(st({},t),{href:"http://"+e})}}):E.none()}},Tt=function(t,n,e){return ot([xt,_t(n)],function(t){return t(e)}).fold(function(){return bt(e)},function(n){return kt(function(r){!function(t,n,e){var r=t.selection.getRng();wt.setEditorTimeout(t,function(){t.windowManager.confirm(n,function(n){t.selection.setRng(r),e(n)})})}(t,n.message,function(t){r(t?n.preprocess(e):e)})})})},Ot=function(t){var n=t.dom.select("a:not([href])"),e=R(n,function(t){var n=t.name||t.id;return n?[{text:n,value:"#"+n}]:[]});return e.length>0?E.some([{text:"None",value:""}].concat(e)):E.none()},At=function(t){var n=y(t);return n.length>0?ct.sanitize(n):E.none()},Ct=tinymce.util.Tools.resolve("tinymce.util.XHR"),St=function(t){var n=function(n){return t.convertURL(n.value||n.url,"href")},e=p(t);return kt(function(t){a(e)?Ct.send({url:e,success:function(n){return t(function(t){try{return E.some(JSON.parse(t))}catch(t){return E.none()}}(n))},error:function(n){return t(E.none())}}):s(e)?e(function(n){return t(E.some(n))}):t(E.from(e))}).map(function(t){return t.bind(ct.sanitizeWith(n)).map(function(t){return t.length>0?[{text:"None",value:""}].concat(t):t})})},Pt=function(t,n){var e=v(t);if(e.length>0){var r=n.is("_blank");return(!1===b(t)?ct.sanitizeWith(function(t){return nt(ct.getValue(t),r)}):ct.sanitize)(e)}return E.none()},Et=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Lt=function(t){var n=g(t);return l(n)?ct.sanitize(n).orThunk(function(){return E.some(Et)}):!1===n?E.none():E.some(Et)},Nt=function(t,n,e){var r=t.getAttrib(n,e);return null!==r&&r.length>0?E.some(r):E.none()},It=function(t,n){return St(t).map(function(e){var r=function(t,n){var e=t.dom,r=Y(t.selection.getContent())?E.some(tt(t.selection,n)):E.none(),o=n?E.some(e.getAttrib(n,"href")):E.none(),i=n?E.from(e.getAttrib(n,"target")):E.none(),u=Nt(e,n,"rel"),c=Nt(e,n,"class");return{url:o,text:r,title:Nt(e,n,"title"),target:i,rel:u,linkClass:c}}(t,n);return{anchor:r,catalogs:{targets:Lt(t),rels:Pt(t,r.target),classes:At(t),anchor:Ot(t),link:e},optNode:E.from(n),flags:{titleEnabled:k(t)}}})},jt=function(t){(function(t){var n=Z(t);return It(t,n)})(t).map(function(n){var e=function(t,n,e){return function(r){var o=r.getData();if(!o.url.value)return $(t),void r.close();var i=function(t){return E.from(o[t]).filter(function(e){return!n.anchor[t].is(e)})},u={href:o.url.value,text:i("text"),target:i("target"),rel:i("rel"),class:i("linkClass"),title:i("title")},c={href:o.url.value,attach:void 0!==o.url.meta&&o.url.meta.attach?o.url.meta.attach:function(){}};Tt(t,e,u).get(function(n){H(t,c,n)}),r.close()}}(t,n,d(t));return function(t,n,e){var r=t.anchor.text.map(function(){return{name:"text",type:"input",label:"Text to display"}}).toArray(),o=t.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],i=function(t,n){return{url:{value:t.anchor.url.getOr(""),meta:{attach:function(){},text:t.anchor.url.fold(function(){return""},function(){return t.anchor.text.getOr("")}),original:{value:t.anchor.url.getOr("")}}},text:t.anchor.text.getOr(""),title:t.anchor.title.getOr(""),anchor:t.anchor.url.getOr(""),link:t.anchor.url.getOr(""),rel:t.anchor.rel.getOr(""),target:t.anchor.target.or(n).getOr(""),linkClass:t.anchor.linkClass.getOr("")}}(t,E.from(h(e))),u=ft(i,t),c=t.catalogs;return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:F([[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],r,o,rt([c.anchor.map(ct.createUi("anchor","Anchors")),c.rels.map(ct.createUi("rel","Rel")),c.targets.map(ct.createUi("target","Open link in...")),c.link.map(ct.createUi("link","Link list")),c.classes.map(ct.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:i,onChange:function(t,n){var e=n.name;u.onChange(t.getData,{name:e}).each(function(n){t.setData(n)})},onSubmit:n}}(n,e,t)}).get(function(n){t.windowManager.open(n)})},Dt=function(t,n){return t.dom.getParent(n,"a[href]")},Ft=function(t){return Dt(t,t.selection.getStart())},Rt=function(t,n){if(n){var e=Q(n);if(/^#/.test(e)){var r=t.$(e);r.length&&t.selection.scrollIntoView(r[0],!0)}else x(n.href)}},Mt={openDialog:function(t){return function(){jt(t)}},gotoSelectedLink:function(t){return function(){Rt(t,Ft(t))}},leftClickedOnAHref:function(t){return function(n){var e,r,o;return!!(m(t)&&J(n)&&3===(o=(r=(e=t.selection).getRng()).startContainer).nodeType&&e.isCollapsed()&&r.startOffset>0&&r.startOffset<o.data.length)}},setupGotoLinks:function(t){t.on("click",function(n){var e=Dt(t,n.target);e&&u.metaKeyPressed(n)&&(n.preventDefault(),Rt(t,e))}),t.on("keydown",function(n){var e=Ft(t);e&&13===n.keyCode&&function(t){return!0===t.altKey&&!1===t.shiftKey&&!1===t.ctrlKey&&!1===t.metaKey}(n)&&(n.preventDefault(),Rt(t,e))})},toggleActiveState:function(t){return function(n){var e=function(e){return n.setActive(!t.readonly&&!!Z(t,e.element))};return t.on("NodeChange",e),function(){return t.off("NodeChange",e)}}},toggleEnabledState:function(t){return function(n){n.setDisabled(!X(t.dom.getParents(t.selection.getStart())));var e=function(t){return n.setDisabled(!X(t.parents))};return t.on("NodeChange",e),function(){return t.off("NodeChange",e)}}}},Ut={register:function(t){t.addCommand("mceLink",function(){w(t)?t.fire("contexttoolbar-show",{toolbarKey:"quicklink"}):Mt.openDialog(t)()})}},zt={setup:function(t){t.addShortcut("Meta+K","",function(){t.execCommand("mceLink")})}},qt={setupButtons:function(t){t.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Mt.openDialog(t),onSetup:Mt.toggleActiveState(t)}),t.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Mt.gotoSelectedLink(t),onSetup:Mt.toggleEnabledState(t)}),t.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:function(){return $(t)},onSetup:Mt.toggleEnabledState(t)})},setupMenuItems:function(t){t.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Mt.gotoSelectedLink(t),onSetup:Mt.toggleEnabledState(t)}),t.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Mt.openDialog(t)}),t.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:function(){return $(t)},onSetup:Mt.toggleEnabledState(t)})},setupContextMenu:function(t){t.ui.registry.addContextMenu("link",{update:function(n){return X(t.dom.getParents(n,"a"))?"link unlink openlink":"link"}})},setupContextToolbars:function(t){var n=function(n){var e=t.selection.getNode();return n.setDisabled(!Z(t,e)),function(){}};t.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Mt.toggleActiveState(t)},label:"Link",predicate:function(n){return!!Z(t,n)&&m(t)},initValue:function(){var n=Z(t);return n?Q(n):""},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:function(n){var e=t.selection.getNode();return n.setActive(!!Z(t,e)),Mt.toggleActiveState(t)(n)},onAction:function(n){var e=Z(t),r=n.getValue();if(e)t.dom.setAttrib(e,"href",r),function(t){t.selection.collapse(!1)}(t),n.hide();else{var o={href:r,attach:function(){}},i=Y(t.selection.getContent())?E.some(tt(t.selection,e)).filter(function(t){return t.length>0}).or(E.from(r)):E.none();H(t,o,{href:r,text:i,title:E.none(),rel:E.none(),target:E.none(),class:E.none()}),n.hide()}}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:n,onAction:function(n){$(t),n.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:n,onAction:function(n){Mt.gotoSelectedLink(t)(),n.hide()}}]})}};i.add("link",function(t){qt.setupButtons(t),qt.setupMenuItems(t),qt.setupContextMenu(t),qt.setupContextToolbars(t),Mt.setupGotoLinks(t),Ut.register(t),zt.setup(t)})}(window);
//# sourceMappingURL=plugin.js.map
