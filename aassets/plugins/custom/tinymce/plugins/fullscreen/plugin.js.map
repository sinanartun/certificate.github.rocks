{"version":3,"sources":["fullscreen/plugin.js"],"names":["domGlobals","t","subject","editorContainer","update","Cell","initial","value","get","set","v","clone","global","tinymce","util","Tools","resolve","Api","fullscreenState","isFullscreen","noop","constant","never","always","none","NONE","eq","o","isNone","call","thunk","id","n","me","fold","s","is","isSome","getOr","getOrThunk","getOrDie","msg","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","equals","equals_","toArray","toString","Object","freeze","some","a","constant_a","self","f","elementEq","b","Option","from","isType","type","x","Array","prototype","isPrototypeOf","constructor","name","String","typeOf","isString","isArray","isBoolean","isFunction","isNumber","nativeSlice","slice","nativePush","push","xs","len","length","r","i","pred","apply","flatten","keys","contains","str","substr","indexOf","isSupported","dom","style","getPropertyValue","fromDom","node","Element","fromHtml","html","scope","div","document","createElement","innerHTML","hasChildNodes","childNodes","console","error","fromTag","tag","fromText","text","createTextNode","fromPoint","docElm","y","doc","elementFromPoint","DOCUMENT","Node","ATTRIBUTE_NODE","CDATA_SECTION_NODE","COMMENT_NODE","DOCUMENT_NODE","ELEMENT","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","ELEMENT_NODE","TEXT","TEXT_NODE","isText","PROCESSING_INSTRUCTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","NOTATION_NODE","window","Function","element","nodeType","key","setAttribute","rawSet","get$1","getAttribute","remove","removeAttribute","setAll","css","obj","props","k","each$1","property","setProperty","internalSet","get$2","getComputedStyle","parentNode","ownerDocument","body","inBody","getUnsafeProperty","unknown","nu","major","minor","Version","detect","versionRegexes","agent","cleanedAgent","toLowerCase","regexes","test","firstMatch","group","Number","replace","find$1","isBrowser","current","nu$1","info","version","isEdge","isChrome","isIE","isOpera","isFirefox","isSafari","Browser","edge","chrome","ie","opera","firefox","safari","isOS","nu$2","isWindows","isiOS","isAndroid","isOSX","isLinux","isSolaris","isFreeBSD","OperatingSystem","windows","ios","android","linux","osx","solaris","freebsd","detect$1","candidates","userAgent","find","candidate","search","UaString","browsers","browser","oses","os","normalVersionRegex","checkContains","target","uastring","PlatformInfo","PlatformDetection","mediaMatch","deviceType","isiPad","isiPhone","isMobile","isTouch","isTablet","isPhone","iOSwebview","isDesktop","isWebView","DeviceType","platform","navigator","query","matchMedia","matches","detect$3","compareDocumentPosition","match","DOCUMENT_POSITION_CONTAINED_BY","ELEMENT$1","DOCUMENT$1","selector","elem","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","all","base","childElementCount","querySelectorAll","siblings","parent","children","elements","e2","fields","_i","arguments","Immutable","left","top","translate","Position","bounds","width","height","right","bottom","getBounds","_win","win","visualViewport","pageLeft","pageTop","documentElement","scroll","_DOC","scrollLeft","scrollTop","get$3","clientWidth","clientHeight","Events","editor","state","fire","global$1","global$2","global$3","ancestors","predicate","isRoot","stop","ret","rawParent","p","parents","ancestors$1","e","siblings$2","siblings$1","attr","ancestorStyles","Thor","container","editorBody","clobber","clobberStyle","styles","backup","trim","bgColor","color","matchColor","clobberedEls","restore","DOM","viewportUpdate","clear","isSet","on","throttle","requestAnimationFrame","offsetTop","offsetLeft","addEventListener","unbind","removeEventListener","Actions","editorContainerStyle","iframeStyle","getContainer","pos","vp","editorContainerS","fullscreenInfo","getBody","getContentAreaContainer","firstChild","iframeWidth","iframeHeight","containerWidth","containerHeight","containerTop","containerLeft","removeClass","scrollPos","scrollTo","off","newFullScreenInfo","addClass","Commands","register","addCommand","makeSetupHandler","api","setActive","editorEventCallback","Buttons","ui","registry","addToggleMenuItem","shortcut","onAction","execCommand","onSetup","addToggleButton","tooltip","icon","add","settings","inline","addShortcut"],"mappings":"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","file":"plugin.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.0 (2019-10-17)\n */\n(function (domGlobals) {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var get = function (fullscreenState) {\n      return {\n        isFullscreen: function () {\n          return fullscreenState.get() !== null;\n        }\n      };\n    };\n    var Api = { get: get };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var value = function () {\n      var subject = Cell(Option.none());\n      var clear = function () {\n        subject.set(Option.none());\n      };\n      var set = function (s) {\n        subject.set(Option.some(s));\n      };\n      var on = function (f) {\n        subject.get().each(f);\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      return {\n        clear: clear,\n        set: set,\n        isSet: isSet,\n        on: on\n      };\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isBoolean = isType('boolean');\n    var isFunction = isType('function');\n    var isNumber = isType('number');\n\n    var nativeSlice = Array.prototype.slice;\n    var nativePush = Array.prototype.push;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var find = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      var output = map(xs, f);\n      return flatten(output);\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var keys = Object.keys;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n\n    var contains = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        domGlobals.console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: constant(node) };\n    };\n    var fromPoint = function (docElm, x, y) {\n      var doc = docElm.dom();\n      return Option.from(doc.elementFromPoint(x, y)).map(fromDom);\n    };\n    var Element = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var ATTRIBUTE = domGlobals.Node.ATTRIBUTE_NODE;\n    var CDATA_SECTION = domGlobals.Node.CDATA_SECTION_NODE;\n    var COMMENT = domGlobals.Node.COMMENT_NODE;\n    var DOCUMENT = domGlobals.Node.DOCUMENT_NODE;\n    var DOCUMENT_TYPE = domGlobals.Node.DOCUMENT_TYPE_NODE;\n    var DOCUMENT_FRAGMENT = domGlobals.Node.DOCUMENT_FRAGMENT_NODE;\n    var ELEMENT = domGlobals.Node.ELEMENT_NODE;\n    var TEXT = domGlobals.Node.TEXT_NODE;\n    var PROCESSING_INSTRUCTION = domGlobals.Node.PROCESSING_INSTRUCTION_NODE;\n    var ENTITY_REFERENCE = domGlobals.Node.ENTITY_REFERENCE_NODE;\n    var ENTITY = domGlobals.Node.ENTITY_NODE;\n    var NOTATION = domGlobals.Node.NOTATION_NODE;\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var type = function (element) {\n      return element.dom().nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isText = isType$1(TEXT);\n\n    var inBody = function (element) {\n      var dom = isText(element) ? element.dom().parentNode : element.dom();\n      return dom !== undefined && dom !== null && dom.ownerDocument.body.contains(dom);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        domGlobals.console.error('Invalid call to Attr.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set = function (element, key, value) {\n      rawSet(element.dom(), key, value);\n    };\n    var get$1 = function (element, key) {\n      var v = element.dom().getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var remove = function (element, key) {\n      element.dom().removeAttribute(key);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        domGlobals.console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var setAll = function (element, css) {\n      var dom = element.dom();\n      each$1(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var get$2 = function (element, property) {\n      var dom = element.dom();\n      var styles = domGlobals.window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      var v = r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n      return v === null ? undefined : v;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$1 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$1(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu(0, 0);\n    };\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var isBrowser = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge, current),\n        isChrome: isBrowser(chrome, current),\n        isIE: isBrowser(ie, current),\n        isOpera: isBrowser(opera, current),\n        isFirefox: isBrowser(firefox, current),\n        isSafari: isBrowser(safari, current)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var isOS = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows, current),\n        isiOS: isOS(ios, current),\n        isAndroid: isOS(android, current),\n        isOSX: isOS(osx, current),\n        isLinux: isOS(linux, current),\n        isSolaris: isOS(solaris, current),\n        isFreeBSD: isOS(freebsd, current)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd)\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains(uastring, 'edge/') && contains(uastring, 'chrome') && contains(uastring, 'safari') && contains(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains(uastring, 'chrome') && !contains(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains(uastring, 'msie') || contains(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains(uastring, 'safari') || contains(uastring, 'mobile/')) && contains(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains(uastring, 'iphone') || contains(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('os x'),\n        versionRegexes: [/.*?os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var detect$2 = function (userAgent, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var mediaMatch = function (query) {\n      return domGlobals.window.matchMedia(query).matches;\n    };\n    var platform = Cell(PlatformDetection.detect(domGlobals.navigator.userAgent, mediaMatch));\n    var detect$3 = function () {\n      return platform.get();\n    };\n\n    var Immutable = function () {\n      var fields = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        fields[_i] = arguments[_i];\n      }\n      return function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        if (fields.length !== values.length) {\n          throw new Error('Wrong number of arguments to struct. Expected \"[' + fields.length + ']\", got ' + values.length + ' arguments');\n        }\n        var struct = {};\n        each(fields, function (name, i) {\n          struct[name] = constant(values[i]);\n        });\n        return struct;\n      };\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionPreceding = function (a, b) {\n      return compareDocumentPosition(a, b, domGlobals.Node.DOCUMENT_POSITION_PRECEDING);\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, domGlobals.Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n    var Node = {\n      documentPositionPreceding: documentPositionPreceding,\n      documentPositionContainedBy: documentPositionContainedBy\n    };\n\n    var ELEMENT$1 = ELEMENT;\n    var DOCUMENT$1 = DOCUMENT;\n    var is = function (element, selector) {\n      var dom = element.dom();\n      if (dom.nodeType !== ELEMENT$1) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT$1 && dom.nodeType !== DOCUMENT$1 || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), Element.fromDom);\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom() === e2.dom();\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom();\n      var d2 = e2.dom();\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return Node.documentPositionContainedBy(e1.dom(), e2.dom());\n    };\n    var browser = detect$3().browser;\n    var contains$1 = browser.isIE() ? ieContains : regularContains;\n\n    var parent = function (element) {\n      return Option.from(element.dom().parentNode).map(Element.fromDom);\n    };\n    var parents = function (element, isRoot) {\n      var stop = isFunction(isRoot) ? isRoot : never;\n      var dom = element.dom();\n      var ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        var rawParent = dom.parentNode;\n        var p = Element.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    var siblings = function (element) {\n      var filterSelf = function (elements) {\n        return filter(elements, function (x) {\n          return !eq(element, x);\n        });\n      };\n      return parent(element).map(children).map(filterSelf).getOr([]);\n    };\n    var children = function (element) {\n      return map(element.dom().childNodes, Element.fromDom);\n    };\n    var spot = Immutable('element', 'offset');\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: constant(left),\n        top: constant(top),\n        translate: translate\n      };\n    };\n    var Position = r;\n\n    var isSafari = detect$3().browser.isSafari();\n    var get$3 = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom() : domGlobals.document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return Position(x, y);\n    };\n\n    var bounds = function (x, y, width, height) {\n      return {\n        x: constant(x),\n        y: constant(y),\n        width: constant(width),\n        height: constant(height),\n        right: constant(x + width),\n        bottom: constant(y + height)\n      };\n    };\n    var getBounds = function (_win) {\n      var win = _win === undefined ? domGlobals.window : _win;\n      var visualViewport = win['visualViewport'];\n      if (visualViewport !== undefined) {\n        return bounds(visualViewport.pageLeft, visualViewport.pageTop, visualViewport.width, visualViewport.height);\n      } else {\n        var doc = Element.fromDom(win.document);\n        var html = win.document.documentElement;\n        var scroll = get$3(doc);\n        var width = html.clientWidth;\n        var height = html.clientHeight;\n        return bounds(scroll.left(), scroll.top(), width, height);\n      }\n    };\n\n    var fireFullscreenStateChanged = function (editor, state) {\n      editor.fire('FullscreenStateChanged', { state: state });\n    };\n    var Events = { fireFullscreenStateChanged: fireFullscreenStateChanged };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var ancestors = function (scope, predicate, isRoot) {\n      return filter(parents(scope, isRoot), predicate);\n    };\n    var siblings$1 = function (scope, predicate) {\n      return filter(siblings(scope), predicate);\n    };\n\n    var all$1 = function (selector) {\n      return all(selector);\n    };\n    var ancestors$1 = function (scope, selector, isRoot) {\n      return ancestors(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var siblings$2 = function (scope, selector) {\n      return siblings$1(scope, function (e) {\n        return is(e, selector);\n      });\n    };\n\n    var attr = 'data-ephox-mobile-fullscreen-style';\n    var siblingStyles = 'display:none!important;';\n    var ancestorPosition = 'position:absolute!important;';\n    var ancestorStyles = 'top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;';\n    var bgFallback = 'background-color:rgb(255,255,255)!important;';\n    var isAndroid = global$2.os.isAndroid();\n    var matchColor = function (editorBody) {\n      var color = get$2(editorBody, 'background-color');\n      return color !== undefined && color !== '' ? 'background-color:' + color + '!important' : bgFallback;\n    };\n    var clobberStyles = function (container, editorBody) {\n      var gatherSibilings = function (element) {\n        var siblings = siblings$2(element, '*:not(.tox-silver-sink)');\n        return siblings;\n      };\n      var clobber = function (clobberStyle) {\n        return function (element) {\n          var styles = get$1(element, 'style');\n          var backup = styles === undefined ? 'no-styles' : styles.trim();\n          if (backup === clobberStyle) {\n            return;\n          } else {\n            set(element, attr, backup);\n            set(element, 'style', clobberStyle);\n          }\n        };\n      };\n      var ancestors = ancestors$1(container, '*');\n      var siblings = bind(ancestors, gatherSibilings);\n      var bgColor = matchColor(editorBody);\n      each(siblings, clobber(siblingStyles));\n      each(ancestors, clobber(ancestorPosition + ancestorStyles + bgColor));\n      var containerStyles = isAndroid === true ? '' : ancestorPosition;\n      clobber(containerStyles + ancestorStyles + bgColor)(container);\n    };\n    var restoreStyles = function () {\n      var clobberedEls = all$1('[' + attr + ']');\n      each(clobberedEls, function (element) {\n        var restore = get$1(element, attr);\n        if (restore !== 'no-styles') {\n          set(element, 'style', restore);\n        } else {\n          remove(element, 'style');\n        }\n        remove(element, attr);\n      });\n    };\n    var Thor = {\n      clobberStyles: clobberStyles,\n      restoreStyles: restoreStyles\n    };\n\n    var DOM = global$1.DOM;\n    var getScrollPos = function () {\n      var vp = getBounds(domGlobals.window);\n      return {\n        x: vp.x(),\n        y: vp.y()\n      };\n    };\n    var setScrollPos = function (pos) {\n      domGlobals.window.scrollTo(pos.x, pos.y);\n    };\n    var visualViewport = domGlobals.window['visualViewport'];\n    var isSafari$1 = global$2.browser.isSafari();\n    var viewportUpdate = !isSafari$1 || visualViewport === undefined ? {\n      bind: noop,\n      unbind: noop,\n      update: noop\n    } : function () {\n      var editorContainer = value();\n      var refreshScroll = function () {\n        domGlobals.document.body.scrollTop = 0;\n        domGlobals.document.documentElement.scrollTop = 0;\n      };\n      var refreshVisualViewport = function () {\n        domGlobals.window.requestAnimationFrame(function () {\n          editorContainer.on(function (container) {\n            return setAll(container, {\n              top: visualViewport.offsetTop + 'px',\n              left: visualViewport.offsetLeft + 'px',\n              height: visualViewport.height + 'px',\n              width: visualViewport.width + 'px'\n            });\n          });\n        });\n      };\n      var update = global$3.throttle(function () {\n        refreshScroll();\n        refreshVisualViewport();\n      }, 50);\n      var bind = function (element) {\n        editorContainer.set(element);\n        update();\n        visualViewport.addEventListener('resize', update);\n        visualViewport.addEventListener('scroll', update);\n      };\n      var unbind = function () {\n        editorContainer.on(function () {\n          visualViewport.removeEventListener('scroll', update);\n          visualViewport.removeEventListener('resize', update);\n        });\n        editorContainer.clear();\n      };\n      return {\n        bind: bind,\n        unbind: unbind\n      };\n    }();\n    var toggleFullscreen = function (editor, fullscreenState) {\n      var body = domGlobals.document.body;\n      var documentElement = domGlobals.document.documentElement;\n      var editorContainerStyle;\n      var editorContainer, iframe, iframeStyle;\n      editorContainer = editor.getContainer();\n      var editorContainerS = Element.fromDom(editorContainer);\n      var fullscreenInfo = fullscreenState.get();\n      var editorBody = Element.fromDom(editor.getBody());\n      var isTouch = global$2.deviceType.isTouch();\n      editorContainerStyle = editorContainer.style;\n      iframe = editor.getContentAreaContainer().firstChild;\n      iframeStyle = iframe.style;\n      if (!fullscreenInfo) {\n        var newFullScreenInfo = {\n          scrollPos: getScrollPos(),\n          containerWidth: editorContainerStyle.width,\n          containerHeight: editorContainerStyle.height,\n          containerTop: editorContainerStyle.top,\n          containerLeft: editorContainerStyle.left,\n          iframeWidth: iframeStyle.width,\n          iframeHeight: iframeStyle.height\n        };\n        if (isTouch) {\n          Thor.clobberStyles(editorContainerS, editorBody);\n        }\n        iframeStyle.width = iframeStyle.height = '100%';\n        editorContainerStyle.width = editorContainerStyle.height = '';\n        DOM.addClass(body, 'tox-fullscreen');\n        DOM.addClass(documentElement, 'tox-fullscreen');\n        DOM.addClass(editorContainer, 'tox-fullscreen');\n        viewportUpdate.bind(editorContainerS);\n        editor.on('remove', viewportUpdate.unbind);\n        fullscreenState.set(newFullScreenInfo);\n        Events.fireFullscreenStateChanged(editor, true);\n      } else {\n        iframeStyle.width = fullscreenInfo.iframeWidth;\n        iframeStyle.height = fullscreenInfo.iframeHeight;\n        editorContainerStyle.width = fullscreenInfo.containerWidth;\n        editorContainerStyle.height = fullscreenInfo.containerHeight;\n        editorContainerStyle.top = fullscreenInfo.containerTop;\n        editorContainerStyle.left = fullscreenInfo.containerLeft;\n        if (isTouch) {\n          Thor.restoreStyles();\n        }\n        DOM.removeClass(body, 'tox-fullscreen');\n        DOM.removeClass(documentElement, 'tox-fullscreen');\n        DOM.removeClass(editorContainer, 'tox-fullscreen');\n        setScrollPos(fullscreenInfo.scrollPos);\n        fullscreenState.set(null);\n        Events.fireFullscreenStateChanged(editor, false);\n        viewportUpdate.unbind();\n        editor.off('remove', viewportUpdate.unbind);\n      }\n    };\n    var Actions = { toggleFullscreen: toggleFullscreen };\n\n    var register = function (editor, fullscreenState) {\n      editor.addCommand('mceFullScreen', function () {\n        Actions.toggleFullscreen(editor, fullscreenState);\n      });\n    };\n    var Commands = { register: register };\n\n    var makeSetupHandler = function (editor, fullscreenState) {\n      return function (api) {\n        api.setActive(fullscreenState.get() !== null);\n        var editorEventCallback = function (e) {\n          return api.setActive(e.state);\n        };\n        editor.on('FullscreenStateChanged', editorEventCallback);\n        return function () {\n          return editor.off('FullscreenStateChanged', editorEventCallback);\n        };\n      };\n    };\n    var register$1 = function (editor, fullscreenState) {\n      editor.ui.registry.addToggleMenuItem('fullscreen', {\n        text: 'Fullscreen',\n        shortcut: 'Meta+Shift+F',\n        onAction: function () {\n          return editor.execCommand('mceFullScreen');\n        },\n        onSetup: makeSetupHandler(editor, fullscreenState)\n      });\n      editor.ui.registry.addToggleButton('fullscreen', {\n        tooltip: 'Fullscreen',\n        icon: 'fullscreen',\n        onAction: function () {\n          return editor.execCommand('mceFullScreen');\n        },\n        onSetup: makeSetupHandler(editor, fullscreenState)\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    function Plugin () {\n      global.add('fullscreen', function (editor) {\n        var fullscreenState = Cell(null);\n        if (editor.settings.inline) {\n          return Api.get(fullscreenState);\n        }\n        Commands.register(editor, fullscreenState);\n        Buttons.register(editor, fullscreenState);\n        editor.addShortcut('Meta+Shift+F', '', 'mceFullScreen');\n        return Api.get(fullscreenState);\n      });\n    }\n\n    Plugin();\n\n}(window));\n"]}