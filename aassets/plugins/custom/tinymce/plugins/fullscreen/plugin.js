!function(e){"use strict";var n,r,t,o,i=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return i(r())}}},u=tinymce.util.Tools.resolve("tinymce.PluginManager"),c={get:function(e){return{isFullscreen:function(){return null!==e.get()}}}},s=function(){},a=function(e){return function(){return e}},f=a(!1),l=a(!0),d=function(){return m},m=function(){var e=function(e){return e.isNone()},n=function(e){return e()},r=function(e){return e},t={fold:function(e,n){return e()},is:f,isSome:f,isNone:l,getOr:r,getOrThunk:n,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:a(null),getOrUndefined:a(void 0),or:r,orThunk:n,map:d,each:s,bind:d,exists:f,forall:l,filter:d,equals:e,equals_:e,toArray:function(){return[]},toString:a("none()")};return Object.freeze&&Object.freeze(t),t}(),v=function(e){var n=a(e),r=function(){return o},t=function(n){return n(e)},o={fold:function(n,r){return r(e)},is:function(n){return e===n},isSome:l,isNone:f,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:r,orThunk:r,map:function(n){return v(n(e))},each:function(n){n(e)},bind:t,exists:t,forall:t,filter:function(n){return n(e)?o:m},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(n){return n.is(e)},equals_:function(n,r){return n.fold(f,function(n){return r(e,n)})}};return o},h={some:v,none:d,from:function(e){return null==e?m:v(e)}},g=function(e){return function(n){return function(e){if(null===e)return"null";var n=typeof e;return"object"===n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n}(n)===e}},p=g("string"),w=g("array"),y=g("boolean"),S=g("function"),E=g("number"),O=Array.prototype.slice,N=Array.prototype.push,T=function(e,n){for(var r=e.length,t=new Array(r),o=0;o<r;o++){var i=e[o];t[o]=n(i,o)}return t},x=function(e,n){for(var r=0,t=e.length;r<t;r++){n(e[r],r)}},b=function(e,n){for(var r=[],t=0,o=e.length;t<o;t++){var i=e[t];n(i,t)&&r.push(i)}return r},D=function(e,n){return function(e){for(var n=[],r=0,t=e.length;r<t;++r){if(!w(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e);N.apply(n,e[r])}return n}(T(e,n))},C=(S(Array.from)&&Array.from,Object.keys),A=function(e,n){return-1!==e.indexOf(n)},_=function(e){return void 0!==e.style&&S(e.style.getPropertyValue)},F=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:a(e)}},M={fromHtml:function(n,r){var t=(r||e.document).createElement("div");if(t.innerHTML=n,!t.hasChildNodes()||t.childNodes.length>1)throw e.console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return F(t.childNodes[0])},fromTag:function(n,r){var t=(r||e.document).createElement(n);return F(t)},fromText:function(n,r){var t=(r||e.document).createTextNode(n);return F(t)},fromDom:F,fromPoint:function(e,n,r){var t=e.dom();return h.from(t.elementFromPoint(n,r)).map(F)}},k=(e.Node.ATTRIBUTE_NODE,e.Node.CDATA_SECTION_NODE,e.Node.COMMENT_NODE,e.Node.DOCUMENT_NODE),R=(e.Node.DOCUMENT_TYPE_NODE,e.Node.DOCUMENT_FRAGMENT_NODE,e.Node.ELEMENT_NODE),L=e.Node.TEXT_NODE,I=(e.Node.PROCESSING_INSTRUCTION_NODE,e.Node.ENTITY_REFERENCE_NODE,e.Node.ENTITY_NODE,e.Node.NOTATION_NODE,void 0!==e.window?e.window:Function("return this;")(),n=L,function(e){return function(e){return e.dom().nodeType}(e)===n}),P=function(n,r,t){!function(n,r,t){if(!(p(t)||y(t)||E(t)))throw e.console.error("Invalid call to Attr.set. Key ",r,":: Value ",t,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(r,t+"")}(n.dom(),r,t)},W=function(e,n){var r=e.dom().getAttribute(n);return null===r?void 0:r},B=function(e,n){e.dom().removeAttribute(n)},H=function(n,r){var t=n.dom();!function(e,n){for(var r=C(e),t=0,o=r.length;t<o;t++){var i=r[t];n(e[i],i)}}(r,function(n,r){!function(n,r,t){if(!p(t))throw e.console.error("Invalid call to CSS.set. Property ",r,":: Value ",t,":: Element ",n),new Error("CSS value must be a string: "+t);_(n)&&n.style.setProperty(r,t)}(t,r,n)})},U=function(n,r){var t=n.dom(),o=e.window.getComputedStyle(t).getPropertyValue(r),i=""!==o||function(e){var n=I(e)?e.dom().parentNode:e.dom();return null!=n&&n.ownerDocument.body.contains(n)}(n)?o:V(t,r);return null===i?void 0:i},V=function(e,n){return _(e)?e.style.getPropertyValue(n):""},j=function(){return q(0,0)},q=function(e,n){return{major:e,minor:n}},z={nu:q,detect:function(e,n){var r=String(n).toLowerCase();return 0===e.length?j():function(e,n){var r=function(e,n){for(var r=0;r<e.length;r++){var t=e[r];if(t.test(n))return t}}(e,n);if(!r)return{major:0,minor:0};var t=function(e){return Number(n.replace(r,"$"+e))};return q(t(1),t(2))}(e,r)},unknown:j},X=function(e,n){return function(){return n===e}},Y=function(e){var n=e.current;return{current:n,version:e.version,isEdge:X("Edge",n),isChrome:X("Chrome",n),isIE:X("IE",n),isOpera:X("Opera",n),isFirefox:X("Firefox",n),isSafari:X("Safari",n)}},G={unknown:function(){return Y({current:void 0,version:z.unknown()})},nu:Y,edge:a("Edge"),chrome:a("Chrome"),ie:a("IE"),opera:a("Opera"),firefox:a("Firefox"),safari:a("Safari")},$=function(e,n){return function(){return n===e}},K=function(e){var n=e.current;return{current:n,version:e.version,isWindows:$("Windows",n),isiOS:$("iOS",n),isAndroid:$("Android",n),isOSX:$("OSX",n),isLinux:$("Linux",n),isSolaris:$("Solaris",n),isFreeBSD:$("FreeBSD",n)}},J={unknown:function(){return K({current:void 0,version:z.unknown()})},nu:K,windows:a("Windows"),ios:a("iOS"),android:a("Android"),linux:a("Linux"),osx:a("OSX"),solaris:a("Solaris"),freebsd:a("FreeBSD")},Q=function(e,n){var r=String(n).toLowerCase();return function(e,n){for(var r=0,t=e.length;r<t;r++){var o=e[r];if(n(o,r))return h.some(o)}return h.none()}(e,function(e){return e.search(r)})},Z=function(e,n){return Q(e,n).map(function(e){var r=z.detect(e.versionRegexes,n);return{current:e.name,version:r}})},ee=function(e,n){return Q(e,n).map(function(e){var r=z.detect(e.versionRegexes,n);return{current:e.name,version:r}})},ne=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,re=function(e){return function(n){return A(n,e)}},te=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return A(e,"edge/")&&A(e,"chrome")&&A(e,"safari")&&A(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ne],search:function(e){return A(e,"chrome")&&!A(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return A(e,"msie")||A(e,"trident")}},{name:"Opera",versionRegexes:[ne,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:re("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:re("firefox")},{name:"Safari",versionRegexes:[ne,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(A(e,"safari")||A(e,"mobile/"))&&A(e,"applewebkit")}}],oe=[{name:"Windows",search:re("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return A(e,"iphone")||A(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:re("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:re("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:re("linux"),versionRegexes:[]},{name:"Solaris",search:re("sunos"),versionRegexes:[]},{name:"FreeBSD",search:re("freebsd"),versionRegexes:[]}],ie={browsers:a(te),oses:a(oe)},ue=function(e,n){var r=ie.browsers(),t=ie.oses(),o=Z(r,e).fold(G.unknown,G.nu),i=ee(t,e).fold(J.unknown,J.nu),u=function(e,n,r,t){var o=e.isiOS()&&!0===/ipad/i.test(r),i=e.isiOS()&&!o,u=e.isiOS()||e.isAndroid(),c=u||t("(pointer:coarse)"),s=o||!i&&u&&t("(min-device-width:768px)"),f=i||u&&!s,l=n.isSafari()&&e.isiOS()&&!1===/safari/i.test(r),d=!f&&!s&&!l;return{isiPad:a(o),isiPhone:a(i),isTablet:a(s),isPhone:a(f),isTouch:a(c),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:a(l),isDesktop:a(d)}}(i,o,e,n);return{browser:o,os:i,deviceType:u}},ce=i(ue(e.navigator.userAgent,function(n){return e.window.matchMedia(n).matches})),se=function(){return ce.get()},ae=function(e,n,r){return 0!=(e.compareDocumentPosition(n)&r)},fe=function(n,r){return ae(n,r,e.Node.DOCUMENT_POSITION_CONTAINED_BY)},le=R,de=k,me=function(e,n){var r=e.dom();if(r.nodeType!==le)return!1;var t=r;if(void 0!==t.matches)return t.matches(n);if(void 0!==t.msMatchesSelector)return t.msMatchesSelector(n);if(void 0!==t.webkitMatchesSelector)return t.webkitMatchesSelector(n);if(void 0!==t.mozMatchesSelector)return t.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")},ve=function(n,r){var t,o=void 0===r?e.document:r.dom();return(t=o).nodeType!==le&&t.nodeType!==de||0===t.childElementCount?[]:T(o.querySelectorAll(n),M.fromDom)},he=(se().browser.isIE(),function(e){return function(e){return h.from(e.dom().parentNode).map(M.fromDom)}(e).map(ge).map(function(n){return b(n,function(n){return r=n,!(e.dom()===r.dom());var r})}).getOr([])}),ge=function(e){return T(e.dom().childNodes,M.fromDom)},pe=(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n]}("element","offset"),function(e,n){return{left:a(e),top:a(n),translate:function(r,t){return pe(e+r,n+t)}}}),we=pe,ye=(se().browser.isSafari(),function(e,n,r,t){return{x:a(e),y:a(n),width:a(r),height:a(t),right:a(e+r),bottom:a(n+t)}}),Se=function(n){var r=void 0===n?e.window:n,t=r.visualViewport;if(void 0!==t)return ye(t.pageLeft,t.pageTop,t.width,t.height);var o=M.fromDom(r.document),i=r.document.documentElement,u=function(n){var r=void 0!==n?n.dom():e.document,t=r.body.scrollLeft||r.documentElement.scrollLeft,o=r.body.scrollTop||r.documentElement.scrollTop;return we(t,o)}(o),c=i.clientWidth,s=i.clientHeight;return ye(u.left(),u.top(),c,s)},Ee=function(e,n){e.fire("FullscreenStateChanged",{state:n})},Oe=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ne=tinymce.util.Tools.resolve("tinymce.Env"),Te=tinymce.util.Tools.resolve("tinymce.util.Delay"),xe=function(e,n,r){return b(function(e,n){for(var r=S(n)?n:f,t=e.dom(),o=[];null!==t.parentNode&&void 0!==t.parentNode;){var i=t.parentNode,u=M.fromDom(i);if(o.push(u),!0===r(u))break;t=i}return o}(e,r),n)},be=function(e,n,r){return xe(e,function(e){return me(e,n)},r)},De=function(e,n){return function(e,n){return b(he(e),n)}(e,function(e){return me(e,n)})},Ce="data-ephox-mobile-fullscreen-style",Ae="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",_e=Ne.os.isAndroid(),Fe=function(e,n){var r=function(e){return function(n){var r=W(n,"style"),t=void 0===r?"no-styles":r.trim();t!==e&&(P(n,Ce,t),P(n,"style",e))}},t=be(e,"*"),o=D(t,function(e){return De(e,"*:not(.tox-silver-sink)")}),i=function(e){var n=U(e,"background-color");return void 0!==n&&""!==n?"background-color:"+n+"!important":"background-color:rgb(255,255,255)!important;"}(n);x(o,r("display:none!important;")),x(t,r("position:absolute!important;"+Ae+i)),r((!0===_e?"":"position:absolute!important;")+Ae+i)(e)},Me=function(){var e=ve("["+Ce+"]");x(e,function(e){var n=W(e,Ce);"no-styles"!==n?P(e,"style",n):B(e,"style"),B(e,Ce)})},ke=Oe.DOM,Re=e.window.visualViewport,Le=Ne.browser.isSafari()&&void 0!==Re?(r=i(h.none()),t={clear:function(){r.set(h.none())},set:function(e){r.set(h.some(e))},isSet:function(){return r.get().isSome()},on:function(e){r.get().each(e)}},o=Te.throttle(function(){e.document.body.scrollTop=0,e.document.documentElement.scrollTop=0,e.window.requestAnimationFrame(function(){t.on(function(e){return H(e,{top:Re.offsetTop+"px",left:Re.offsetLeft+"px",height:Re.height+"px",width:Re.width+"px"})})})},50),{bind:function(e){t.set(e),o(),Re.addEventListener("resize",o),Re.addEventListener("scroll",o)},unbind:function(){t.on(function(){Re.removeEventListener("scroll",o),Re.removeEventListener("resize",o)}),t.clear()}}):{bind:s,unbind:s,update:s},Ie=function(n,r){var t,o,i,u=e.document.body,c=e.document.documentElement;o=n.getContainer();var s,a,f=M.fromDom(o),l=r.get(),d=M.fromDom(n.getBody()),m=Ne.deviceType.isTouch();if(t=o.style,i=n.getContentAreaContainer().firstChild.style,l)i.width=l.iframeWidth,i.height=l.iframeHeight,t.width=l.containerWidth,t.height=l.containerHeight,t.top=l.containerTop,t.left=l.containerLeft,m&&Me(),ke.removeClass(u,"tox-fullscreen"),ke.removeClass(c,"tox-fullscreen"),ke.removeClass(o,"tox-fullscreen"),s=l.scrollPos,e.window.scrollTo(s.x,s.y),r.set(null),Ee(n,!1),Le.unbind(),n.off("remove",Le.unbind);else{var v={scrollPos:(a=Se(e.window),{x:a.x(),y:a.y()}),containerWidth:t.width,containerHeight:t.height,containerTop:t.top,containerLeft:t.left,iframeWidth:i.width,iframeHeight:i.height};m&&Fe(f,d),i.width=i.height="100%",t.width=t.height="",ke.addClass(u,"tox-fullscreen"),ke.addClass(c,"tox-fullscreen"),ke.addClass(o,"tox-fullscreen"),Le.bind(f),n.on("remove",Le.unbind),r.set(v),Ee(n,!0)}},Pe={register:function(e,n){e.addCommand("mceFullScreen",function(){Ie(e,n)})}},We=function(e,n){return function(r){r.setActive(null!==n.get());var t=function(e){return r.setActive(e.state)};return e.on("FullscreenStateChanged",t),function(){return e.off("FullscreenStateChanged",t)}}},Be={register:function(e,n){e.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Meta+Shift+F",onAction:function(){return e.execCommand("mceFullScreen")},onSetup:We(e,n)}),e.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:function(){return e.execCommand("mceFullScreen")},onSetup:We(e,n)})}};u.add("fullscreen",function(e){var n=i(null);return e.settings.inline?c.get(n):(Pe.register(e,n),Be.register(e,n),e.addShortcut("Meta+Shift+F","","mceFullScreen"),c.get(n))})}(window);
//# sourceMappingURL=plugin.js.map
