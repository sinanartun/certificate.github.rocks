{"version":3,"sources":["pagebreak/plugin.min.js"],"names":["a","t","transparentSrc","n","tinymce","util","Tools","resolve","i","e","getParam","c","u","add","addCommand","settings","pagebreak_split_block","insertContent","g","ui","registry","addButton","icon","tooltip","onAction","execCommand","addMenuItem","text","s","o","RegExp","replace","on","content","serializer","addNodeFilter","length","attr","indexOf","r","parent","schema","getBlockElements","name","type","value","raw","remove","target","nodeName","dom","hasClass"],"mappings":"CAQC,WAAW,aAAgD,SAASA,IAAI,MAAM,aAAaC,EAAEC,eAAe,0EAA0E,IAAIC,EAAEC,QAAQC,KAAKC,MAAMC,QAAQ,yBAAyBN,EAAEG,QAAQC,KAAKC,MAAMC,QAAQ,eAAkGC,EAAE,SAASC,GAAG,OAAOA,EAAEC,SAAS,yBAAwB,IAAifC,EAAEX,EAAEY,EAAp4B,WAAa,MAAM,iBAA+6CT,EAAEU,IAAI,YAAY,SAASJ,GAAnc,IAASN,GAAzJ,SAASM,GAAGA,EAAEK,WAAW,eAAe,WAAWL,EAAEM,SAASC,sBAAsBP,EAAEQ,cAAc,MAAMN,IAAI,QAAQF,EAAEQ,cAAcN,QAAgdO,CAAET,GAA1U,SAASA,GAAGA,EAAEU,GAAGC,SAASC,UAAU,YAAY,CAACC,KAAK,aAAaC,QAAQ,aAAaC,SAAS,WAAW,OAAOf,EAAEgB,YAAY,mBAAmBhB,EAAEU,GAAGC,SAASM,YAAY,YAAY,CAACC,KAAK,aAAaL,KAAK,aAAaE,SAAS,WAAW,OAAOf,EAAEgB,YAAY,mBAAqEG,CAAEnB,GAAjlC,SAASoB,GAAG,IAAIlB,EAAIkB,EAA/InB,SAAS,sBAAsB,4BAAmHP,EAAE,IAAI2B,OAAOnB,EAAEoB,QAAQ,gCAAgC,SAAStB,GAAG,MAAM,KAAKA,IAAI,MAAMoB,EAAEG,GAAG,mBAAmB,SAASvB,GAAGA,EAAEwB,QAAQxB,EAAEwB,QAAQF,QAAQ5B,EAAEH,OAAO6B,EAAEG,GAAG,UAAU,WAAWH,EAAEK,WAAWC,cAAc,MAAM,SAAS1B,GAAG,IAAI,IAAIN,EAAEH,EAAEC,EAAEQ,EAAE2B,OAAOnC,KAAK,IAAID,GAAGG,EAAEM,EAAER,IAAIoC,KAAK,YAAY,IAAIrC,EAAEsC,QAAQ,iBAAiB,CAAC,IAAIC,EAAEpC,EAAEqC,OAAO,GAAGX,EAAEY,OAAOC,mBAAmBH,EAAEI,OAAOnC,EAAEqB,GAAG,CAACU,EAAEK,KAAK,EAAEL,EAAEM,MAAMlC,EAAE4B,EAAEO,KAAI,EAAG3C,EAAE4C,SAAS,SAAS5C,EAAEyC,KAAK,EAAEzC,EAAE0C,MAAMlC,EAAER,EAAE2C,KAAI,OAAmnBjB,CAAEpB,IAAzcN,EAA8cM,GAAzcuB,GAAG,cAAc,SAASvB,GAAG,QAAQA,EAAEuC,OAAOC,UAAU9C,EAAE+C,IAAIC,SAAS1C,EAAEuC,OAAOpC,OAAOH,EAAEkC,KAAK,iBAA9pC","file":"plugin.min.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.0 (2019-10-17)\n */\n!function(){\"use strict\";function e(){return\"mce-pagebreak\"}function a(){return'<img src=\"'+t.transparentSrc+'\" class=\"mce-pagebreak\" data-mce-resize=\"false\" data-mce-placeholder />'}var n=tinymce.util.Tools.resolve(\"tinymce.PluginManager\"),t=tinymce.util.Tools.resolve(\"tinymce.Env\"),r=function(e){return e.getParam(\"pagebreak_separator\",\"\\x3c!-- pagebreak --\\x3e\")},i=function(e){return e.getParam(\"pagebreak_split_block\",!1)},o=function(o){var c=r(o),n=new RegExp(c.replace(/[\\?\\.\\*\\[\\]\\(\\)\\{\\}\\+\\^\\$\\:]/g,function(e){return\"\\\\\"+e}),\"gi\");o.on(\"BeforeSetContent\",function(e){e.content=e.content.replace(n,a())}),o.on(\"PreInit\",function(){o.serializer.addNodeFilter(\"img\",function(e){for(var n,a,t=e.length;t--;)if((a=(n=e[t]).attr(\"class\"))&&-1!==a.indexOf(\"mce-pagebreak\")){var r=n.parent;if(o.schema.getBlockElements()[r.name]&&i(o)){r.type=3,r.value=c,r.raw=!0,n.remove();continue}n.type=3,n.value=c,n.raw=!0}})})},c=a,u=e,g=function(e){e.addCommand(\"mcePageBreak\",function(){e.settings.pagebreak_split_block?e.insertContent(\"<p>\"+c()+\"</p>\"):e.insertContent(c())})},m=function(n){n.on(\"ResolveName\",function(e){\"IMG\"===e.target.nodeName&&n.dom.hasClass(e.target,u())&&(e.name=\"pagebreak\")})},s=function(e){e.ui.registry.addButton(\"pagebreak\",{icon:\"page-break\",tooltip:\"Page break\",onAction:function(){return e.execCommand(\"mcePageBreak\")}}),e.ui.registry.addMenuItem(\"pagebreak\",{text:\"Page break\",icon:\"page-break\",onAction:function(){return e.execCommand(\"mcePageBreak\")}})};!function l(){n.add(\"pagebreak\",function(e){g(e),s(e),o(e),m(e)})}()}();"]}