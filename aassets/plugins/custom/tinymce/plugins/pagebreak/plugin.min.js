!function(){"use strict";function e(){return'<img src="'+n.transparentSrc+'" class="mce-pagebreak" data-mce-resize="false" data-mce-placeholder />'}var a=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.Env"),t=function(e){return e.getParam("pagebreak_split_block",!1)},r=e,o=function(){return"mce-pagebreak"};a.add("pagebreak",function(a){var n;(function(e){e.addCommand("mcePageBreak",function(){e.settings.pagebreak_split_block?e.insertContent("<p>"+r()+"</p>"):e.insertContent(r())})})(a),function(e){e.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:function(){return e.execCommand("mcePageBreak")}}),e.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:function(){return e.execCommand("mcePageBreak")}})}(a),function(a){var n=a.getParam("pagebreak_separator","\x3c!-- pagebreak --\x3e"),r=new RegExp(n.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(e){return"\\"+e}),"gi");a.on("BeforeSetContent",function(a){a.content=a.content.replace(r,e())}),a.on("PreInit",function(){a.serializer.addNodeFilter("img",function(e){for(var r,o,c=e.length;c--;)if((o=(r=e[c]).attr("class"))&&-1!==o.indexOf("mce-pagebreak")){var i=r.parent;if(a.schema.getBlockElements()[i.name]&&t(a)){i.type=3,i.value=n,i.raw=!0,r.remove();continue}r.type=3,r.value=n,r.raw=!0}})})}(a),(n=a).on("ResolveName",function(e){"IMG"===e.target.nodeName&&n.dom.hasClass(e.target,o())&&(e.name="pagebreak")})})}();
//# sourceMappingURL=plugin.min.js.map
