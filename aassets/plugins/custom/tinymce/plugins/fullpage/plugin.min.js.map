{"version":3,"sources":["fullpage/plugin.min.js"],"names":["m","f","t","e","validate","root_name","parse","g","replace","toLowerCase","o","i","n","get","set","clone","tinymce","util","Tools","resolve","p","h","y","v","getParam","a","c","u","b","C","Object","prototype","hasOwnProperty","k","Array","arguments","length","Error","l","r","call","attr","fontface","fontsize","firstChild","type","xml_pi","exec","value","docencoding","getAll","doctype","title","each","langcode","stylesheets","push","langdir","style","visited_color","link_color","active_color","keywords","description","robots","author","windowManager","open","size","body","items","name","label","buttons","text","primary","initialData","onSubmit","getData","dom","undefined","s","insert","append","remove","substring","shortEnded","empty","split","d","rel","href","setAttribs","getBody","dir","vLink","link","aLink","indent","indent_before","indent_after","serialize","indexOf","x","extend","close","T","O","_","D","on","selection","escape","A","settings","protect","content","format","source_view","trim","getDoc","getElementsByTagName","add","id","appendChild","document","createTextNode","getAttribute","data-mce-fullpage","parentNode","removeChild","unescape","P","addCommand","w","ui","registry","addButton","tooltip","icon","onAction","execCommand","addMenuItem","E","window"],"mappings":"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","file":"plugin.min.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.0 (2019-10-17)\n */\n!function(m){\"use strict\";function f(t){return e({validate:!1,root_name:\"#document\"}).parse(t)}function g(t){return t.replace(/<\\/?[A-Z]+/g,function(t){return t.toLowerCase()})}var o,i=function(t){function e(){return n}var n=t;return{get:e,set:function(t){n=t},clone:function(){return i(e())}}},t=tinymce.util.Tools.resolve(\"tinymce.PluginManager\"),p=tinymce.util.Tools.resolve(\"tinymce.util.Tools\"),e=tinymce.util.Tools.resolve(\"tinymce.html.DomParser\"),h=tinymce.util.Tools.resolve(\"tinymce.html.Node\"),y=tinymce.util.Tools.resolve(\"tinymce.html.Serializer\"),v=function(t){return t.getParam(\"fullpage_hide_in_source_view\")},r=function(t){return t.getParam(\"fullpage_default_xml_pi\")},a=function(t){return t.getParam(\"fullpage_default_encoding\")},c=function(t){return t.getParam(\"fullpage_default_font_family\")},u=function(t){return t.getParam(\"fullpage_default_font_size\")},s=function(t){return t.getParam(\"fullpage_default_text_color\")},d=function(t){return t.getParam(\"fullpage_default_title\")},_=function(t){return t.getParam(\"fullpage_default_doctype\",\"<!DOCTYPE html>\")},b=f,n=function(t,e){var n,i,l=f(e),r={};function o(t,e){return t.attr(e)||\"\"}return r.fontface=c(t),r.fontsize=u(t),7===(n=l.firstChild).type&&(r.xml_pi=!0,(i=/encoding=\"([^\"]+)\"/.exec(n.value))&&(r.docencoding=i[1])),(n=l.getAll(\"#doctype\")[0])&&(r.doctype=\"<!DOCTYPE\"+n.value+\">\"),(n=l.getAll(\"title\")[0])&&n.firstChild&&(r.title=n.firstChild.value),p.each(l.getAll(\"meta\"),function(t){var e,n=t.attr(\"name\"),i=t.attr(\"http-equiv\");n?r[n.toLowerCase()]=t.attr(\"content\"):\"Content-Type\"===i&&(e=/charset\\s*=\\s*(.*)\\s*/gi.exec(t.attr(\"content\")))&&(r.docencoding=e[1])}),(n=l.getAll(\"html\")[0])&&(r.langcode=o(n,\"lang\")||o(n,\"xml:lang\")),r.stylesheets=[],p.each(l.getAll(\"link\"),function(t){\"stylesheet\"===t.attr(\"rel\")&&r.stylesheets.push(t.attr(\"href\"))}),(n=l.getAll(\"body\")[0])&&(r.langdir=o(n,\"dir\"),r.style=o(n,\"style\"),r.visited_color=o(n,\"vlink\"),r.link_color=o(n,\"link\"),r.active_color=o(n,\"alink\")),r},x=function(t,r,e){var o,n,i,a,l,c=t.dom;function u(t,e,n){t.attr(e,n||undefined)}function s(t){n.firstChild?n.insert(t,n.firstChild):n.append(t)}o=f(e),(n=o.getAll(\"head\")[0])||(a=o.getAll(\"html\")[0],n=new h(\"head\",1),a.firstChild?a.insert(n,a.firstChild,!0):a.append(n)),a=o.firstChild,r.xml_pi?(l='version=\"1.0\"',r.docencoding&&(l+=' encoding=\"'+r.docencoding+'\"'),7!==a.type&&(a=new h(\"xml\",7),o.insert(a,o.firstChild,!0)),a.value=l):a&&7===a.type&&a.remove(),a=o.getAll(\"#doctype\")[0],r.doctype?(a||(a=new h(\"#doctype\",10),r.xml_pi?o.insert(a,o.firstChild):s(a)),a.value=r.doctype.substring(9,r.doctype.length-1)):a&&a.remove(),a=null,p.each(o.getAll(\"meta\"),function(t){\"Content-Type\"===t.attr(\"http-equiv\")&&(a=t)}),r.docencoding?(a||((a=new h(\"meta\",1)).attr(\"http-equiv\",\"Content-Type\"),a.shortEnded=!0,s(a)),a.attr(\"content\",\"text/html; charset=\"+r.docencoding)):a&&a.remove(),a=o.getAll(\"title\")[0],r.title?(a?a.empty():s(a=new h(\"title\",1)),a.append(new h(\"#text\",3)).value=r.title):a&&a.remove(),p.each(\"keywords,description,author,copyright,robots\".split(\",\"),function(t){var e,n,i=o.getAll(\"meta\"),l=r[t];for(e=0;e<i.length;e++)if((n=i[e]).attr(\"name\")===t)return void(l?n.attr(\"content\",l):n.remove());l&&((a=new h(\"meta\",1)).attr(\"name\",t),a.attr(\"content\",l),a.shortEnded=!0,s(a))});var d={};return p.each(o.getAll(\"link\"),function(t){\"stylesheet\"===t.attr(\"rel\")&&(d[t.attr(\"href\")]=t)}),p.each(r.stylesheets,function(t){d[t]||((a=new h(\"link\",1)).attr({rel:\"stylesheet\",text:\"text/css\",href:t}),a.shortEnded=!0,s(a)),delete d[t]}),p.each(d,function(t){t.remove()}),(a=o.getAll(\"body\")[0])&&(u(a,\"dir\",r.langdir),u(a,\"style\",r.style),u(a,\"vlink\",r.visited_color),u(a,\"link\",r.link_color),u(a,\"alink\",r.active_color),c.setAttribs(t.getBody(),{style:r.style,dir:r.dir,vLink:r.visited_color,link:r.link_color,aLink:r.active_color})),(a=o.getAll(\"html\")[0])&&(u(a,\"lang\",r.langcode),u(a,\"xml:lang\",r.langcode)),n.firstChild||n.remove(),(i=y({validate:!1,indent:!0,indent_before:\"head,html,body,meta,title,script,link,style\",indent_after:\"head,html,body,meta,title,script,link,style\"}).serialize(o)).substring(0,i.indexOf(\"</body>\"))},C=Object.prototype.hasOwnProperty,k=(o=function(t,e){return e},function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];if(0===t.length)throw new Error(\"Can't merge zero objects\");for(var n={},i=0;i<t.length;i++){var l=t[i];for(var r in l)C.call(l,r)&&(n[r]=o(n[r],l[r]))}return n}),l=function(i,l){var r=n(i,l.get()),t=k({title:\"\",keywords:\"\",description:\"\",robots:\"\",author:\"\",docencoding:\"\"},r);i.windowManager.open({title:\"Metadata and Document Properties\",size:\"normal\",body:{type:\"panel\",items:[{name:\"title\",type:\"input\",label:\"Title\"},{name:\"keywords\",type:\"input\",label:\"Keywords\"},{name:\"description\",type:\"input\",label:\"Description\"},{name:\"robots\",type:\"input\",label:\"Robots\"},{name:\"author\",type:\"input\",label:\"Author\"},{name:\"docencoding\",type:\"input\",label:\"Encoding\"}]},buttons:[{type:\"cancel\",name:\"cancel\",text:\"Cancel\"},{type:\"submit\",name:\"save\",text:\"Save\",primary:!0}],initialData:t,onSubmit:function(t){var e=t.getData(),n=x(i,p.extend(r,e),l.get());l.set(n),t.close()}})},w=function(t,e){t.addCommand(\"mceFullPageProperties\",function(){l(t,e)})},A=function(t,e){return p.each(t,function(t){e=e.replace(t,function(t){return\"\\x3c!--mce:protected \"+escape(t)+\"--\\x3e\"})}),e},P=function(t){return t.replace(/<!--mce:protected ([\\s\\S]*?)-->/g,function(t,e){return unescape(e)})},T=p.each,O=function(t){var e,n=\"\",i=\"\";if(r(t)){var l=a(t);n+='<?xml version=\"1.0\" encoding=\"'+(l||\"ISO-8859-1\")+'\" ?>\\n'}return n+=_(t),n+=\"\\n<html>\\n<head>\\n\",(e=d(t))&&(n+=\"<title>\"+e+\"</title>\\n\"),(e=a(t))&&(n+='<meta http-equiv=\"Content-Type\" content=\"text/html; charset='+e+'\" />\\n'),(e=c(t))&&(i+=\"font-family: \"+e+\";\"),(e=u(t))&&(i+=\"font-size: \"+e+\";\"),(e=s(t))&&(i+=\"color: \"+e+\";\"),n+=\"</head>\\n<body\"+(i?' style=\"'+i+'\"':\"\")+\">\\n\"},D=function(e,n,i){e.on(\"BeforeSetContent\",function(t){!function(t,e,n,i){var l,r,o,a,c=\"\",u=t.dom;if(!(i.selection||(o=A(t.settings.protect,i.content),\"raw\"===i.format&&e.get()||i.source_view&&v(t)))){0!==o.length||i.source_view||(o=p.trim(e.get())+\"\\n\"+p.trim(o)+\"\\n\"+p.trim(n.get())),-1!==(l=(o=o.replace(/<(\\/?)BODY/gi,\"<$1body\")).indexOf(\"<body\"))?(l=o.indexOf(\">\",l),e.set(g(o.substring(0,l+1))),-1===(r=o.indexOf(\"</body\",l))&&(r=o.length),i.content=p.trim(o.substring(l+1,r)),n.set(g(o.substring(r)))):(e.set(O(t)),n.set(\"\\n</body>\\n</html>\")),a=b(e.get()),T(a.getAll(\"style\"),function(t){t.firstChild&&(c+=t.firstChild.value)});var s=a.getAll(\"body\")[0];s&&u.setAttribs(t.getBody(),{style:s.attr(\"style\")||\"\",dir:s.attr(\"dir\")||\"\",vLink:s.attr(\"vlink\")||\"\",link:s.attr(\"link\")||\"\",aLink:s.attr(\"alink\")||\"\"}),u.remove(\"fullpage_styles\");var d=t.getDoc().getElementsByTagName(\"head\")[0];if(c)u.add(d,\"style\",{id:\"fullpage_styles\"}).appendChild(m.document.createTextNode(c));var f={};p.each(d.getElementsByTagName(\"link\"),function(t){\"stylesheet\"===t.rel&&t.getAttribute(\"data-mce-fullpage\")&&(f[t.href]=t)}),p.each(a.getAll(\"link\"),function(t){var e=t.attr(\"href\");if(!e)return!0;f[e]||\"stylesheet\"!==t.attr(\"rel\")||u.add(d,\"link\",{rel:\"stylesheet\",text:\"text/css\",href:e,\"data-mce-fullpage\":\"1\"}),delete f[e]}),p.each(f,function(t){t.parentNode.removeChild(t)})}}(e,n,i,t)}),e.on(\"GetContent\",function(t){!function(t,e,n,i){i.selection||i.source_view&&v(t)||(i.content=P(p.trim(e)+\"\\n\"+p.trim(i.content)+\"\\n\"+p.trim(n)))}(e,n.get(),i.get(),t)})},E=function(t){t.ui.registry.addButton(\"fullpage\",{tooltip:\"Metadata and document properties\",icon:\"document-properties\",onAction:function(){t.execCommand(\"mceFullPageProperties\")}}),t.ui.registry.addMenuItem(\"fullpage\",{text:\"Metadata and document properties\",icon:\"document-properties\",onAction:function(){t.execCommand(\"mceFullPageProperties\")}})};!function z(){t.add(\"fullpage\",function(t){var e=i(\"\"),n=i(\"\");w(t,e),E(t),D(t,e,n)})}()}(window);"]}