!function(){"use strict";function t(t){return function(){return t}}function n(){return g}var e,r=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),i=tinymce.util.Tools.resolve("tinymce.EditorManager"),u=tinymce.util.Tools.resolve("tinymce.Env"),c=tinymce.util.Tools.resolve("tinymce.util.Tools"),s=function(t){return t.getParam("importcss_merge_classes")},a=function(t){return t.getParam("importcss_exclusive")},l=function(t){return t.getParam("importcss_selector_converter")},f=function(t){return t.getParam("importcss_append")},m=t(!1),p=t(!0),g=(e={fold:function(t,n){return t()},is:m,isSome:m,isNone:p,getOr:d,getOrThunk:v,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:t(null),getOrUndefined:t(void 0),or:d,orThunk:v,map:n,each:function(){},bind:n,exists:m,forall:p,filter:n,equals:y,equals_:y,toArray:function(){return[]},toString:t("none()")},Object.freeze&&Object.freeze(e),e);function y(t){return t.isNone()}function v(t){return t()}function d(t){return t}function h(t){return function(n){return function(t){if(null===t)return"null";var n=typeof t;return"object"==n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n}(n)===t}}function _(t){return"string"==typeof t?function(n){return-1!==n.indexOf(t)}:t instanceof RegExp?function(n){return t.test(n)}:t}function x(t,n,e){var r=[],o={};c.each(t.contentCSS,function(t){o[t]=!0}),e=e||function(t,n){return n||o[t]};try{c.each(n.styleSheets,function(n){!function n(o,s){var a,l=o.href;if((l=function(t){var n=u.cacheSuffix;return"string"==typeof t&&(t=t.replace("?"+n,"").replace("&"+n,"")),t}(l))&&e(l,s)&&!function(t,n){var e=t.settings,r=!1!==e.skin&&(e.skin||"oxide");if(r){var o=e.skin_url?t.documentBaseURI.toAbsolute(e.skin_url):i.baseURL+"/skins/ui/"+r,u=i.baseURL+"/skins/content/";return n===o+"/content"+(t.inline?".inline":"")+".min.css"||-1!==n.indexOf(u)}return!1}(t,l)){c.each(o.imports,function(t){n(t,!0)});try{a=o.cssRules||o.rules}catch(t){}c.each(a,function(t){t.styleSheet?n(t.styleSheet,!0):t.selectorText&&c.each(t.selectorText.split(","),function(t){r.push(c.trim(t))})})}}(n)})}catch(t){}return r}function O(t,n){var e,r=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(n);if(r){var o=r[1],i=r[2].substr(1).split(".").join(" "),u=c.makeMap("a,img");return r[1]?(e={title:n},t.schema.getTextBlockElements()[o]?e.block=o:t.schema.getBlockElements()[o]||u[o.toLowerCase()]?e.selector=o:e.inline=o):r[2]&&(e={inline:"span",title:n.substr(1),classes:i}),!1!==s(t)?e.classes=i:e.attributes={class:i},e}}function T(t,n){return null===n||!1!==a(t)}var b=h("array"),k=h("function"),S=(Array.prototype.slice,Array.prototype.push),A=(k(Array.from)&&Array.from,O),P=function(t){t.on("init",function(n){function e(n,e){if(function(n,e,r,o){return!(T(t,r)?e in o:e in r.selectors)}(0,n,e,i)){!function(n,e,r,o){T(t,r)?o[e]=!0:r.selectors[e]=!0}(0,n,e,i);var r=function(t,n,e,r){return(r&&r.selector_converter?r.selector_converter:l(t)?l(t):function(){return O(t,e)}).call(n,e,r)}(t,t.plugins.importcss,n,e);if(r){var u=r.name||o.DOM.uniqueId();return t.formatter.register(u,r),c.extend({},{title:r.title,format:u})}}return null}var r=function(){var t=[],n=[],e={};return{addItemToGroup:function(t,r){e[t]?e[t].push(r):(n.push(t),e[t]=[r])},addItem:function(n){t.push(n)},toFormats:function(){return function(t,n){return function(t){for(var n=[],e=0,r=t.length;e<r;++e){if(!b(t[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+t);S.apply(n,t[e])}return n}(function(t,n){for(var e=t.length,r=new Array(e),o=0;o<e;o++){var i=t[o];r[o]=n(i,o)}return r}(t,n))}(n,function(t){var n=e[t];return 0===n.length?[]:[{title:t,items:n}]}).concat(t)}}}(),i={},u=_(function(t){return t.getParam("importcss_selector_filter")}(t)),s=function(t){return c.map(t,function(t){return c.extend({},t,{original:t,selectors:{},filter:_(t.filter),item:{text:t.title,menu:[]}})})}(function(t){return t.getParam("importcss_groups")}(t));c.each(x(t,t.getDoc(),_(function(t){return t.getParam("importcss_file_filter")}(t))),function(t){if(-1===t.indexOf(".mce-")&&(!u||u(t))){var n=function(t,n){return c.grep(t,function(t){return!t.filter||t.filter(n)})}(s,t);if(0<n.length)c.each(n,function(n){var o=e(t,n);o&&r.addItemToGroup(n.title,o)});else{var o=e(t,null);o&&r.addItem(o)}}});var a=r.toFormats();t.fire("addStyleModifications",{items:a,replace:!f(t)})})};r.add("importcss",function(t){return P(t),n=t,{convertSelectorToFormat:function(t){return A(n,t)}};var n})}();
//# sourceMappingURL=plugin.min.js.map
