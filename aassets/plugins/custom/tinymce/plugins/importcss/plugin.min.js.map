{"version":3,"sources":["importcss/plugin.min.js"],"names":["n","t","e","h","r","o","tinymce","util","Tools","resolve","a","f","l","m","c","getParam","i","p","v","u","s","fold","is","isSome","isNone","getOr","O","getOrThunk","x","getOrDie","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","equals","_","equals_","toArray","toString","Object","freeze","T","Array","prototype","isPrototypeOf","constructor","name","String","k","indexOf","RegExp","test","S","contentCSS","styleSheets","href","cacheSuffix","replace","settings","skin","skin_url","documentBaseURI","toAbsolute","baseURL","inline","imports","cssRules","rules","styleSheet","selectorText","split","push","trim","A","exec","substr","join","makeMap","title","schema","getTextBlockElements","block","getBlockElements","toLowerCase","selector","classes","attributes","class","P","w","E","M","slice","j","from","D","on","selectors","selector_converter","call","plugins","importcss","DOM","uniqueId","formatter","register","extend","format","addItemToGroup","addItem","toFormats","length","apply","b","items","concat","g","original","item","text","menu","y","getDoc","d","grep","fire","add","convertSelectorToFormat"],"mappings":"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","file":"plugin.min.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.0 (2019-10-17)\n */\n!function(){\"use strict\";function t(){}function n(t){return function(){return t}}function e(){return h}var r,o=tinymce.util.Tools.resolve(\"tinymce.PluginManager\"),a=tinymce.util.Tools.resolve(\"tinymce.dom.DOMUtils\"),f=tinymce.util.Tools.resolve(\"tinymce.EditorManager\"),l=tinymce.util.Tools.resolve(\"tinymce.Env\"),m=tinymce.util.Tools.resolve(\"tinymce.util.Tools\"),c=function(t){return t.getParam(\"importcss_merge_classes\")},i=function(t){return t.getParam(\"importcss_exclusive\")},p=function(t){return t.getParam(\"importcss_selector_converter\")},g=function(t){return t.getParam(\"importcss_selector_filter\")},y=function(t){return t.getParam(\"importcss_groups\")},v=function(t){return t.getParam(\"importcss_append\")},d=function(t){return t.getParam(\"importcss_file_filter\")},u=n(!1),s=n(!0),h=(r={fold:function(t,n){return t()},is:u,isSome:u,isNone:s,getOr:O,getOrThunk:x,getOrDie:function(t){throw new Error(t||\"error: getOrDie called on none.\")},getOrNull:n(null),getOrUndefined:n(undefined),or:O,orThunk:x,map:e,each:t,bind:e,exists:u,forall:s,filter:e,equals:_,equals_:_,toArray:function(){return[]},toString:n(\"none()\")},Object.freeze&&Object.freeze(r),r);function _(t){return t.isNone()}function x(t){return t()}function O(t){return t}function T(n){return function(t){return function(t){if(null===t)return\"null\";var n=typeof t;return\"object\"==n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&\"Array\"===t.constructor.name)?\"array\":\"object\"==n&&(String.prototype.isPrototypeOf(t)||t.constructor&&\"String\"===t.constructor.name)?\"string\":n}(t)===n}}function b(t,n){return function(t){for(var n=[],e=0,r=t.length;e<r;++e){if(!w(t[e]))throw new Error(\"Arr.flatten item \"+e+\" was not an array, input: \"+t);M.apply(n,t[e])}return n}(function(t,n){for(var e=t.length,r=new Array(e),o=0;o<e;o++){var i=t[o];r[o]=n(i,o)}return r}(t,n))}function k(n){return\"string\"==typeof n?function(t){return-1!==t.indexOf(n)}:n instanceof RegExp?function(t){return n.test(t)}:n}function S(i,t,u){var c=[],e={};function s(t,n){var e,r=t.href;if((r=function(t){var n=l.cacheSuffix;return\"string\"==typeof t&&(t=t.replace(\"?\"+n,\"\").replace(\"&\"+n,\"\")),t}(r))&&u(r,n)&&!function(t,n){var e=t.settings,r=!1!==e.skin&&(e.skin||\"oxide\");if(r){var o=e.skin_url?t.documentBaseURI.toAbsolute(e.skin_url):f.baseURL+\"/skins/ui/\"+r,i=f.baseURL+\"/skins/content/\";return n===o+\"/content\"+(t.inline?\".inline\":\"\")+\".min.css\"||-1!==n.indexOf(i)}return!1}(i,r)){m.each(t.imports,function(t){s(t,!0)});try{e=t.cssRules||t.rules}catch(o){}m.each(e,function(t){t.styleSheet?s(t.styleSheet,!0):t.selectorText&&m.each(t.selectorText.split(\",\"),function(t){c.push(m.trim(t))})})}}m.each(i.contentCSS,function(t){e[t]=!0}),u=u||function(t,n){return n||e[t]};try{m.each(t.styleSheets,function(t){s(t)})}catch(n){}return c}function A(t,n){var e,r=/^(?:([a-z0-9\\-_]+))?(\\.[a-z0-9_\\-\\.]+)$/i.exec(n);if(r){var o=r[1],i=r[2].substr(1).split(\".\").join(\" \"),u=m.makeMap(\"a,img\");return r[1]?(e={title:n},t.schema.getTextBlockElements()[o]?e.block=o:t.schema.getBlockElements()[o]||u[o.toLowerCase()]?e.selector=o:e.inline=o):r[2]&&(e={inline:\"span\",title:n.substr(1),classes:i}),!1!==c(t)?e.classes=i:e.attributes={\"class\":i},e}}function P(t,n){return null===n||!1!==i(t)}var w=T(\"array\"),E=T(\"function\"),I=Array.prototype.slice,M=Array.prototype.push,j=(E(Array.from)&&Array.from,A),D=function(s){s.on(\"init\",function(t){function r(t,n){if(function(t,n,e,r){return!(P(t,e)?n in r:n in e.selectors)}(s,t,n,i)){!function(t,n,e,r){P(t,e)?r[n]=!0:e.selectors[n]=!0}(s,t,n,i);var e=function(t,n,e,r){return(r&&r.selector_converter?r.selector_converter:p(t)?p(t):function(){return A(t,e)}).call(n,e,r)}(s,s.plugins.importcss,t,n);if(e){var r=e.name||a.DOM.uniqueId();return s.formatter.register(r,e),m.extend({},{title:e.title,format:r})}}return null}var o=function(){var n=[],e=[],r={};return{addItemToGroup:function(t,n){r[t]?r[t].push(n):(e.push(t),r[t]=[n])},addItem:function(t){n.push(t)},toFormats:function(){return b(e,function(t){var n=r[t];return 0===n.length?[]:[{title:t,items:n}]}).concat(n)}}}(),i={},u=k(g(s)),c=function(t){return m.map(t,function(t){return m.extend({},t,{original:t,selectors:{},filter:k(t.filter),item:{text:t.title,menu:[]}})})}(y(s));m.each(S(s,s.getDoc(),k(d(s))),function(e){if(-1===e.indexOf(\".mce-\")&&(!u||u(e))){var t=function(t,n){return m.grep(t,function(t){return!t.filter||t.filter(n)})}(c,e);if(0<t.length)m.each(t,function(t){var n=r(e,t);n&&o.addItemToGroup(t.title,n)});else{var n=r(e,null);n&&o.addItem(n)}}});var n=o.toFormats();s.fire(\"addStyleModifications\",{items:n,replace:!v(s)})})},R=function(n){return{convertSelectorToFormat:function(t){return j(n,t)}}};!function U(){o.add(\"importcss\",function(t){return D(t),R(t)})}()}();"]}