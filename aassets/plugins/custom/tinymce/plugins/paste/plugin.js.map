{"version":3,"sources":["paste/plugin.js"],"names":["domGlobals","eq","call","id","me","type","Cell","initial","value","get","set","v","clone","global$1","tinymce","util","Tools","resolve","DetectProPlugin","hasProPlugin","editor","test","settings","plugins","window","console","log","Api","clipboard","quirks","Events","html","internal","isWordHtml","fire","content","wordContent","node","state","ieFake","Actions","pasteFormat","focus","Commands","register","addCommand","ui","pasteHtml","text","pasteText","noop","constant","never","always","none","NONE","o","isNone","fold","n","s","is","isSome","getOr","getOrThunk","thunk","getOrDie","msg","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","equals","equals_","toArray","toString","Object","freeze","some","a","constant_a","self","f","elementEq","b","Option","from","isFunction","x","t","Array","prototype","isPrototypeOf","constructor","name","String","typeOf","nativeSlice","slice","xs","len","length","r","i","from$1","exports$1","module","exports","define","require","amd","global","this","EphoxContactWrapper","e","c","u","code","p","1","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","defaultClearTimeout","runTimeout","fun","setTimeout","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","run","marker","runClearTimeout","Item","array","nextTick","args","arguments","push","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","2","setImmediate","root","setTimeoutFunc","Promise","fn","TypeError","_state","_handled","_value","_deferreds","doResolve","handle","deferred","_immediateFn","cb","onFulfilled","onRejected","ret","reject","promise","newValue","then","finale","thisArg","_unhandledRejectionFn","Handler","done","reason","ex","prom","all","arr","remaining","res","val","race","values","err","warn","_setImmediateFn","_setUnhandledRejectionFn","timers","3","clearImmediate","Function","immediateIds","nextImmediateId","Timeout","clearFn","_id","_clearFn","setInterval","clearInterval","close","unref","ref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","process/browser.js","4","promisePolyfill","Global","boltExport","promise-polyfill","nu","baseFn","data","callbacks","nCallback","isReady","cbs","LazyValue","pure","callback","errorReporter","make","fab","aFutureB","toPromise","anonBind","futureB","toLazy","toCached","cache","Future","par","asyncValues","count","asyncValue","traverse","futures","global$2","global$3","global$4","global$5","internalMark","InternalHtml","mark","unmark","replace","isMarked","indexOf","internalHtmlMime","global$6","toBRs","toBlockElements","rootTag","rootAttrs","blocks","split","tagOpen","key","attrs","tag","hasOwnProperty","encodeAllRaw","join","openContainer","tagClose","paragraphs","Newlines","isPlainText","convert","global$7","global$8","global$9","global$a","Settings","shouldBlockDrop","getParam","shouldPasteDataImages","shouldFilterDrop","getPreProcess","getPostProcess","getWebkitStyles","shouldRemoveWebKitStyles","shouldMergeFormats","isSmartPasteEnabled","isPasteAsTextEnabled","getRetainStyleProps","getWordValidElements","shouldConvertWordFakeLists","shouldUseDefaultFilters","filter$1","items","RegExp","Utils","innerText","schema","domParser","shortEndedElements","getShortEndedElements","ignoreElements","makeMap","blockElements","getBlockElements","walk","currentNode","shortEnded","firstChild","next","parse","trimHtml","s1","s2","createIdGenerator","prefix","isMsEdge","navigator","userAgent","isNumericList","found","patterns","pattern","convertFakeListsToProperLists","currentListNode","prevListNode","lastLevel","getText","txt","trimListStart","regExp","convertParagraphToLi","paragraphNode","listName","start","level","_listLevel","parent","append","attr","wrap","lastChild","removeIgnoredNodes","_listIgnore","remove","elements","child","nodeText","matches","exec","parseInt","filterStyles","validStyles","styleValue","outputStyles","styles","dom","parseStyle","serializeStyle","WordFilter","preProcess","retainStyleProperties","str","spaces","Math","floor","validElements","valid_elements","valid_children","rule","attributes","class","attributesOrder","style","addAttributeFilter","nodes","unwrap","className","addNodeFilter","href","rootNode","validate","serialize","filterWordContent","isWordContent","processResult","cancelled","filterContent","preProcessArgs","hasEventListeners","isDefaultPrevented","tempBody","create","postProcessArgs","innerHTML","postProcessFilter","ProcessFilters","insertContent","body","querySelectorAll","elm","parentNode","removeChild","removeMeta","merge","paste","isAbsoluteUrl","url","isImageUrl","linkSelection","pasteHtmlFn","selection","isCollapsed","undoManager","extra","execCommand","createLink","insertImage","createImage","SmartPaste","action","smartInsertContent","isNewLineChar","normalizeWhitespace","acc","isCollapsibleWhitespace","pcIsSpace","idx","isNewline","pasteHtml$1","internalFlag","encodedText","encode","normalizedText","forced_root_block","forced_root_block_attrs","getDataTransferItems","dataTransfer","getData","legacyText","types","contentType","hasContentType","clipboardContent","mimeType","hasHtmlOrText","uniqueId","pasteImageData","rng","clipboardData","paste_data_images","images","getAsFile","files","pred","file","getImagesFromDataTransfer","preventDefault","blob","reader","FileReader","onload","uri","result","readAsDataURL","blobResults","setRng","imageItem","imgElm","base64","substr","images_reuse_filename","m","match","extractFilename","img","Image","src","images_dataimg_filter","existingBlobInfo","blobCache","editorUpload","blobInfo","findFirst","cachedBlobInfo","add","blobUri","pasteImage","isKeyboardPasteEvent","metaKeyPressed","keyCode","shiftKey","registerEventHandlers","pasteBin","subject","keyboardPastePlainTextState","keyboardPasteEvent","clear","isSet","insertClipboardContent","isKeyBoardPaste","plainTextMode","isPlainTextHtml","getHtml","isDefaultContent","windowManager","alert","removePasteBinOnKeyUp","webkit","stopImmediatePropagation","ie","clipboardEvent","getDoc","extend","text/html","getClipboardContent","isBrokenAndroidClipboardEvent","getLastRng","getRng","getEl","stopPropagation","setEditorTimeout","getPasteBinParent","inline","document","getBody","delegatePasteEvents","pasteBinElm","pasteBinDefaultContent","isExternalPasteBin","isDefault","PasteBin","lastRng","lastRngCell","contentEditable","data-mce-bogus","gecko","setStyle","getStyle","select","pasteBinClone","unbind","pasteBinClones","dirtyWrappers","cleanWrapper","copyAndRemove","toElm","fromElm","appendChild","grep","childNodes","shift","insertBefore","Clipboard","parser","transparentSrc","isWebKitFakeUrl","isDataUri","isPasteInsert","allow_html_data_urls","registerEventsAndFilters","noop$1","setHtml5Clipboard","iOS","setData","hasWorkingClipboardApi","clearData","setClipboardData","evt","fallback","markedHtml","outer","contenteditable","inner","setStyles","position","top","left","width","overflow","range","offscreenRange","createRng","selectNodeContents","getContent","contextual","format","hasSelectedContent","getParent","getStart","isTableSelection","CutCopy","cut","copy","global$b","getCaretRangeFromEvent","getCaretRangeFromPoint","clientX","clientY","setFocusedRange","DragDrop","setup","draggingInternallyState","dropContent","plainTextContent","content_1","transact","PrePostProcess","plugin","postProcess","addPreProcessFilter","filterFunc","removeExplorerBrElementsAfterBlocks","block","blockName","explorerBlocksRegExp","removeWebKitStyles","webKitStyles","webKitStylesSetting","dom_1","node_1","getNode","before","after","inputStyles","decode","inputValue","currentValue","toHex","removeUnderlineAndFontInAnchor","$","find","Quirks","addPostProcessFilter","makeSetupHandler","api","setActive","pastePlainTextToggleHandler","Buttons","registry","addToggleButton","icon","tooltip","onAction","onSetup","addToggleMenuItem"],"mappings":"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","file":"plugin.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.0 (2019-10-17)\n */\n(function (domGlobals) {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var hasProPlugin = function (editor) {\n      if (/(^|[ ,])powerpaste([, ]|$)/.test(editor.settings.plugins) && global$1.get('powerpaste')) {\n        if (typeof domGlobals.window.console !== 'undefined' && domGlobals.window.console.log) {\n          domGlobals.window.console.log('PowerPaste is incompatible with Paste plugin! Remove \\'paste\\' from the \\'plugins\\' option.');\n        }\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var DetectProPlugin = { hasProPlugin: hasProPlugin };\n\n    var get = function (clipboard, quirks) {\n      return {\n        clipboard: clipboard,\n        quirks: quirks\n      };\n    };\n    var Api = { get: get };\n\n    var firePastePreProcess = function (editor, html, internal, isWordHtml) {\n      return editor.fire('PastePreProcess', {\n        content: html,\n        internal: internal,\n        wordContent: isWordHtml\n      });\n    };\n    var firePastePostProcess = function (editor, node, internal, isWordHtml) {\n      return editor.fire('PastePostProcess', {\n        node: node,\n        internal: internal,\n        wordContent: isWordHtml\n      });\n    };\n    var firePastePlainTextToggle = function (editor, state) {\n      return editor.fire('PastePlainTextToggle', { state: state });\n    };\n    var firePaste = function (editor, ieFake) {\n      return editor.fire('paste', { ieFake: ieFake });\n    };\n    var Events = {\n      firePastePreProcess: firePastePreProcess,\n      firePastePostProcess: firePastePostProcess,\n      firePastePlainTextToggle: firePastePlainTextToggle,\n      firePaste: firePaste\n    };\n\n    var togglePlainTextPaste = function (editor, clipboard) {\n      if (clipboard.pasteFormat.get() === 'text') {\n        clipboard.pasteFormat.set('html');\n        Events.firePastePlainTextToggle(editor, false);\n      } else {\n        clipboard.pasteFormat.set('text');\n        Events.firePastePlainTextToggle(editor, true);\n      }\n      editor.focus();\n    };\n    var Actions = { togglePlainTextPaste: togglePlainTextPaste };\n\n    var register = function (editor, clipboard) {\n      editor.addCommand('mceTogglePlainTextPaste', function () {\n        Actions.togglePlainTextPaste(editor, clipboard);\n      });\n      editor.addCommand('mceInsertClipboardContent', function (ui, value) {\n        if (value.content) {\n          clipboard.pasteHtml(value.content, value.internal);\n        }\n        if (value.text) {\n          clipboard.pasteText(value.text);\n        }\n      });\n    };\n    var Commands = { register: register };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isFunction = isType('function');\n\n    var nativeSlice = Array.prototype.slice;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var exports$1 = {}, module = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (f) {\n        if (typeof exports === 'object' && typeof module !== 'undefined') {\n          module.exports = f();\n        } else if (typeof define === 'function' && define.amd) {\n          define([], f);\n        } else {\n          var g;\n          if (typeof window !== 'undefined') {\n            g = window;\n          } else if (typeof global !== 'undefined') {\n            g = global;\n          } else if (typeof self !== 'undefined') {\n            g = self;\n          } else {\n            g = this;\n          }\n          g.EphoxContactWrapper = f();\n        }\n      }(function () {\n        return function () {\n          function r(e, n, t) {\n            function o(i, f) {\n              if (!n[i]) {\n                if (!e[i]) {\n                  var c = 'function' == typeof require && require;\n                  if (!f && c)\n                    return c(i, !0);\n                  if (u)\n                    return u(i, !0);\n                  var a = new Error('Cannot find module \\'' + i + '\\'');\n                  throw a.code = 'MODULE_NOT_FOUND', a;\n                }\n                var p = n[i] = { exports: {} };\n                e[i][0].call(p.exports, function (r) {\n                  var n = e[i][1][r];\n                  return o(n || r);\n                }, p, p.exports, r, e, n, t);\n              }\n              return n[i].exports;\n            }\n            for (var u = 'function' == typeof require && require, i = 0; i < t.length; i++)\n              o(t[i]);\n            return o;\n          }\n          return r;\n        }()({\n          1: [\n            function (require, module, exports) {\n              var process = module.exports = {};\n              var cachedSetTimeout;\n              var cachedClearTimeout;\n              function defaultSetTimout() {\n                throw new Error('setTimeout has not been defined');\n              }\n              function defaultClearTimeout() {\n                throw new Error('clearTimeout has not been defined');\n              }\n              (function () {\n                try {\n                  if (typeof setTimeout === 'function') {\n                    cachedSetTimeout = setTimeout;\n                  } else {\n                    cachedSetTimeout = defaultSetTimout;\n                  }\n                } catch (e) {\n                  cachedSetTimeout = defaultSetTimout;\n                }\n                try {\n                  if (typeof clearTimeout === 'function') {\n                    cachedClearTimeout = clearTimeout;\n                  } else {\n                    cachedClearTimeout = defaultClearTimeout;\n                  }\n                } catch (e) {\n                  cachedClearTimeout = defaultClearTimeout;\n                }\n              }());\n              function runTimeout(fun) {\n                if (cachedSetTimeout === setTimeout) {\n                  return setTimeout(fun, 0);\n                }\n                if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n                  cachedSetTimeout = setTimeout;\n                  return setTimeout(fun, 0);\n                }\n                try {\n                  return cachedSetTimeout(fun, 0);\n                } catch (e) {\n                  try {\n                    return cachedSetTimeout.call(null, fun, 0);\n                  } catch (e) {\n                    return cachedSetTimeout.call(this, fun, 0);\n                  }\n                }\n              }\n              function runClearTimeout(marker) {\n                if (cachedClearTimeout === clearTimeout) {\n                  return clearTimeout(marker);\n                }\n                if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n                  cachedClearTimeout = clearTimeout;\n                  return clearTimeout(marker);\n                }\n                try {\n                  return cachedClearTimeout(marker);\n                } catch (e) {\n                  try {\n                    return cachedClearTimeout.call(null, marker);\n                  } catch (e) {\n                    return cachedClearTimeout.call(this, marker);\n                  }\n                }\n              }\n              var queue = [];\n              var draining = false;\n              var currentQueue;\n              var queueIndex = -1;\n              function cleanUpNextTick() {\n                if (!draining || !currentQueue) {\n                  return;\n                }\n                draining = false;\n                if (currentQueue.length) {\n                  queue = currentQueue.concat(queue);\n                } else {\n                  queueIndex = -1;\n                }\n                if (queue.length) {\n                  drainQueue();\n                }\n              }\n              function drainQueue() {\n                if (draining) {\n                  return;\n                }\n                var timeout = runTimeout(cleanUpNextTick);\n                draining = true;\n                var len = queue.length;\n                while (len) {\n                  currentQueue = queue;\n                  queue = [];\n                  while (++queueIndex < len) {\n                    if (currentQueue) {\n                      currentQueue[queueIndex].run();\n                    }\n                  }\n                  queueIndex = -1;\n                  len = queue.length;\n                }\n                currentQueue = null;\n                draining = false;\n                runClearTimeout(timeout);\n              }\n              process.nextTick = function (fun) {\n                var args = new Array(arguments.length - 1);\n                if (arguments.length > 1) {\n                  for (var i = 1; i < arguments.length; i++) {\n                    args[i - 1] = arguments[i];\n                  }\n                }\n                queue.push(new Item(fun, args));\n                if (queue.length === 1 && !draining) {\n                  runTimeout(drainQueue);\n                }\n              };\n              function Item(fun, array) {\n                this.fun = fun;\n                this.array = array;\n              }\n              Item.prototype.run = function () {\n                this.fun.apply(null, this.array);\n              };\n              process.title = 'browser';\n              process.browser = true;\n              process.env = {};\n              process.argv = [];\n              process.version = '';\n              process.versions = {};\n              function noop() {\n              }\n              process.on = noop;\n              process.addListener = noop;\n              process.once = noop;\n              process.off = noop;\n              process.removeListener = noop;\n              process.removeAllListeners = noop;\n              process.emit = noop;\n              process.prependListener = noop;\n              process.prependOnceListener = noop;\n              process.listeners = function (name) {\n                return [];\n              };\n              process.binding = function (name) {\n                throw new Error('process.binding is not supported');\n              };\n              process.cwd = function () {\n                return '/';\n              };\n              process.chdir = function (dir) {\n                throw new Error('process.chdir is not supported');\n              };\n              process.umask = function () {\n                return 0;\n              };\n            },\n            {}\n          ],\n          2: [\n            function (require, module, exports) {\n              (function (setImmediate) {\n                (function (root) {\n                  var setTimeoutFunc = setTimeout;\n                  function noop() {\n                  }\n                  function bind(fn, thisArg) {\n                    return function () {\n                      fn.apply(thisArg, arguments);\n                    };\n                  }\n                  function Promise(fn) {\n                    if (typeof this !== 'object')\n                      throw new TypeError('Promises must be constructed via new');\n                    if (typeof fn !== 'function')\n                      throw new TypeError('not a function');\n                    this._state = 0;\n                    this._handled = false;\n                    this._value = undefined;\n                    this._deferreds = [];\n                    doResolve(fn, this);\n                  }\n                  function handle(self, deferred) {\n                    while (self._state === 3) {\n                      self = self._value;\n                    }\n                    if (self._state === 0) {\n                      self._deferreds.push(deferred);\n                      return;\n                    }\n                    self._handled = true;\n                    Promise._immediateFn(function () {\n                      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                      if (cb === null) {\n                        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                        return;\n                      }\n                      var ret;\n                      try {\n                        ret = cb(self._value);\n                      } catch (e) {\n                        reject(deferred.promise, e);\n                        return;\n                      }\n                      resolve(deferred.promise, ret);\n                    });\n                  }\n                  function resolve(self, newValue) {\n                    try {\n                      if (newValue === self)\n                        throw new TypeError('A promise cannot be resolved with itself.');\n                      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                        var then = newValue.then;\n                        if (newValue instanceof Promise) {\n                          self._state = 3;\n                          self._value = newValue;\n                          finale(self);\n                          return;\n                        } else if (typeof then === 'function') {\n                          doResolve(bind(then, newValue), self);\n                          return;\n                        }\n                      }\n                      self._state = 1;\n                      self._value = newValue;\n                      finale(self);\n                    } catch (e) {\n                      reject(self, e);\n                    }\n                  }\n                  function reject(self, newValue) {\n                    self._state = 2;\n                    self._value = newValue;\n                    finale(self);\n                  }\n                  function finale(self) {\n                    if (self._state === 2 && self._deferreds.length === 0) {\n                      Promise._immediateFn(function () {\n                        if (!self._handled) {\n                          Promise._unhandledRejectionFn(self._value);\n                        }\n                      });\n                    }\n                    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                      handle(self, self._deferreds[i]);\n                    }\n                    self._deferreds = null;\n                  }\n                  function Handler(onFulfilled, onRejected, promise) {\n                    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n                    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n                    this.promise = promise;\n                  }\n                  function doResolve(fn, self) {\n                    var done = false;\n                    try {\n                      fn(function (value) {\n                        if (done)\n                          return;\n                        done = true;\n                        resolve(self, value);\n                      }, function (reason) {\n                        if (done)\n                          return;\n                        done = true;\n                        reject(self, reason);\n                      });\n                    } catch (ex) {\n                      if (done)\n                        return;\n                      done = true;\n                      reject(self, ex);\n                    }\n                  }\n                  Promise.prototype['catch'] = function (onRejected) {\n                    return this.then(null, onRejected);\n                  };\n                  Promise.prototype.then = function (onFulfilled, onRejected) {\n                    var prom = new this.constructor(noop);\n                    handle(this, new Handler(onFulfilled, onRejected, prom));\n                    return prom;\n                  };\n                  Promise.all = function (arr) {\n                    var args = Array.prototype.slice.call(arr);\n                    return new Promise(function (resolve, reject) {\n                      if (args.length === 0)\n                        return resolve([]);\n                      var remaining = args.length;\n                      function res(i, val) {\n                        try {\n                          if (val && (typeof val === 'object' || typeof val === 'function')) {\n                            var then = val.then;\n                            if (typeof then === 'function') {\n                              then.call(val, function (val) {\n                                res(i, val);\n                              }, reject);\n                              return;\n                            }\n                          }\n                          args[i] = val;\n                          if (--remaining === 0) {\n                            resolve(args);\n                          }\n                        } catch (ex) {\n                          reject(ex);\n                        }\n                      }\n                      for (var i = 0; i < args.length; i++) {\n                        res(i, args[i]);\n                      }\n                    });\n                  };\n                  Promise.resolve = function (value) {\n                    if (value && typeof value === 'object' && value.constructor === Promise) {\n                      return value;\n                    }\n                    return new Promise(function (resolve) {\n                      resolve(value);\n                    });\n                  };\n                  Promise.reject = function (value) {\n                    return new Promise(function (resolve, reject) {\n                      reject(value);\n                    });\n                  };\n                  Promise.race = function (values) {\n                    return new Promise(function (resolve, reject) {\n                      for (var i = 0, len = values.length; i < len; i++) {\n                        values[i].then(resolve, reject);\n                      }\n                    });\n                  };\n                  Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n                    setImmediate(fn);\n                  } : function (fn) {\n                    setTimeoutFunc(fn, 0);\n                  };\n                  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n                    if (typeof console !== 'undefined' && console) {\n                      console.warn('Possible Unhandled Promise Rejection:', err);\n                    }\n                  };\n                  Promise._setImmediateFn = function _setImmediateFn(fn) {\n                    Promise._immediateFn = fn;\n                  };\n                  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n                    Promise._unhandledRejectionFn = fn;\n                  };\n                  if (typeof module !== 'undefined' && module.exports) {\n                    module.exports = Promise;\n                  } else if (!root.Promise) {\n                    root.Promise = Promise;\n                  }\n                }(this));\n              }.call(this, require('timers').setImmediate));\n            },\n            { 'timers': 3 }\n          ],\n          3: [\n            function (require, module, exports) {\n              (function (setImmediate, clearImmediate) {\n                var nextTick = require('process/browser.js').nextTick;\n                var apply = Function.prototype.apply;\n                var slice = Array.prototype.slice;\n                var immediateIds = {};\n                var nextImmediateId = 0;\n                exports.setTimeout = function () {\n                  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n                };\n                exports.setInterval = function () {\n                  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n                };\n                exports.clearTimeout = exports.clearInterval = function (timeout) {\n                  timeout.close();\n                };\n                function Timeout(id, clearFn) {\n                  this._id = id;\n                  this._clearFn = clearFn;\n                }\n                Timeout.prototype.unref = Timeout.prototype.ref = function () {\n                };\n                Timeout.prototype.close = function () {\n                  this._clearFn.call(window, this._id);\n                };\n                exports.enroll = function (item, msecs) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = msecs;\n                };\n                exports.unenroll = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = -1;\n                };\n                exports._unrefActive = exports.active = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  var msecs = item._idleTimeout;\n                  if (msecs >= 0) {\n                    item._idleTimeoutId = setTimeout(function onTimeout() {\n                      if (item._onTimeout)\n                        item._onTimeout();\n                    }, msecs);\n                  }\n                };\n                exports.setImmediate = typeof setImmediate === 'function' ? setImmediate : function (fn) {\n                  var id = nextImmediateId++;\n                  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n                  immediateIds[id] = true;\n                  nextTick(function onNextTick() {\n                    if (immediateIds[id]) {\n                      if (args) {\n                        fn.apply(null, args);\n                      } else {\n                        fn.call(null);\n                      }\n                      exports.clearImmediate(id);\n                    }\n                  });\n                  return id;\n                };\n                exports.clearImmediate = typeof clearImmediate === 'function' ? clearImmediate : function (id) {\n                  delete immediateIds[id];\n                };\n              }.call(this, require('timers').setImmediate, require('timers').clearImmediate));\n            },\n            {\n              'process/browser.js': 1,\n              'timers': 3\n            }\n          ],\n          4: [\n            function (require, module, exports) {\n              var promisePolyfill = require('promise-polyfill');\n              var Global = function () {\n                if (typeof window !== 'undefined') {\n                  return window;\n                } else {\n                  return Function('return this;')();\n                }\n              }();\n              module.exports = { boltExport: Global.Promise || promisePolyfill };\n            },\n            { 'promise-polyfill': 2 }\n          ]\n        }, {}, [4])(4);\n      }));\n    }(undefined, exports$1, module, undefined));\n    var Promise = module.exports.boltExport;\n\n    var nu = function (baseFn) {\n      var data = Option.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        data = Option.some(x);\n        run(callbacks);\n        callbacks = [];\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          domGlobals.setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure = function (a) {\n      return nu(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu,\n      pure: pure\n    };\n\n    var errorReporter = function (err) {\n      domGlobals.setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu$1 = function (baseFn) {\n      return make(function () {\n        return new Promise(baseFn);\n      });\n    };\n    var pure$1 = function (a) {\n      return make(function () {\n        return Promise.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu$1,\n      pure: pure$1\n    };\n\n    var par = function (asyncValues, nu) {\n      return nu(function (callback) {\n        var r = [];\n        var count = 0;\n        var cb = function (i) {\n          return function (value) {\n            r[i] = value;\n            count++;\n            if (count >= asyncValues.length) {\n              callback(r);\n            }\n          };\n        };\n        if (asyncValues.length === 0) {\n          callback([]);\n        } else {\n          each(asyncValues, function (asyncValue, i) {\n            asyncValue.get(cb(i));\n          });\n        }\n      });\n    };\n\n    var par$1 = function (futures) {\n      return par(futures, Future.nu);\n    };\n    var traverse = function (array, fn) {\n      return par$1(map(array, fn));\n    };\n\n    var value = function () {\n      var subject = Cell(Option.none());\n      var clear = function () {\n        subject.set(Option.none());\n      };\n      var set = function (s) {\n        subject.set(Option.some(s));\n      };\n      var on = function (f) {\n        subject.get().each(f);\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      return {\n        clear: clear,\n        set: set,\n        isSet: isSet,\n        on: on\n      };\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var internalMimeType = 'x-tinymce/html';\n    var internalMark = '<!-- ' + internalMimeType + ' -->';\n    var mark = function (html) {\n      return internalMark + html;\n    };\n    var unmark = function (html) {\n      return html.replace(internalMark, '');\n    };\n    var isMarked = function (html) {\n      return html.indexOf(internalMark) !== -1;\n    };\n    var InternalHtml = {\n      mark: mark,\n      unmark: unmark,\n      isMarked: isMarked,\n      internalHtmlMime: function () {\n        return internalMimeType;\n      }\n    };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.html.Entities');\n\n    var isPlainText = function (text) {\n      return !/<(?:\\/?(?!(?:div|p|br|span)>)\\w+|(?:(?!(?:span style=\"white-space:\\s?pre;?\">)|br\\s?\\/>))\\w+\\s[^>]+)>/i.test(text);\n    };\n    var toBRs = function (text) {\n      return text.replace(/\\r?\\n/g, '<br>');\n    };\n    var openContainer = function (rootTag, rootAttrs) {\n      var key;\n      var attrs = [];\n      var tag = '<' + rootTag;\n      if (typeof rootAttrs === 'object') {\n        for (key in rootAttrs) {\n          if (rootAttrs.hasOwnProperty(key)) {\n            attrs.push(key + '=\"' + global$6.encodeAllRaw(rootAttrs[key]) + '\"');\n          }\n        }\n        if (attrs.length) {\n          tag += ' ' + attrs.join(' ');\n        }\n      }\n      return tag + '>';\n    };\n    var toBlockElements = function (text, rootTag, rootAttrs) {\n      var blocks = text.split(/\\n\\n/);\n      var tagOpen = openContainer(rootTag, rootAttrs);\n      var tagClose = '</' + rootTag + '>';\n      var paragraphs = global$4.map(blocks, function (p) {\n        return p.split(/\\n/).join('<br />');\n      });\n      var stitch = function (p) {\n        return tagOpen + p + tagClose;\n      };\n      return paragraphs.length === 1 ? paragraphs[0] : global$4.map(paragraphs, stitch).join('');\n    };\n    var convert = function (text, rootTag, rootAttrs) {\n      return rootTag ? toBlockElements(text, rootTag === true ? 'p' : rootTag, rootAttrs) : toBRs(text);\n    };\n    var Newlines = {\n      isPlainText: isPlainText,\n      convert: convert,\n      toBRs: toBRs,\n      toBlockElements: toBlockElements\n    };\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.html.DomParser');\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.html.Node');\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.html.Schema');\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.html.Serializer');\n\n    var shouldBlockDrop = function (editor) {\n      return editor.getParam('paste_block_drop', false);\n    };\n    var shouldPasteDataImages = function (editor) {\n      return editor.getParam('paste_data_images', false);\n    };\n    var shouldFilterDrop = function (editor) {\n      return editor.getParam('paste_filter_drop', true);\n    };\n    var getPreProcess = function (editor) {\n      return editor.getParam('paste_preprocess');\n    };\n    var getPostProcess = function (editor) {\n      return editor.getParam('paste_postprocess');\n    };\n    var getWebkitStyles = function (editor) {\n      return editor.getParam('paste_webkit_styles');\n    };\n    var shouldRemoveWebKitStyles = function (editor) {\n      return editor.getParam('paste_remove_styles_if_webkit', true);\n    };\n    var shouldMergeFormats = function (editor) {\n      return editor.getParam('paste_merge_formats', true);\n    };\n    var isSmartPasteEnabled = function (editor) {\n      return editor.getParam('smart_paste', true);\n    };\n    var isPasteAsTextEnabled = function (editor) {\n      return editor.getParam('paste_as_text', false);\n    };\n    var getRetainStyleProps = function (editor) {\n      return editor.getParam('paste_retain_style_properties');\n    };\n    var getWordValidElements = function (editor) {\n      var defaultValidElements = '-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,' + '-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,' + 'td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody';\n      return editor.getParam('paste_word_valid_elements', defaultValidElements);\n    };\n    var shouldConvertWordFakeLists = function (editor) {\n      return editor.getParam('paste_convert_word_fake_lists', true);\n    };\n    var shouldUseDefaultFilters = function (editor) {\n      return editor.getParam('paste_enable_default_filters', true);\n    };\n    var Settings = {\n      shouldBlockDrop: shouldBlockDrop,\n      shouldPasteDataImages: shouldPasteDataImages,\n      shouldFilterDrop: shouldFilterDrop,\n      getPreProcess: getPreProcess,\n      getPostProcess: getPostProcess,\n      getWebkitStyles: getWebkitStyles,\n      shouldRemoveWebKitStyles: shouldRemoveWebKitStyles,\n      shouldMergeFormats: shouldMergeFormats,\n      isSmartPasteEnabled: isSmartPasteEnabled,\n      isPasteAsTextEnabled: isPasteAsTextEnabled,\n      getRetainStyleProps: getRetainStyleProps,\n      getWordValidElements: getWordValidElements,\n      shouldConvertWordFakeLists: shouldConvertWordFakeLists,\n      shouldUseDefaultFilters: shouldUseDefaultFilters\n    };\n\n    function filter$1(content, items) {\n      global$4.each(items, function (v) {\n        if (v.constructor === RegExp) {\n          content = content.replace(v, '');\n        } else {\n          content = content.replace(v[0], v[1]);\n        }\n      });\n      return content;\n    }\n    function innerText(html) {\n      var schema = global$9();\n      var domParser = global$7({}, schema);\n      var text = '';\n      var shortEndedElements = schema.getShortEndedElements();\n      var ignoreElements = global$4.makeMap('script noscript style textarea video audio iframe object', ' ');\n      var blockElements = schema.getBlockElements();\n      function walk(node) {\n        var name = node.name, currentNode = node;\n        if (name === 'br') {\n          text += '\\n';\n          return;\n        }\n        if (name === 'wbr') {\n          return;\n        }\n        if (shortEndedElements[name]) {\n          text += ' ';\n        }\n        if (ignoreElements[name]) {\n          text += ' ';\n          return;\n        }\n        if (node.type === 3) {\n          text += node.value;\n        }\n        if (!node.shortEnded) {\n          if (node = node.firstChild) {\n            do {\n              walk(node);\n            } while (node = node.next);\n          }\n        }\n        if (blockElements[name] && currentNode.next) {\n          text += '\\n';\n          if (name === 'p') {\n            text += '\\n';\n          }\n        }\n      }\n      html = filter$1(html, [/<!\\[[^\\]]+\\]>/g]);\n      walk(domParser.parse(html));\n      return text;\n    }\n    function trimHtml(html) {\n      function trimSpaces(all, s1, s2) {\n        if (!s1 && !s2) {\n          return ' ';\n        }\n        return '\\xA0';\n      }\n      html = filter$1(html, [\n        /^[\\s\\S]*<body[^>]*>\\s*|\\s*<\\/body[^>]*>[\\s\\S]*$/ig,\n        /<!--StartFragment-->|<!--EndFragment-->/g,\n        [\n          /( ?)<span class=\"Apple-converted-space\">\\u00a0<\\/span>( ?)/g,\n          trimSpaces\n        ],\n        /<br class=\"Apple-interchange-newline\">/g,\n        /<br>$/i\n      ]);\n      return html;\n    }\n    function createIdGenerator(prefix) {\n      var count = 0;\n      return function () {\n        return prefix + count++;\n      };\n    }\n    var isMsEdge = function () {\n      return domGlobals.navigator.userAgent.indexOf(' Edge/') !== -1;\n    };\n    var Utils = {\n      filter: filter$1,\n      innerText: innerText,\n      trimHtml: trimHtml,\n      createIdGenerator: createIdGenerator,\n      isMsEdge: isMsEdge\n    };\n\n    function isWordContent(content) {\n      return /<font face=\"Times New Roman\"|class=\"?Mso|style=\"[^\"]*\\bmso-|style='[^'']*\\bmso-|w:WordDocument/i.test(content) || /class=\"OutlineElement/.test(content) || /id=\"?docs\\-internal\\-guid\\-/.test(content);\n    }\n    function isNumericList(text) {\n      var found, patterns;\n      patterns = [\n        /^[IVXLMCD]{1,2}\\.[ \\u00a0]/,\n        /^[ivxlmcd]{1,2}\\.[ \\u00a0]/,\n        /^[a-z]{1,2}[\\.\\)][ \\u00a0]/,\n        /^[A-Z]{1,2}[\\.\\)][ \\u00a0]/,\n        /^[0-9]+\\.[ \\u00a0]/,\n        /^[\\u3007\\u4e00\\u4e8c\\u4e09\\u56db\\u4e94\\u516d\\u4e03\\u516b\\u4e5d]+\\.[ \\u00a0]/,\n        /^[\\u58f1\\u5f10\\u53c2\\u56db\\u4f0d\\u516d\\u4e03\\u516b\\u4e5d\\u62fe]+\\.[ \\u00a0]/\n      ];\n      text = text.replace(/^[\\u00a0 ]+/, '');\n      global$4.each(patterns, function (pattern) {\n        if (pattern.test(text)) {\n          found = true;\n          return false;\n        }\n      });\n      return found;\n    }\n    function isBulletList(text) {\n      return /^[\\s\\u00a0]*[\\u2022\\u00b7\\u00a7\\u25CF]\\s*/.test(text);\n    }\n    function convertFakeListsToProperLists(node) {\n      var currentListNode, prevListNode, lastLevel = 1;\n      function getText(node) {\n        var txt = '';\n        if (node.type === 3) {\n          return node.value;\n        }\n        if (node = node.firstChild) {\n          do {\n            txt += getText(node);\n          } while (node = node.next);\n        }\n        return txt;\n      }\n      function trimListStart(node, regExp) {\n        if (node.type === 3) {\n          if (regExp.test(node.value)) {\n            node.value = node.value.replace(regExp, '');\n            return false;\n          }\n        }\n        if (node = node.firstChild) {\n          do {\n            if (!trimListStart(node, regExp)) {\n              return false;\n            }\n          } while (node = node.next);\n        }\n        return true;\n      }\n      function removeIgnoredNodes(node) {\n        if (node._listIgnore) {\n          node.remove();\n          return;\n        }\n        if (node = node.firstChild) {\n          do {\n            removeIgnoredNodes(node);\n          } while (node = node.next);\n        }\n      }\n      function convertParagraphToLi(paragraphNode, listName, start) {\n        var level = paragraphNode._listLevel || lastLevel;\n        if (level !== lastLevel) {\n          if (level < lastLevel) {\n            if (currentListNode) {\n              currentListNode = currentListNode.parent.parent;\n            }\n          } else {\n            prevListNode = currentListNode;\n            currentListNode = null;\n          }\n        }\n        if (!currentListNode || currentListNode.name !== listName) {\n          prevListNode = prevListNode || currentListNode;\n          currentListNode = new global$8(listName, 1);\n          if (start > 1) {\n            currentListNode.attr('start', '' + start);\n          }\n          paragraphNode.wrap(currentListNode);\n        } else {\n          currentListNode.append(paragraphNode);\n        }\n        paragraphNode.name = 'li';\n        if (level > lastLevel && prevListNode) {\n          prevListNode.lastChild.append(currentListNode);\n        }\n        lastLevel = level;\n        removeIgnoredNodes(paragraphNode);\n        trimListStart(paragraphNode, /^\\u00a0+/);\n        trimListStart(paragraphNode, /^\\s*([\\u2022\\u00b7\\u00a7\\u25CF]|\\w+\\.)/);\n        trimListStart(paragraphNode, /^\\u00a0+/);\n      }\n      var elements = [];\n      var child = node.firstChild;\n      while (typeof child !== 'undefined' && child !== null) {\n        elements.push(child);\n        child = child.walk();\n        if (child !== null) {\n          while (typeof child !== 'undefined' && child.parent !== node) {\n            child = child.walk();\n          }\n        }\n      }\n      for (var i = 0; i < elements.length; i++) {\n        node = elements[i];\n        if (node.name === 'p' && node.firstChild) {\n          var nodeText = getText(node);\n          if (isBulletList(nodeText)) {\n            convertParagraphToLi(node, 'ul');\n            continue;\n          }\n          if (isNumericList(nodeText)) {\n            var matches = /([0-9]+)\\./.exec(nodeText);\n            var start = 1;\n            if (matches) {\n              start = parseInt(matches[1], 10);\n            }\n            convertParagraphToLi(node, 'ol', start);\n            continue;\n          }\n          if (node._listLevel) {\n            convertParagraphToLi(node, 'ul', 1);\n            continue;\n          }\n          currentListNode = null;\n        } else {\n          prevListNode = currentListNode;\n          currentListNode = null;\n        }\n      }\n    }\n    function filterStyles(editor, validStyles, node, styleValue) {\n      var outputStyles = {}, matches;\n      var styles = editor.dom.parseStyle(styleValue);\n      global$4.each(styles, function (value, name) {\n        switch (name) {\n        case 'mso-list':\n          matches = /\\w+ \\w+([0-9]+)/i.exec(styleValue);\n          if (matches) {\n            node._listLevel = parseInt(matches[1], 10);\n          }\n          if (/Ignore/i.test(value) && node.firstChild) {\n            node._listIgnore = true;\n            node.firstChild._listIgnore = true;\n          }\n          break;\n        case 'horiz-align':\n          name = 'text-align';\n          break;\n        case 'vert-align':\n          name = 'vertical-align';\n          break;\n        case 'font-color':\n        case 'mso-foreground':\n          name = 'color';\n          break;\n        case 'mso-background':\n        case 'mso-highlight':\n          name = 'background';\n          break;\n        case 'font-weight':\n        case 'font-style':\n          if (value !== 'normal') {\n            outputStyles[name] = value;\n          }\n          return;\n        case 'mso-element':\n          if (/^(comment|comment-list)$/i.test(value)) {\n            node.remove();\n            return;\n          }\n          break;\n        }\n        if (name.indexOf('mso-comment') === 0) {\n          node.remove();\n          return;\n        }\n        if (name.indexOf('mso-') === 0) {\n          return;\n        }\n        if (Settings.getRetainStyleProps(editor) === 'all' || validStyles && validStyles[name]) {\n          outputStyles[name] = value;\n        }\n      });\n      if (/(bold)/i.test(outputStyles['font-weight'])) {\n        delete outputStyles['font-weight'];\n        node.wrap(new global$8('b', 1));\n      }\n      if (/(italic)/i.test(outputStyles['font-style'])) {\n        delete outputStyles['font-style'];\n        node.wrap(new global$8('i', 1));\n      }\n      outputStyles = editor.dom.serializeStyle(outputStyles, node.name);\n      if (outputStyles) {\n        return outputStyles;\n      }\n      return null;\n    }\n    var filterWordContent = function (editor, content) {\n      var retainStyleProperties, validStyles;\n      retainStyleProperties = Settings.getRetainStyleProps(editor);\n      if (retainStyleProperties) {\n        validStyles = global$4.makeMap(retainStyleProperties.split(/[, ]/));\n      }\n      content = Utils.filter(content, [\n        /<br class=\"?Apple-interchange-newline\"?>/gi,\n        /<b[^>]+id=\"?docs-internal-[^>]*>/gi,\n        /<!--[\\s\\S]+?-->/gi,\n        /<(!|script[^>]*>.*?<\\/script(?=[>\\s])|\\/?(\\?xml(:\\w+)?|img|meta|link|style|\\w:\\w+)(?=[\\s\\/>]))[^>]*>/gi,\n        [\n          /<(\\/?)s>/gi,\n          '<$1strike>'\n        ],\n        [\n          /&nbsp;/gi,\n          '\\xA0'\n        ],\n        [\n          /<span\\s+style\\s*=\\s*\"\\s*mso-spacerun\\s*:\\s*yes\\s*;?\\s*\"\\s*>([\\s\\u00a0]*)<\\/span>/gi,\n          function (str, spaces) {\n            return spaces.length > 0 ? spaces.replace(/./, ' ').slice(Math.floor(spaces.length / 2)).split('').join('\\xA0') : '';\n          }\n        ]\n      ]);\n      var validElements = Settings.getWordValidElements(editor);\n      var schema = global$9({\n        valid_elements: validElements,\n        valid_children: '-li[p]'\n      });\n      global$4.each(schema.elements, function (rule) {\n        if (!rule.attributes.class) {\n          rule.attributes.class = {};\n          rule.attributesOrder.push('class');\n        }\n        if (!rule.attributes.style) {\n          rule.attributes.style = {};\n          rule.attributesOrder.push('style');\n        }\n      });\n      var domParser = global$7({}, schema);\n      domParser.addAttributeFilter('style', function (nodes) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          node.attr('style', filterStyles(editor, validStyles, node, node.attr('style')));\n          if (node.name === 'span' && node.parent && !node.attributes.length) {\n            node.unwrap();\n          }\n        }\n      });\n      domParser.addAttributeFilter('class', function (nodes) {\n        var i = nodes.length, node, className;\n        while (i--) {\n          node = nodes[i];\n          className = node.attr('class');\n          if (/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(className)) {\n            node.remove();\n          }\n          node.attr('class', null);\n        }\n      });\n      domParser.addNodeFilter('del', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          nodes[i].remove();\n        }\n      });\n      domParser.addNodeFilter('a', function (nodes) {\n        var i = nodes.length, node, href, name;\n        while (i--) {\n          node = nodes[i];\n          href = node.attr('href');\n          name = node.attr('name');\n          if (href && href.indexOf('#_msocom_') !== -1) {\n            node.remove();\n            continue;\n          }\n          if (href && href.indexOf('file://') === 0) {\n            href = href.split('#')[1];\n            if (href) {\n              href = '#' + href;\n            }\n          }\n          if (!href && !name) {\n            node.unwrap();\n          } else {\n            if (name && !/^_?(?:toc|edn|ftn)/i.test(name)) {\n              node.unwrap();\n              continue;\n            }\n            node.attr({\n              href: href,\n              name: name\n            });\n          }\n        }\n      });\n      var rootNode = domParser.parse(content);\n      if (Settings.shouldConvertWordFakeLists(editor)) {\n        convertFakeListsToProperLists(rootNode);\n      }\n      content = global$a({ validate: editor.settings.validate }, schema).serialize(rootNode);\n      return content;\n    };\n    var preProcess = function (editor, content) {\n      return Settings.shouldUseDefaultFilters(editor) ? filterWordContent(editor, content) : content;\n    };\n    var WordFilter = {\n      preProcess: preProcess,\n      isWordContent: isWordContent\n    };\n\n    var processResult = function (content, cancelled) {\n      return {\n        content: content,\n        cancelled: cancelled\n      };\n    };\n    var postProcessFilter = function (editor, html, internal, isWordHtml) {\n      var tempBody = editor.dom.create('div', { style: 'display:none' }, html);\n      var postProcessArgs = Events.firePastePostProcess(editor, tempBody, internal, isWordHtml);\n      return processResult(postProcessArgs.node.innerHTML, postProcessArgs.isDefaultPrevented());\n    };\n    var filterContent = function (editor, content, internal, isWordHtml) {\n      var preProcessArgs = Events.firePastePreProcess(editor, content, internal, isWordHtml);\n      if (editor.hasEventListeners('PastePostProcess') && !preProcessArgs.isDefaultPrevented()) {\n        return postProcessFilter(editor, preProcessArgs.content, internal, isWordHtml);\n      } else {\n        return processResult(preProcessArgs.content, preProcessArgs.isDefaultPrevented());\n      }\n    };\n    var process = function (editor, html, internal) {\n      var isWordHtml = WordFilter.isWordContent(html);\n      var content = isWordHtml ? WordFilter.preProcess(editor, html) : html;\n      return filterContent(editor, content, internal, isWordHtml);\n    };\n    var ProcessFilters = { process: process };\n\n    var removeMeta = function (editor, html) {\n      var body = editor.dom.create('body', {}, html);\n      global$4.each(body.querySelectorAll('meta'), function (elm) {\n        return elm.parentNode.removeChild(elm);\n      });\n      return body.innerHTML;\n    };\n    var pasteHtml = function (editor, html) {\n      editor.insertContent(removeMeta(editor, html), {\n        merge: Settings.shouldMergeFormats(editor),\n        paste: true\n      });\n      return true;\n    };\n    var isAbsoluteUrl = function (url) {\n      return /^https?:\\/\\/[\\w\\?\\-\\/+=.&%@~#]+$/i.test(url);\n    };\n    var isImageUrl = function (url) {\n      return isAbsoluteUrl(url) && /.(gif|jpe?g|png)$/.test(url);\n    };\n    var createImage = function (editor, url, pasteHtmlFn) {\n      editor.undoManager.extra(function () {\n        pasteHtmlFn(editor, url);\n      }, function () {\n        editor.insertContent('<img src=\"' + url + '\">');\n      });\n      return true;\n    };\n    var createLink = function (editor, url, pasteHtmlFn) {\n      editor.undoManager.extra(function () {\n        pasteHtmlFn(editor, url);\n      }, function () {\n        editor.execCommand('mceInsertLink', false, url);\n      });\n      return true;\n    };\n    var linkSelection = function (editor, html, pasteHtmlFn) {\n      return editor.selection.isCollapsed() === false && isAbsoluteUrl(html) ? createLink(editor, html, pasteHtmlFn) : false;\n    };\n    var insertImage = function (editor, html, pasteHtmlFn) {\n      return isImageUrl(html) ? createImage(editor, html, pasteHtmlFn) : false;\n    };\n    var smartInsertContent = function (editor, html) {\n      global$4.each([\n        linkSelection,\n        insertImage,\n        pasteHtml\n      ], function (action) {\n        return action(editor, html, pasteHtml) !== true;\n      });\n    };\n    var insertContent = function (editor, html) {\n      if (Settings.isSmartPasteEnabled(editor) === false) {\n        pasteHtml(editor, html);\n      } else {\n        smartInsertContent(editor, html);\n      }\n    };\n    var SmartPaste = {\n      isImageUrl: isImageUrl,\n      isAbsoluteUrl: isAbsoluteUrl,\n      insertContent: insertContent\n    };\n\n    var isCollapsibleWhitespace = function (c) {\n      return ' \\f\\t\\x0B'.indexOf(c) !== -1;\n    };\n    var isNewLineChar = function (c) {\n      return c === '\\n' || c === '\\r';\n    };\n    var isNewline = function (text, idx) {\n      return idx < text.length && idx >= 0 ? isNewLineChar(text[idx]) : false;\n    };\n    var normalizeWhitespace = function (text) {\n      var result = foldl(text, function (acc, c) {\n        if (isCollapsibleWhitespace(c) || c === '\\xA0') {\n          if (acc.pcIsSpace || acc.str === '' || acc.str.length === text.length - 1 || isNewline(text, acc.str.length + 1)) {\n            return {\n              pcIsSpace: false,\n              str: acc.str + '\\xA0'\n            };\n          } else {\n            return {\n              pcIsSpace: true,\n              str: acc.str + ' '\n            };\n          }\n        } else {\n          return {\n            pcIsSpace: isNewLineChar(c),\n            str: acc.str + c\n          };\n        }\n      }, {\n        pcIsSpace: false,\n        str: ''\n      });\n      return result.str;\n    };\n\n    var pasteHtml$1 = function (editor, html, internalFlag) {\n      var internal = internalFlag ? internalFlag : InternalHtml.isMarked(html);\n      var args = ProcessFilters.process(editor, InternalHtml.unmark(html), internal);\n      if (args.cancelled === false) {\n        SmartPaste.insertContent(editor, args.content);\n      }\n    };\n    var pasteText = function (editor, text) {\n      var encodedText = editor.dom.encode(text).replace(/\\r\\n/g, '\\n');\n      var normalizedText = normalizeWhitespace(encodedText);\n      var html = Newlines.convert(normalizedText, editor.settings.forced_root_block, editor.settings.forced_root_block_attrs);\n      pasteHtml$1(editor, html, false);\n    };\n    var getDataTransferItems = function (dataTransfer) {\n      var items = {};\n      var mceInternalUrlPrefix = 'data:text/mce-internal,';\n      if (dataTransfer) {\n        if (dataTransfer.getData) {\n          var legacyText = dataTransfer.getData('Text');\n          if (legacyText && legacyText.length > 0) {\n            if (legacyText.indexOf(mceInternalUrlPrefix) === -1) {\n              items['text/plain'] = legacyText;\n            }\n          }\n        }\n        if (dataTransfer.types) {\n          for (var i = 0; i < dataTransfer.types.length; i++) {\n            var contentType = dataTransfer.types[i];\n            try {\n              items[contentType] = dataTransfer.getData(contentType);\n            } catch (ex) {\n              items[contentType] = '';\n            }\n          }\n        }\n      }\n      return items;\n    };\n    var getClipboardContent = function (editor, clipboardEvent) {\n      var content = getDataTransferItems(clipboardEvent.clipboardData || editor.getDoc().dataTransfer);\n      return Utils.isMsEdge() ? global$4.extend(content, { 'text/html': '' }) : content;\n    };\n    var hasContentType = function (clipboardContent, mimeType) {\n      return mimeType in clipboardContent && clipboardContent[mimeType].length > 0;\n    };\n    var hasHtmlOrText = function (content) {\n      return hasContentType(content, 'text/html') || hasContentType(content, 'text/plain');\n    };\n    var getBase64FromUri = function (uri) {\n      var idx;\n      idx = uri.indexOf(',');\n      if (idx !== -1) {\n        return uri.substr(idx + 1);\n      }\n      return null;\n    };\n    var isValidDataUriImage = function (settings, imgElm) {\n      return settings.images_dataimg_filter ? settings.images_dataimg_filter(imgElm) : true;\n    };\n    var extractFilename = function (editor, str) {\n      var m = str.match(/([\\s\\S]+?)\\.(?:jpeg|jpg|png|gif)$/i);\n      return m ? editor.dom.encode(m[1]) : null;\n    };\n    var uniqueId = Utils.createIdGenerator('mceclip');\n    var pasteImage = function (editor, imageItem) {\n      var base64 = getBase64FromUri(imageItem.uri);\n      var id = uniqueId();\n      var name = editor.settings.images_reuse_filename && imageItem.blob.name ? extractFilename(editor, imageItem.blob.name) : id;\n      var img = new domGlobals.Image();\n      img.src = imageItem.uri;\n      if (isValidDataUriImage(editor.settings, img)) {\n        var blobCache = editor.editorUpload.blobCache;\n        var blobInfo = void 0, existingBlobInfo = void 0;\n        existingBlobInfo = blobCache.findFirst(function (cachedBlobInfo) {\n          return cachedBlobInfo.base64() === base64;\n        });\n        if (!existingBlobInfo) {\n          blobInfo = blobCache.create(id, imageItem.blob, base64, name);\n          blobCache.add(blobInfo);\n        } else {\n          blobInfo = existingBlobInfo;\n        }\n        pasteHtml$1(editor, '<img src=\"' + blobInfo.blobUri() + '\">', false);\n      } else {\n        pasteHtml$1(editor, '<img src=\"' + imageItem.uri + '\">', false);\n      }\n    };\n    var isClipboardEvent = function (event) {\n      return event.type === 'paste';\n    };\n    var readBlobsAsDataUris = function (items) {\n      return traverse(items, function (item) {\n        return Future.nu(function (resolve) {\n          var blob = item.getAsFile ? item.getAsFile() : item;\n          var reader = new window.FileReader();\n          reader.onload = function () {\n            resolve({\n              blob: blob,\n              uri: reader.result\n            });\n          };\n          reader.readAsDataURL(blob);\n        });\n      });\n    };\n    var getImagesFromDataTransfer = function (dataTransfer) {\n      var items = dataTransfer.items ? map(from$1(dataTransfer.items), function (item) {\n        return item.getAsFile();\n      }) : [];\n      var files = dataTransfer.files ? from$1(dataTransfer.files) : [];\n      var images = filter(items.length > 0 ? items : files, function (file) {\n        return /^image\\/(jpeg|png|gif|bmp)$/.test(file.type);\n      });\n      return images;\n    };\n    var pasteImageData = function (editor, e, rng) {\n      var dataTransfer = isClipboardEvent(e) ? e.clipboardData : e.dataTransfer;\n      if (editor.settings.paste_data_images && dataTransfer) {\n        var images = getImagesFromDataTransfer(dataTransfer);\n        if (images.length > 0) {\n          e.preventDefault();\n          readBlobsAsDataUris(images).get(function (blobResults) {\n            if (rng) {\n              editor.selection.setRng(rng);\n            }\n            each(blobResults, function (result) {\n              pasteImage(editor, result);\n            });\n          });\n          return true;\n        }\n      }\n      return false;\n    };\n    var isBrokenAndroidClipboardEvent = function (e) {\n      var clipboardData = e.clipboardData;\n      return domGlobals.navigator.userAgent.indexOf('Android') !== -1 && clipboardData && clipboardData.items && clipboardData.items.length === 0;\n    };\n    var isKeyboardPasteEvent = function (e) {\n      return global$5.metaKeyPressed(e) && e.keyCode === 86 || e.shiftKey && e.keyCode === 45;\n    };\n    var registerEventHandlers = function (editor, pasteBin, pasteFormat) {\n      var keyboardPasteEvent = value();\n      var keyboardPastePlainTextState;\n      editor.on('keydown', function (e) {\n        function removePasteBinOnKeyUp(e) {\n          if (isKeyboardPasteEvent(e) && !e.isDefaultPrevented()) {\n            pasteBin.remove();\n          }\n        }\n        if (isKeyboardPasteEvent(e) && !e.isDefaultPrevented()) {\n          keyboardPastePlainTextState = e.shiftKey && e.keyCode === 86;\n          if (keyboardPastePlainTextState && global$2.webkit && domGlobals.navigator.userAgent.indexOf('Version/') !== -1) {\n            return;\n          }\n          e.stopImmediatePropagation();\n          keyboardPasteEvent.set(e);\n          window.setTimeout(function () {\n            keyboardPasteEvent.clear();\n          }, 100);\n          if (global$2.ie && keyboardPastePlainTextState) {\n            e.preventDefault();\n            Events.firePaste(editor, true);\n            return;\n          }\n          pasteBin.remove();\n          pasteBin.create();\n          editor.once('keyup', removePasteBinOnKeyUp);\n          editor.once('paste', function () {\n            editor.off('keyup', removePasteBinOnKeyUp);\n          });\n        }\n      });\n      function insertClipboardContent(clipboardContent, isKeyBoardPaste, plainTextMode, internal) {\n        var content, isPlainTextHtml;\n        if (hasContentType(clipboardContent, 'text/html')) {\n          content = clipboardContent['text/html'];\n        } else {\n          content = pasteBin.getHtml();\n          internal = internal ? internal : InternalHtml.isMarked(content);\n          if (pasteBin.isDefaultContent(content)) {\n            plainTextMode = true;\n          }\n        }\n        content = Utils.trimHtml(content);\n        pasteBin.remove();\n        isPlainTextHtml = internal === false && Newlines.isPlainText(content);\n        if (!content.length || isPlainTextHtml) {\n          plainTextMode = true;\n        }\n        if (plainTextMode) {\n          if (hasContentType(clipboardContent, 'text/plain') && isPlainTextHtml) {\n            content = clipboardContent['text/plain'];\n          } else {\n            content = Utils.innerText(content);\n          }\n        }\n        if (pasteBin.isDefaultContent(content)) {\n          if (!isKeyBoardPaste) {\n            editor.windowManager.alert('Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.');\n          }\n          return;\n        }\n        if (plainTextMode) {\n          pasteText(editor, content);\n        } else {\n          pasteHtml$1(editor, content, internal);\n        }\n      }\n      var getLastRng = function () {\n        return pasteBin.getLastRng() || editor.selection.getRng();\n      };\n      editor.on('paste', function (e) {\n        var isKeyBoardPaste = keyboardPasteEvent.isSet();\n        var clipboardContent = getClipboardContent(editor, e);\n        var plainTextMode = pasteFormat.get() === 'text' || keyboardPastePlainTextState;\n        var internal = hasContentType(clipboardContent, InternalHtml.internalHtmlMime());\n        keyboardPastePlainTextState = false;\n        if (e.isDefaultPrevented() || isBrokenAndroidClipboardEvent(e)) {\n          pasteBin.remove();\n          return;\n        }\n        if (!hasHtmlOrText(clipboardContent) && pasteImageData(editor, e, getLastRng())) {\n          pasteBin.remove();\n          return;\n        }\n        if (!isKeyBoardPaste) {\n          e.preventDefault();\n        }\n        if (global$2.ie && (!isKeyBoardPaste || e.ieFake) && !hasContentType(clipboardContent, 'text/html')) {\n          pasteBin.create();\n          editor.dom.bind(pasteBin.getEl(), 'paste', function (e) {\n            e.stopPropagation();\n          });\n          editor.getDoc().execCommand('Paste', false, null);\n          clipboardContent['text/html'] = pasteBin.getHtml();\n        }\n        if (hasContentType(clipboardContent, 'text/html')) {\n          e.preventDefault();\n          if (!internal) {\n            internal = InternalHtml.isMarked(clipboardContent['text/html']);\n          }\n          insertClipboardContent(clipboardContent, isKeyBoardPaste, plainTextMode, internal);\n        } else {\n          global$3.setEditorTimeout(editor, function () {\n            insertClipboardContent(clipboardContent, isKeyBoardPaste, plainTextMode, internal);\n          }, 0);\n        }\n      });\n    };\n    var registerEventsAndFilters = function (editor, pasteBin, pasteFormat) {\n      registerEventHandlers(editor, pasteBin, pasteFormat);\n      var src;\n      editor.parser.addNodeFilter('img', function (nodes, name, args) {\n        var isPasteInsert = function (args) {\n          return args.data && args.data.paste === true;\n        };\n        var remove = function (node) {\n          if (!node.attr('data-mce-object') && src !== global$2.transparentSrc) {\n            node.remove();\n          }\n        };\n        var isWebKitFakeUrl = function (src) {\n          return src.indexOf('webkit-fake-url') === 0;\n        };\n        var isDataUri = function (src) {\n          return src.indexOf('data:') === 0;\n        };\n        if (!editor.settings.paste_data_images && isPasteInsert(args)) {\n          var i = nodes.length;\n          while (i--) {\n            src = nodes[i].attr('src');\n            if (!src) {\n              continue;\n            }\n            if (isWebKitFakeUrl(src)) {\n              remove(nodes[i]);\n            } else if (!editor.settings.allow_html_data_urls && isDataUri(src)) {\n              remove(nodes[i]);\n            }\n          }\n        }\n      });\n    };\n\n    var getPasteBinParent = function (editor) {\n      return global$2.ie && editor.inline ? domGlobals.document.body : editor.getBody();\n    };\n    var isExternalPasteBin = function (editor) {\n      return getPasteBinParent(editor) !== editor.getBody();\n    };\n    var delegatePasteEvents = function (editor, pasteBinElm, pasteBinDefaultContent) {\n      if (isExternalPasteBin(editor)) {\n        editor.dom.bind(pasteBinElm, 'paste keyup', function (e) {\n          if (!isDefault(editor, pasteBinDefaultContent)) {\n            editor.fire('paste');\n          }\n        });\n      }\n    };\n    var create = function (editor, lastRngCell, pasteBinDefaultContent) {\n      var dom = editor.dom, body = editor.getBody();\n      var pasteBinElm;\n      lastRngCell.set(editor.selection.getRng());\n      pasteBinElm = editor.dom.add(getPasteBinParent(editor), 'div', {\n        'id': 'mcepastebin',\n        'class': 'mce-pastebin',\n        'contentEditable': true,\n        'data-mce-bogus': 'all',\n        'style': 'position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0'\n      }, pasteBinDefaultContent);\n      if (global$2.ie || global$2.gecko) {\n        dom.setStyle(pasteBinElm, 'left', dom.getStyle(body, 'direction', true) === 'rtl' ? 65535 : -65535);\n      }\n      dom.bind(pasteBinElm, 'beforedeactivate focusin focusout', function (e) {\n        e.stopPropagation();\n      });\n      delegatePasteEvents(editor, pasteBinElm, pasteBinDefaultContent);\n      pasteBinElm.focus();\n      editor.selection.select(pasteBinElm, true);\n    };\n    var remove = function (editor, lastRngCell) {\n      if (getEl(editor)) {\n        var pasteBinClone = void 0;\n        var lastRng = lastRngCell.get();\n        while (pasteBinClone = editor.dom.get('mcepastebin')) {\n          editor.dom.remove(pasteBinClone);\n          editor.dom.unbind(pasteBinClone);\n        }\n        if (lastRng) {\n          editor.selection.setRng(lastRng);\n        }\n      }\n      lastRngCell.set(null);\n    };\n    var getEl = function (editor) {\n      return editor.dom.get('mcepastebin');\n    };\n    var getHtml = function (editor) {\n      var pasteBinElm, pasteBinClones, i, dirtyWrappers, cleanWrapper;\n      var copyAndRemove = function (toElm, fromElm) {\n        toElm.appendChild(fromElm);\n        editor.dom.remove(fromElm, true);\n      };\n      pasteBinClones = global$4.grep(getPasteBinParent(editor).childNodes, function (elm) {\n        return elm.id === 'mcepastebin';\n      });\n      pasteBinElm = pasteBinClones.shift();\n      global$4.each(pasteBinClones, function (pasteBinClone) {\n        copyAndRemove(pasteBinElm, pasteBinClone);\n      });\n      dirtyWrappers = editor.dom.select('div[id=mcepastebin]', pasteBinElm);\n      for (i = dirtyWrappers.length - 1; i >= 0; i--) {\n        cleanWrapper = editor.dom.create('div');\n        pasteBinElm.insertBefore(cleanWrapper, dirtyWrappers[i]);\n        copyAndRemove(cleanWrapper, dirtyWrappers[i]);\n      }\n      return pasteBinElm ? pasteBinElm.innerHTML : '';\n    };\n    var getLastRng = function (lastRng) {\n      return lastRng.get();\n    };\n    var isDefaultContent = function (pasteBinDefaultContent, content) {\n      return content === pasteBinDefaultContent;\n    };\n    var isPasteBin = function (elm) {\n      return elm && elm.id === 'mcepastebin';\n    };\n    var isDefault = function (editor, pasteBinDefaultContent) {\n      var pasteBinElm = getEl(editor);\n      return isPasteBin(pasteBinElm) && isDefaultContent(pasteBinDefaultContent, pasteBinElm.innerHTML);\n    };\n    var PasteBin = function (editor) {\n      var lastRng = Cell(null);\n      var pasteBinDefaultContent = '%MCEPASTEBIN%';\n      return {\n        create: function () {\n          return create(editor, lastRng, pasteBinDefaultContent);\n        },\n        remove: function () {\n          return remove(editor, lastRng);\n        },\n        getEl: function () {\n          return getEl(editor);\n        },\n        getHtml: function () {\n          return getHtml(editor);\n        },\n        getLastRng: function () {\n          return getLastRng(lastRng);\n        },\n        isDefault: function () {\n          return isDefault(editor, pasteBinDefaultContent);\n        },\n        isDefaultContent: function (content) {\n          return isDefaultContent(pasteBinDefaultContent, content);\n        }\n      };\n    };\n\n    var Clipboard = function (editor, pasteFormat) {\n      var pasteBin = PasteBin(editor);\n      editor.on('PreInit', function () {\n        return registerEventsAndFilters(editor, pasteBin, pasteFormat);\n      });\n      return {\n        pasteFormat: pasteFormat,\n        pasteHtml: function (html, internalFlag) {\n          return pasteHtml$1(editor, html, internalFlag);\n        },\n        pasteText: function (text) {\n          return pasteText(editor, text);\n        },\n        pasteImageData: function (e, rng) {\n          return pasteImageData(editor, e, rng);\n        },\n        getDataTransferItems: getDataTransferItems,\n        hasHtmlOrText: hasHtmlOrText,\n        hasContentType: hasContentType\n      };\n    };\n\n    var noop$1 = function () {\n    };\n    var hasWorkingClipboardApi = function (clipboardData) {\n      return global$2.iOS === false && clipboardData !== undefined && typeof clipboardData.setData === 'function' && Utils.isMsEdge() !== true;\n    };\n    var setHtml5Clipboard = function (clipboardData, html, text) {\n      if (hasWorkingClipboardApi(clipboardData)) {\n        try {\n          clipboardData.clearData();\n          clipboardData.setData('text/html', html);\n          clipboardData.setData('text/plain', text);\n          clipboardData.setData(InternalHtml.internalHtmlMime(), html);\n          return true;\n        } catch (e) {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    };\n    var setClipboardData = function (evt, data, fallback, done) {\n      if (setHtml5Clipboard(evt.clipboardData, data.html, data.text)) {\n        evt.preventDefault();\n        done();\n      } else {\n        fallback(data.html, done);\n      }\n    };\n    var fallback = function (editor) {\n      return function (html, done) {\n        var markedHtml = InternalHtml.mark(html);\n        var outer = editor.dom.create('div', {\n          'contenteditable': 'false',\n          'data-mce-bogus': 'all'\n        });\n        var inner = editor.dom.create('div', { contenteditable: 'true' }, markedHtml);\n        editor.dom.setStyles(outer, {\n          position: 'fixed',\n          top: '0',\n          left: '-3000px',\n          width: '1000px',\n          overflow: 'hidden'\n        });\n        outer.appendChild(inner);\n        editor.dom.add(editor.getBody(), outer);\n        var range = editor.selection.getRng();\n        inner.focus();\n        var offscreenRange = editor.dom.createRng();\n        offscreenRange.selectNodeContents(inner);\n        editor.selection.setRng(offscreenRange);\n        global$3.setTimeout(function () {\n          editor.selection.setRng(range);\n          outer.parentNode.removeChild(outer);\n          done();\n        }, 0);\n      };\n    };\n    var getData = function (editor) {\n      return {\n        html: editor.selection.getContent({ contextual: true }),\n        text: editor.selection.getContent({ format: 'text' })\n      };\n    };\n    var isTableSelection = function (editor) {\n      return !!editor.dom.getParent(editor.selection.getStart(), 'td[data-mce-selected],th[data-mce-selected]', editor.getBody());\n    };\n    var hasSelectedContent = function (editor) {\n      return !editor.selection.isCollapsed() || isTableSelection(editor);\n    };\n    var cut = function (editor) {\n      return function (evt) {\n        if (hasSelectedContent(editor)) {\n          setClipboardData(evt, getData(editor), fallback(editor), function () {\n            global$3.setTimeout(function () {\n              editor.execCommand('Delete');\n            }, 0);\n          });\n        }\n      };\n    };\n    var copy = function (editor) {\n      return function (evt) {\n        if (hasSelectedContent(editor)) {\n          setClipboardData(evt, getData(editor), fallback(editor), noop$1);\n        }\n      };\n    };\n    var register$1 = function (editor) {\n      editor.on('cut', cut(editor));\n      editor.on('copy', copy(editor));\n    };\n    var CutCopy = { register: register$1 };\n\n    var global$b = tinymce.util.Tools.resolve('tinymce.dom.RangeUtils');\n\n    var getCaretRangeFromEvent = function (editor, e) {\n      return global$b.getCaretRangeFromPoint(e.clientX, e.clientY, editor.getDoc());\n    };\n    var isPlainTextFileUrl = function (content) {\n      var plainTextContent = content['text/plain'];\n      return plainTextContent ? plainTextContent.indexOf('file://') === 0 : false;\n    };\n    var setFocusedRange = function (editor, rng) {\n      editor.focus();\n      editor.selection.setRng(rng);\n    };\n    var setup = function (editor, clipboard, draggingInternallyState) {\n      if (Settings.shouldBlockDrop(editor)) {\n        editor.on('dragend dragover draggesture dragdrop drop drag', function (e) {\n          e.preventDefault();\n          e.stopPropagation();\n        });\n      }\n      if (!Settings.shouldPasteDataImages(editor)) {\n        editor.on('drop', function (e) {\n          var dataTransfer = e.dataTransfer;\n          if (dataTransfer && dataTransfer.files && dataTransfer.files.length > 0) {\n            e.preventDefault();\n          }\n        });\n      }\n      editor.on('drop', function (e) {\n        var dropContent, rng;\n        rng = getCaretRangeFromEvent(editor, e);\n        if (e.isDefaultPrevented() || draggingInternallyState.get()) {\n          return;\n        }\n        dropContent = clipboard.getDataTransferItems(e.dataTransfer);\n        var internal = clipboard.hasContentType(dropContent, InternalHtml.internalHtmlMime());\n        if ((!clipboard.hasHtmlOrText(dropContent) || isPlainTextFileUrl(dropContent)) && clipboard.pasteImageData(e, rng)) {\n          return;\n        }\n        if (rng && Settings.shouldFilterDrop(editor)) {\n          var content_1 = dropContent['mce-internal'] || dropContent['text/html'] || dropContent['text/plain'];\n          if (content_1) {\n            e.preventDefault();\n            global$3.setEditorTimeout(editor, function () {\n              editor.undoManager.transact(function () {\n                if (dropContent['mce-internal']) {\n                  editor.execCommand('Delete');\n                }\n                setFocusedRange(editor, rng);\n                content_1 = Utils.trimHtml(content_1);\n                if (!dropContent['text/html']) {\n                  clipboard.pasteText(content_1);\n                } else {\n                  clipboard.pasteHtml(content_1, internal);\n                }\n              });\n            });\n          }\n        }\n      });\n      editor.on('dragstart', function (e) {\n        draggingInternallyState.set(true);\n      });\n      editor.on('dragover dragend', function (e) {\n        if (Settings.shouldPasteDataImages(editor) && draggingInternallyState.get() === false) {\n          e.preventDefault();\n          setFocusedRange(editor, getCaretRangeFromEvent(editor, e));\n        }\n        if (e.type === 'dragend') {\n          draggingInternallyState.set(false);\n        }\n      });\n    };\n    var DragDrop = { setup: setup };\n\n    var setup$1 = function (editor) {\n      var plugin = editor.plugins.paste;\n      var preProcess = Settings.getPreProcess(editor);\n      if (preProcess) {\n        editor.on('PastePreProcess', function (e) {\n          preProcess.call(plugin, plugin, e);\n        });\n      }\n      var postProcess = Settings.getPostProcess(editor);\n      if (postProcess) {\n        editor.on('PastePostProcess', function (e) {\n          postProcess.call(plugin, plugin, e);\n        });\n      }\n    };\n    var PrePostProcess = { setup: setup$1 };\n\n    function addPreProcessFilter(editor, filterFunc) {\n      editor.on('PastePreProcess', function (e) {\n        e.content = filterFunc(editor, e.content, e.internal, e.wordContent);\n      });\n    }\n    function addPostProcessFilter(editor, filterFunc) {\n      editor.on('PastePostProcess', function (e) {\n        filterFunc(editor, e.node);\n      });\n    }\n    function removeExplorerBrElementsAfterBlocks(editor, html) {\n      if (!WordFilter.isWordContent(html)) {\n        return html;\n      }\n      var blockElements = [];\n      global$4.each(editor.schema.getBlockElements(), function (block, blockName) {\n        blockElements.push(blockName);\n      });\n      var explorerBlocksRegExp = new RegExp('(?:<br>&nbsp;[\\\\s\\\\r\\\\n]+|<br>)*(<\\\\/?(' + blockElements.join('|') + ')[^>]*>)(?:<br>&nbsp;[\\\\s\\\\r\\\\n]+|<br>)*', 'g');\n      html = Utils.filter(html, [[\n          explorerBlocksRegExp,\n          '$1'\n        ]]);\n      html = Utils.filter(html, [\n        [\n          /<br><br>/g,\n          '<BR><BR>'\n        ],\n        [\n          /<br>/g,\n          ' '\n        ],\n        [\n          /<BR><BR>/g,\n          '<br>'\n        ]\n      ]);\n      return html;\n    }\n    function removeWebKitStyles(editor, content, internal, isWordHtml) {\n      if (isWordHtml || internal) {\n        return content;\n      }\n      var webKitStylesSetting = Settings.getWebkitStyles(editor);\n      var webKitStyles;\n      if (Settings.shouldRemoveWebKitStyles(editor) === false || webKitStylesSetting === 'all') {\n        return content;\n      }\n      if (webKitStylesSetting) {\n        webKitStyles = webKitStylesSetting.split(/[, ]/);\n      }\n      if (webKitStyles) {\n        var dom_1 = editor.dom, node_1 = editor.selection.getNode();\n        content = content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi, function (all, before, value, after) {\n          var inputStyles = dom_1.parseStyle(dom_1.decode(value));\n          var outputStyles = {};\n          if (webKitStyles === 'none') {\n            return before + after;\n          }\n          for (var i = 0; i < webKitStyles.length; i++) {\n            var inputValue = inputStyles[webKitStyles[i]], currentValue = dom_1.getStyle(node_1, webKitStyles[i], true);\n            if (/color/.test(webKitStyles[i])) {\n              inputValue = dom_1.toHex(inputValue);\n              currentValue = dom_1.toHex(currentValue);\n            }\n            if (currentValue !== inputValue) {\n              outputStyles[webKitStyles[i]] = inputValue;\n            }\n          }\n          outputStyles = dom_1.serializeStyle(outputStyles, 'span');\n          if (outputStyles) {\n            return before + ' style=\"' + outputStyles + '\"' + after;\n          }\n          return before + after;\n        });\n      } else {\n        content = content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi, '$1$3');\n      }\n      content = content.replace(/(<[^>]+) data-mce-style=\"([^\"]+)\"([^>]*>)/gi, function (all, before, value, after) {\n        return before + ' style=\"' + value + '\"' + after;\n      });\n      return content;\n    }\n    function removeUnderlineAndFontInAnchor(editor, root) {\n      editor.$('a', root).find('font,u').each(function (i, node) {\n        editor.dom.remove(node, true);\n      });\n    }\n    var setup$2 = function (editor) {\n      if (global$2.webkit) {\n        addPreProcessFilter(editor, removeWebKitStyles);\n      }\n      if (global$2.ie) {\n        addPreProcessFilter(editor, removeExplorerBrElementsAfterBlocks);\n        addPostProcessFilter(editor, removeUnderlineAndFontInAnchor);\n      }\n    };\n    var Quirks = { setup: setup$2 };\n\n    var makeSetupHandler = function (editor, clipboard) {\n      return function (api) {\n        api.setActive(clipboard.pasteFormat.get() === 'text');\n        var pastePlainTextToggleHandler = function (e) {\n          return api.setActive(e.state);\n        };\n        editor.on('PastePlainTextToggle', pastePlainTextToggleHandler);\n        return function () {\n          return editor.off('PastePlainTextToggle', pastePlainTextToggleHandler);\n        };\n      };\n    };\n    var register$2 = function (editor, clipboard) {\n      editor.ui.registry.addToggleButton('pastetext', {\n        active: false,\n        icon: 'paste-text',\n        tooltip: 'Paste as text',\n        onAction: function () {\n          return editor.execCommand('mceTogglePlainTextPaste');\n        },\n        onSetup: makeSetupHandler(editor, clipboard)\n      });\n      editor.ui.registry.addToggleMenuItem('pastetext', {\n        text: 'Paste as text',\n        onAction: function () {\n          return editor.execCommand('mceTogglePlainTextPaste');\n        },\n        onSetup: makeSetupHandler(editor, clipboard)\n      });\n    };\n    var Buttons = { register: register$2 };\n\n    function Plugin () {\n      global$1.add('paste', function (editor) {\n        if (DetectProPlugin.hasProPlugin(editor) === false) {\n          var draggingInternallyState = Cell(false);\n          var pasteFormat = Cell(Settings.isPasteAsTextEnabled(editor) ? 'text' : 'html');\n          var clipboard = Clipboard(editor, pasteFormat);\n          var quirks = Quirks.setup(editor);\n          Buttons.register(editor, clipboard);\n          Commands.register(editor, clipboard);\n          PrePostProcess.setup(editor);\n          CutCopy.register(editor);\n          DragDrop.setup(editor, clipboard, draggingInternallyState);\n          return Api.get(clipboard, quirks);\n        }\n      });\n    }\n\n    Plugin();\n\n}(window));\n"]}