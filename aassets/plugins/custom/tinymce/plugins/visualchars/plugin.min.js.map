{"version":3,"sources":["visualchars/plugin.min.js"],"names":["r","u","n","e","l","t","o","get","set","clone","i","tinymce","util","Tools","resolve","f","s","fold","is","isSome","isNone","getOr","g","getOrThunk","m","getOrDie","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","equals","d","equals_","toArray","toString","Object","freeze","N","Array","prototype","isPrototypeOf","constructor","name","String","v","length","h","dom","nodeValue","p","L","P","R","console","error","setAttribute","E","removeAttribute","T","getAttribute","split","O","classList","C","RegExp","A","_","nodeName","toLowerCase","contains","w","W","filterDescendants","F","fromDom","isMatch","parentNode","add","concat","join","y","H","nbspClass","replaceWithSpans","create","lastChild","insertAfter","remove","M","select","selector","push","b","D","S","setActive","state","on","off","k","x","B","U","slice","from","Node","ATTRIBUTE_NODE","CDATA_SECTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","ELEMENT_NODE","TEXT_NODE","j","PROCESSING_INSTRUCTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","NOTATION_NODE","window","Function","nodeType","q","fromHtml","document","createElement","innerHTML","hasChildNodes","childNodes","fromTag","fromText","createTextNode","fromPoint","I","elementFromPoint","G"," ","­","charMap","regExp","regExpGlobal","charMapToRegExp","charMapToSelector","Y","z","test","findParentElm","replace","K","X","J","getBody","selection","getBookmark","getNode","moveToBookmark","Q","fire","a","$","addCommand","Z","ui","registry","addToggleButton","tooltip","icon","onAction","execCommand","onSetup","addToggleMenuItem","text","debounce","settings","forced_root_block","keyCode","nn","getParam","en","tn","isEnabled","c"],"mappings":"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","file":"plugin.min.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.0 (2019-10-17)\n */\n!function(r){\"use strict\";function n(){}function u(n){return function(){return n}}function e(){return l}var t,o=function(n){function e(){return t}var t=n;return{get:e,set:function(n){t=n},clone:function(){return o(e())}}},i=tinymce.util.Tools.resolve(\"tinymce.PluginManager\"),c=function(n){return{isEnabled:function(){return n.get()}}},a=function(n,e){return n.fire(\"VisualChars\",{state:e})},f=u(!1),s=u(!0),l=(t={fold:function(n,e){return n()},is:f,isSome:f,isNone:s,getOr:g,getOrThunk:m,getOrDie:function(n){throw new Error(n||\"error: getOrDie called on none.\")},getOrNull:u(null),getOrUndefined:u(undefined),or:g,orThunk:m,map:e,each:n,bind:e,exists:f,forall:s,filter:e,equals:d,equals_:d,toArray:function(){return[]},toString:u(\"none()\")},Object.freeze&&Object.freeze(t),t);function d(n){return n.isNone()}function m(n){return n()}function g(n){return n}function N(e){return function(n){return function(n){if(null===n)return\"null\";var e=typeof n;return\"object\"==e&&(Array.prototype.isPrototypeOf(n)||n.constructor&&\"Array\"===n.constructor.name)?\"array\":\"object\"==e&&(String.prototype.isPrototypeOf(n)||n.constructor&&\"String\"===n.constructor.name)?\"string\":e}(n)===e}}function v(n,e){for(var t=0,r=n.length;t<r;t++){e(n[t],t)}}function h(n){return n.dom().nodeValue}function p(n,e,t){!function(n,e,t){if(!(L(t)||P(t)||R(t)))throw r.console.error(\"Invalid call to Attr.set. Key \",e,\":: Value \",t,\":: Element \",n),new Error(\"Attribute value was not simple\");n.setAttribute(e,t+\"\")}(n.dom(),e,t)}function E(n,e){n.dom().removeAttribute(e)}function T(n,e){var t=function(n,e){var t=n.dom().getAttribute(e);return null===t?undefined:t}(n,e);return t===undefined||\"\"===t?[]:t.split(\" \")}function O(n){return n.dom().classList!==undefined}function y(n,e){return function(n,e,t){var r=T(n,e).concat([t]);return p(n,e,r.join(\" \")),!0}(n,\"class\",e)}function b(n,e){return function(n,e,t){var r=function(n,e){for(var t=[],r=0,o=n.length;r<o;r++){var u=n[r];e(u,r)&&t.push(u)}return t}(T(n,e),function(n){return n!==t});return 0<r.length?p(n,e,r.join(\" \")):E(n,e),!1}(n,\"class\",e)}function D(n){0===(O(n)?n.dom().classList:function(n){return T(n,\"class\")}(n)).length&&E(n,\"class\")}function C(n,e){var t,r=\"\";for(t in n)r+=t;return new RegExp(\"[\"+r+\"]\",e?\"g\":\"\")}function A(n){var e,t=\"\";for(e in n)t&&(t+=\",\"),t+=\"span.mce-\"+n[e];return t}function _(n){return\"span\"===n.nodeName.toLowerCase()&&n.classList.contains(\"mce-nbsp-wrap\")}function w(u,n){var e=W.filterDescendants(F.fromDom(n),W.isMatch);v(e,function(n){var e=n.dom().parentNode;if(_(e))!function(n,e){O(n)?n.dom().classList.add(e):y(n,e)}(F.fromDom(e),H.nbspClass);else{for(var t=W.replaceWithSpans(h(n)),r=u.dom.create(\"div\",null,t),o=void 0;o=r.lastChild;)u.dom.insertAfter(o,n.dom());u.dom.remove(n.dom())}})}function M(e,n){var t=e.dom.select(H.selector,n);v(t,function(n){_(n)?function(n,e){O(n)?n.dom().classList.remove(e):b(n,e);D(n)}(F.fromDom(n),H.nbspClass):e.dom.remove(n,!0)})}function S(t,r){return function(e){e.setActive(r.get());function n(n){return e.setActive(n.state)}return t.on(\"VisualChars\",n),function(){return t.off(\"VisualChars\",n)}}}var k,x=function(t){function n(){return o}function e(n){return n(t)}var r=u(t),o={fold:function(n,e){return e(t)},is:function(n){return t===n},isSome:s,isNone:f,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:n,orThunk:n,map:function(n){return x(n(t))},each:function(n){n(t)},bind:e,exists:e,forall:e,filter:function(n){return n(t)?o:l},toArray:function(){return[t]},toString:function(){return\"some(\"+t+\")\"},equals:function(n){return n.is(t)},equals_:function(n,e){return n.fold(f,function(n){return e(t,n)})}};return o},I=function(n){return null===n||n===undefined?l:x(n)},L=N(\"string\"),P=N(\"boolean\"),B=N(\"function\"),R=N(\"number\"),V=Array.prototype.slice,U=(B(Array.from)&&Array.from,r.Node.ATTRIBUTE_NODE,r.Node.CDATA_SECTION_NODE,r.Node.COMMENT_NODE,r.Node.DOCUMENT_NODE,r.Node.DOCUMENT_TYPE_NODE,r.Node.DOCUMENT_FRAGMENT_NODE,r.Node.ELEMENT_NODE,r.Node.TEXT_NODE),j=(r.Node.PROCESSING_INSTRUCTION_NODE,r.Node.ENTITY_REFERENCE_NODE,r.Node.ENTITY_NODE,r.Node.NOTATION_NODE,\"undefined\"!=typeof r.window?r.window:Function(\"return this;\")(),k=U,function(n){return function(n){return n.dom().nodeType}(n)===k}),q=function(n){if(null===n||n===undefined)throw new Error(\"Node cannot be null or undefined\");return{dom:u(n)}},F={fromHtml:function(n,e){var t=(e||r.document).createElement(\"div\");if(t.innerHTML=n,!t.hasChildNodes()||1<t.childNodes.length)throw r.console.error(\"HTML does not have a single root node\",n),new Error(\"HTML must have a single root node\");return q(t.childNodes[0])},fromTag:function(n,e){var t=(e||r.document).createElement(n);return q(t)},fromText:function(n,e){var t=(e||r.document).createTextNode(n);return q(t)},fromDom:q,fromPoint:function(n,e,t){var r=n.dom();return I(r.elementFromPoint(e,t)).map(q)}},G={\"\\xa0\":\"nbsp\",\"\\xad\":\"shy\"},H={charMap:G,regExp:C(G),regExpGlobal:C(G,!0),selector:A(G),nbspClass:\"mce-nbsp\",charMapToRegExp:C,charMapToSelector:A},Y=function(n){return'<span data-mce-bogus=\"1\" class=\"mce-'+H.charMap[n]+'\">'+n+\"</span>\"},z=function(n,e){var t=[],r=function(n,e){for(var t=n.length,r=new Array(t),o=0;o<t;o++){var u=n[o];r[o]=e(u,o)}return r}(n.dom().childNodes,F.fromDom);return v(r,function(n){e(n)&&(t=t.concat([n])),t=t.concat(z(n,e))}),t},W={isMatch:function(n){return j(n)&&h(n)!==undefined&&H.regExp.test(h(n))},filterDescendants:z,findParentElm:function(n,e){for(;n.parentNode;){if(n.parentNode===e)return n;n=n.parentNode}},replaceWithSpans:function(n){return n.replace(H.regExpGlobal,Y)}},K=w,X=M,J=function(n){var e=n.getBody(),t=n.selection.getBookmark(),r=W.findParentElm(n.selection.getNode(),e);r=r!==undefined?r:e,M(n,r),w(n,r),n.selection.moveToBookmark(t)},Q=function(n,e){var t,r=n.getBody(),o=n.selection;e.set(!e.get()),a(n,e.get()),t=o.getBookmark(),!0===e.get()?K(n,r):X(n,r),o.moveToBookmark(t)},Z=function(n,e){n.addCommand(\"mceVisualChars\",function(){Q(n,e)})},$=tinymce.util.Tools.resolve(\"tinymce.util.Delay\"),nn=function(e,t){var r=$.debounce(function(){J(e)},300);!1!==e.settings.forced_root_block&&e.on(\"keydown\",function(n){!0===t.get()&&(13===n.keyCode?J(e):r())})},en=function(n){return n.getParam(\"visualchars_default_state\",!1)},tn=function(e,t){e.on(\"init\",function(){var n=!en(e);t.set(n),Q(e,t)})};!function rn(){i.add(\"visualchars\",function(n){var e=o(!1);return Z(n,e),function(n,e){n.ui.registry.addToggleButton(\"visualchars\",{tooltip:\"Show invisible characters\",icon:\"visualchars\",onAction:function(){return n.execCommand(\"mceVisualChars\")},onSetup:S(n,e)}),n.ui.registry.addToggleMenuItem(\"visualchars\",{text:\"Show invisible characters\",onAction:function(){return n.execCommand(\"mceVisualChars\")},onSetup:S(n,e)})}(n,e),nn(n,e),tn(n,e),c(e)})}()}(window);"]}